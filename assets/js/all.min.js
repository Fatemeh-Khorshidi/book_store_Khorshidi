function signupController(e, t, o, n) {
    var a = this,
        r = e.$parent.$parent,
        i = angular.element(document.querySelector(".signup-modal"));
    a.captcha_url = r.loadSignupCaptcha ? "" : r.captcha_url, a.captcha_0 = r.loadSignupCaptcha ? "" : r.captcha_0, a.showSignupForm = !0, a.passwordInputType = "password", a.showHidePasswordClass = "view", a.hideShowPassword = function() {
        a.passwordInputType = "password" === a.passwordInputType ? "text" : "password", a.showHidePasswordClass = "view" === a.showHidePasswordClass ? "hide" : "view"
    }, a.member_referral_active = "True" === MEMBER_REFERAL_ACTIVE, a.back = function() {
        a.showSignupForm = !0, r.showNavTabs = !0
    }, a.reset_captcha = function() {
        o.get_captcha_url().then(function(e) {
            a.captcha_url = e.data.captcha_url, r.captcha_url = a.captcha_url, a.captcha_0 = e.data.captcha_challenge, r.captcha_0 = a.captcha_0
        })
    }, a.showSocialSignupForm = function(e) {
        a.isfbSignup = "fb" === e, a.referralSocialErrorMsg = "", a.member_referral_active ? (r.showNavTabs = !1, a.showSignupForm = !1) : a.redirectToSocialService(!1)
    }, a.doSocialRedirect = function() {
        a.isfbSignup ? o.fb_login("reg", a.referralCodeSocial) : o.gplus_login("reg", a.referralCodeSocial)
    }, a.redirectToSocialService = function(e) {
        if (e) {
            a.referralSocialErrorMsg = "";
            var t = {
                ref_code: a.referralCodeSocial
            };
            o.getRequest("/auth/valid-referral-code/", t, r).then(function(e) {
                e.data.valid ? a.doSocialRedirect() : a.referralSocialErrorMsg = "Invalid referral code"
            })
        } else a.doSocialRedirect()
    }, r.loadSignupCaptcha && (a.reset_captcha(), r.loadSignupCaptcha = !1), a.reset_form = function() {
        a.reset_captcha(), e.signupForm.$setPristine(), e.signupForm.$setUntouched()
    }, a.show_server_error = function(e) {
        Object.keys(e).forEach(function(t) {
            t in a.error_messages && (a.error_messages[t] = e[t][0])
        })
    }, a.signup = function(e) {
        if (e && a.isPasswordValid) {
            var t = {
                firstname: a.fname,
                lastname: a.lname,
                email: a.email,
                password: a.password,
                Submit: "LOG IN",
                next: "/",
                captcha_0: a.captcha_0,
                captcha_1: a.captcha_1
            };
            a.error_messages = {
                email: "",
                referral: "",
                captcha: ""
            }, o.submitForm(t, "/auth/signup/", r).then(function(e) {
                void 0 !== e.data.redirect && e.data.redirect ? (r.redirect(), r.close()) : (a.reset_form(), a.show_server_error(e.data), i.addClass("shake"), n(function() {
                    i.removeClass("shake")
                }, 500))
            })
        } else i.addClass("shake"), n(function() {
            i.removeClass("shake")
        }, 500)
    }, a.checkPassword = function(e) {
        a.isPasswordValid = e > 0
    }, a.donotAllowSpecialChars = function(e) {
        e.key.search(/^[a-zA-Z0-9\s]+$/) == -1 && e.preventDefault()
    }
}

function make_req_url(e) {
    return ("https:" == window.location.protocol ? "/auth" : "") + e
}

function get_cookie(e) {
    var t = document.cookie.indexOf(e);
    if (t > -1) {
        var o = document.cookie.indexOf("=", t) + 2,
            n = document.cookie.indexOf('"', o);
        return document.cookie.substring(o, n)
    }
    return null
}

function initKapchat() {
    if (!get_cookie("_bb_mid")) return !1;
    var e = $.ajax({
        url: "/get_kptur/",
        method: "GET"
    });
    e.done(function(e) {
        "use strict";
        t(e.ency, e.kkye)
    });
    var t = function(e, t) {
        Kapchat.initialize({
            customercode: e,
            key: "183456e7b3122af0e470176ba2d207a4",
            iv: t,
            context: "kapchat-widget-btn",
            label: "Customer Support",
            widget: "kp_widget_tk",
            success: function() {},
            error: function(e) {
                console.log(e)
            }
        })
    }
}! function() {
    "use strict";
    angular.module("app", ["app.core", "app.layout", "app.customPage", "app.engagementStore", "app.GiftCard"])
}(),
function() {
    "use strict";
    angular.module("app.core", ["ngSanitize", "ngAnimate", "ui.bootstrap", "ui.select"])
}(),
function() {
    "use strict";

    function e(e) {
        e.lazySizesConfig = e.lazySizesConfig || {}, e.lazySizesConfig.srcAttr = "data-src", e.lazySizesConfig.srcsetAttr = "data-srcset"
    }
    e.$inject = ["$window"], angular.module("app.customPage", ["ui.scrollpoint"]).run(e)
}(),
function() {
    "use strict";
    angular.module("app.engagementStore", [])
}(),
function() {
    "use strict";
    angular.module("app.GiftCard", [])
}(),
function() {
    "use strict";
    angular.module("app.layout", ["ngCookies"])
}(),
function() {
    "use strict";
    angular.module("blocks.exception", ["blocks.logger"])
}(),
function() {
    "use strict";
    angular.module("blocks.logger", [])
}(),
function() {
    "use strict";
    angular.module("blocks.router", ["ngRoute", "blocks.logger"])
}(),
function() {
    "use strict";

    function e(e, t, o, n) {
        o.useApplyAsync(!0), e.debugEnabled && e.debugEnabled(!1), t.startSymbol("{[{"), t.endSymbol("}]}"), o.defaults.xsrfCookieName = "csrftoken", o.defaults.xsrfHeaderName = "X-CSRFToken", o.defaults.headers.common["X-Requested-With"] = "XMLHttpRequest", o.defaults.headers.post["X-CSRFToken"] = $.cookie("csrftoken"), n.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension|bigbasket):/)
    }
    e.$inject = ["$logProvider", "$interpolateProvider", "$httpProvider", "$compileProvider"];
    var t = angular.module("app.core"),
        o = {
            appErrorPrefix: "[Bigbasket Error] ",
            appTitle: "Custom Page",
            version: "1.0.0"
        };
    t.value("config", o), t.config(e), t.config(["$locationProvider", function(e) {
        e.html5Mode({
            enabled: !0,
            requireBase: !1,
            rewriteLinks: !1
        }).hashPrefix("!")
    }]), t.constant("R", R), t.constant("toastr", toastr)
}(),
function() {
    "use strict";

    function e(e, t, o, n, a, r) {
        function i() {
            return function(e) {
                (/(android|ipad|playbook|silk|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0, 4))) && (n.channel = "mobile")
            }(navigator.userAgent || navigator.vendor || window.opera), n.channel
        }

        function s(e) {
            e.bgColor = void 0 == e.bgColor ? "#fff" : e.bgColor, e.colorStop1 = void 0 == e.colorStop1 ? "#fff" : e.colorStop1, e.colorStop2 = void 0 == e.colorStop2 ? "#fff" : e.colorStop2, "bgImage" == e.bgOption && void 0 == e.picFile && (e.bgOption = "plainColor"), void 0 == e.picFile && (e.picFile = {});
            var t = {
                    "background-color": e.bgColor,
                    display: "block"
                },
                o = {
                    "background-image": "-webkit-gradient(linear, left top, right top, color-stop(0%," + e.colorStop1 + "), color-stop(100%, " + e.colorStop2 + ")"
                },
                n = {
                    "background-image": "radial-gradient(ellipse farthest-corner at 50% 50% , " + e.colorStop1 + " 0%, " + e.colorStop1 + " 50%, " + e.colorStop2 + " 95%)",
                    height: "100%",
                    margin: "0",
                    "background-repeat": "no-repeat",
                    "background-attachment": "fixed"
                },
                a = {
                    background: "url(" + e.picFile + ")  no-repeat left center",
                    "background-size": "cover",
                    height: "100%",
                    margin: "0",
                    "background-attachment": "fixed"
                },
                r = {
                    background: "url(" + e.picFile + ") repeat",
                    margin: "0"
                };
            "plainColor" == e.bgOption ? p.appliedStyle = t : "gradientColor" == e.bgOption ? "Linear" == e.pattern ? p.appliedStyle = o : p.appliedStyle = n : "bgImage" == e.bgOption && ("selectedBGImage" == e.imagePattern ? p.appliedStyle = a : p.appliedStyle = r), $(document.body).css(p.appliedStyle)
        }

        function c() {
            1 == is_search_page || 2 == is_search_page ? (n.nc = "ps", d(slug)) : 3 == is_search_page ? (n.nc = "sugg-ps", d("")) : l()
        }

        function l() {
            t.getCustomPage().then(function(e) {
                if (null !== e) {
                    p.customPage = e;
                    var t = u(p.customPage);
                    return t.then(function() {
                        $(m).fadeIn(2e3)
                    }), p.customPage
                }
            })
        }

        function d(e) {
            1 == is_search_page ? 1 == p.searchJsonData.show_deck && (p.searchJsonData.suggestion && (e = p.searchJsonData.suggestion), t.getSearchPageData(e, "deck").then(function(e) {
                if (null != e) {
                    p.customPage = {}, p.customPage = {
                        pageGroupId: "",
                        id: "",
                        pgIrlNam: "",
                        internalName: "",
                        pageStyl: {}
                    }, e.structure.commonly_searched = p.searchJsonData.commonly_searched, e.structure.suggestion_message = p.searchJsonData.suggestion_message, e.structure.banners = p.searchJsonData.banners, p.customPage.sectionDetails = [e.structure];
                    var t = u(p.customPage);
                    return t.then(function() {
                        $(m).fadeIn(2e3)
                    }), p.customPage
                }
            })) : 2 == is_search_page ? t.getSearchPageData(e, "now-new").then(function(e) {
                if (null != e) {
                    p.customPage = {}, p.customPage = {
                        pageGroupId: "",
                        id: "",
                        pgIrlNam: "",
                        internalName: "",
                        pageStyl: {}
                    }, e.sectionDetails = t.updateNewAtBBList(e.sectionDetails, p.searchJsonData), p.customPage.sectionDetails = e.sectionDetails;
                    var o = u(p.customPage);
                    return o.then(function() {
                        $(m).fadeIn(2e3)
                    }), p.customPage
                }
            }) : 3 == is_search_page ? t.getSearchPageData(e, "sugg_search").then(function(e) {
                if (null != e) {
                    p.customPage = {}, p.customPage = {
                        pageGroupId: "",
                        id: "",
                        pgIrlNam: "",
                        internalName: "",
                        pageStyl: {}
                    }, e.sectionDetails = t.updateSuggestionList(e.sectionDetails, p.searchJsonData.suggested_search), p.customPage.sectionDetails = e.sectionDetails;
                    var o = u(p.customPage);
                    return o.then(function() {
                        $(m).fadeIn(2e3)
                    }), p.customPage
                }
            }) : 3 == is_search_page && t.getSearchPageData(e, "sugg_search").then(function(e) {
                if (null != e) {
                    p.customPage = {}, p.customPage = {
                        pageGroupId: "",
                        id: "",
                        pgIrlNam: "",
                        internalName: "",
                        pageStyl: {}
                    }, e.sectionDetails = t.updateSuggestionList(e.sectionDetails, p.searchJsonData.suggested_search), p.customPage.sectionDetails = e.sectionDetails;
                    var o = u(p.customPage);
                    return o.then(function() {
                        $(m).fadeIn(2e3)
                    }), p.customPage
                }
            })
        }

        function u(t) {
            var n = a.defer();
            return r(function() {
                var a = t.sectionDetails;
                p.setBackgroundColor(t.pageStyl);
                t.breakStyl;
                $(m).hide();
                var r = {},
                    i = {};
                a = g(a);
                var s = 1;
                angular.forEach(a, function(n, a) {
                    r = e.$new(), n.display_pos = s++, n.order = Number(n.order) + 1, r.dsection = n, r.dsection.pagegroupid = t.pageGroupId, r.dsection.pageid = t.id, r.dsection.pgIrlNam = t.pgIrlNam, r.dsection.pageinternalName = t.internalName, r.dsection.pageStyle = t.pageStyl, i = o(n.layout.renderingDirective)(r), m.append(i)
                }), n.resolve("Complete")
            }), n.promise
        }
        var p = this;
        p.customPage = {}, p.appliedStyle = {}, p.setBackgroundColor = s, p.searchJsonData = "{}", void 0 != SEARCH_JSON_DATA && (p.searchJsonData = JSON.parse(SEARCH_JSON_DATA));
        var g = R.sortBy(R.prop("order")),
            m = $("#dynamicDirective");
        n.USED_STATIC_URL = USED_STATIC_URL, n.channel = "desktop", n.nc = "custompage" == ctype ? "cp" : "ct", i(), c()
    }
    angular.module("app.customPage").controller("CustomPage", e), e.$inject = ["$scope", "CustomPageDataService", "$compile", "$rootScope", "$q", "$timeout"]
}(),
function() {
    "use strict";

    function e() {
        var e = {
            link: function(e, t, o) {
                t.bind("error", function() {
                    angular.element(this).attr("src", o.fallbackSrc)
                })
            }
        };
        return e
    }

    function t(e) {
        function t(t, o, n) {
            var a = e(t.sectionModel.info)(t),
                r = angular.element(o)[0].querySelector("section");
            angular.element(r).append(a)
        }
        return {
            restrict: "E",
            scope: {
                sectionModel: "="
            },
            templateUrl: "app/templates/innertemplates/information.html",
            link: t
        }
    }

    function o(e) {
        function t(t, o, n) {
            t.sectionData = t.sectionModel.section_data, t.pushToGoogleAnalytics = e.pushToGoogleAnalytics()
        }
        return {
            restrict: "E",
            scope: {
                sectionModel: "="
            },
            templateUrl: "app/templates/innertemplates/saving.html",
            link: t
        }
    }

    function n(e, t, o, n, a, r) {
        function i() {
            k.selectedQuantity = void 0 === S ? 0 : S, k.selectedQuantityText = void 0 === S ? "" : k.selectedQuantity + " in basket", S ? k.check = !0 : k.check = !1
        }

        function s() {
            t.$broadcast("Notify", k.selectedProduct.sku)
        }

        function c(e) {
            k.available = e
        }

        function l(e) {
            return R.isEmpty(e)
        }

        function d(o) {
            if (void 0 !== o && null !== o && 0 !== Object.keys(o).length && o.constructor !== Object) {
                if (k.flashIsOff = !1, 1 == o.show_counter) {
                    var n = (new Date).getTime() / 1e3;
                    e.timeConverter(n), t.$on("TimeCheck", function(t, o) {
                        e.timeConverter(o.data)
                    })
                } else k.flashMessage = k.selectedProduct.sale_info.display_message;
                return !0
            }
            return !1
        }

        function u(t) {
            return e.baseurl + "/" + t.p_img_url
        }

        function p(e) {
            return P.test(e.fi_type)
        }

        function g(e) {
            var o = t.member_stores[e.availability_info_id];
            if (o) {
                if ("normal" == o.fi_type || "jit" == o.fi_type) {
                    o.eta
                } else if ("marketplace" == o.fi_type) o.eta = " ";
                else {
                    if (!t.is_express_availaible || "BB EXPRESS (SLOTS FULL)" === t.express_closed) return !1;
                    o.eta
                }
                return o
            }
            return !1
        }

        function m(e) {
            var o = t.member_stores[e.availability_info_id];
            return void 0 !== o
        }

        function f() {
            k.selectedQuantity = n.getformatedcart()[k.selectedProduct.sku], k.selectedQuantityText = void 0 === k.selectedQuantity ? "" : k.selectedQuantity + " in basket", k.startQuantity = void 0 === k.selectedQuantity ? 1 : k.selectedQuantity, k.selectedQuantity ? k.check = !0 : k.check = !1
        }

        function h() {
            if (k.selectedQuantity > 1) {
                var e = Number(k.selectedQuantity) - 1;
                n.updateCartQuantity(k.selectedProduct.sku, e, k.sid).then(function(e) {
                    e && (n.getCart().then(function(e) {
                        _(), k.selectedQuantity = n.getformatedcart()[k.selectedProduct.sku], k.startQuantity = k.selectedQuantity, k.selectedQuantityText = k.selectedQuantity + " in basket", k.selectedProduct.is_feature_selected = k.selectedQuantity, 0 === k.selectedQuantity && (k.rmActivated(), k.startQuantity = 1, k.selectedProduct.is_feature_selected = 0)
                    }), $(document).trigger("basketInteractionsPlowerWithAngular", [{
                        EventName: "Basket_Decrement",
                        SkuID: k.selectedProduct.sku,
                        Quantity: 1,
                        UnitMrp: k.selectedProduct.mrp,
                        UnitSalePrice: k.selectedProduct.sp,
                        ScreenInPageContext: k.sectionModel.internalName,
                        ScreenInPagePosition: Number(k.sectionModel.display_pos)
                    }]), r.pushToGoogleAnalytics("_trackEvent", "decr-quantity", "custom-page", k.sectionModel.display_pos + " | " + k.sectionModel.pageinternalName + " | " + k.ga_section_name + " | " + k.sectionModel.internalName + " | " + k.selectedProduct.sku + " | " + k.selectedProduct.p_desc + " | " + k.itemposition, 1))
                })
            } else 1 === k.selectedQuantity && n.deleteFromBasket(k.selectedProduct.sku, k.sid).then(function(e) {
                e ? (n.getCart().then(function(e) {
                    _(), k.selectedQuantity = 0, k.startQuantity = 1, k.check = !1, k.selectedProduct.is_feature_selected = 0, a.success("", "Successfully Removed " + k.selectedProduct.p_desc + "from basket ", {
                        timeOut: 400,
                        positionClass: "toast-top-full-width",
                        closeButton: !0,
                        preventDuplicates: !0
                    })
                }), $(document).trigger("basketInteractionsPlowerWithAngular", [{
                    EventName: "Basket_Remove",
                    SkuID: k.selectedProduct.sku,
                    Quantity: k.selectedQuantity,
                    UnitMrp: k.selectedProduct.mrp,
                    UnitSalePrice: k.selectedProduct.sp,
                    ScreenInPageContext: k.sectionModel.internalName,
                    ScreenInPagePosition: Number(k.sectionModel.display_pos)
                }]), r.pushToGoogleAnalytics("_trackEvent", "remove-from-cart", "custom-page", k.sectionModel.display_pos + " | " + k.sectionModel.pageinternalName + " | " + k.ga_section_name + " | " + k.sectionModel.internalName + " | " + k.selectedProduct.sku + " | " + k.selectedProduct.p_desc + " | " + k.itemposition, 1)) : a.error("Could not remove product ", "Remove From Basket")
            })
        }

        function _() {
            t.$broadcast("getCart", k.selectedProduct)
        }

        function v() {
            var e = Number(k.selectedQuantity) + 1;
            n.updateCartQuantity(k.selectedProduct.sku, e, k.sid).then(function(e) {
                e && (n.getCart().then(function(e) {
                    _(), k.selectedQuantity = n.getformatedcart()[k.selectedProduct.sku], k.startQuantity = k.selectedQuantity, k.selectedQuantityText = k.selectedQuantity + " in basket"
                }), $(document).trigger("basketInteractionsPlowerWithAngular", [{
                    EventName: "Basket_Increment",
                    SkuID: k.selectedProduct.sku,
                    Quantity: 1,
                    UnitMrp: k.selectedProduct.mrp,
                    UnitSalePrice: k.selectedProduct.sp,
                    ScreenInPageContext: k.sectionModel.internalName,
                    ScreenInPagePosition: Number(k.sectionModel.display_pos)
                }]), r.pushToGoogleAnalytics("_trackEvent", "incr-quantity", "custom-page", k.sectionModel.display_pos + " | " + k.sectionModel.pageinternalName + " | " + k.ga_section_name + " | " + k.sectionModel.internalName + " | " + k.selectedProduct.sku + " | " + k.selectedProduct.p_desc + " | " + k.itemposition, 1))
            })
        }

        function y(t) {
            k.startQuantity > 0 ? n.updateCartQuantity(t.sku, k.startQuantity, k.sid).then(function(o) {
                if (o.success) k.selectedQuantity = k.startQuantity, k.startQuantity = k.selectedQuantity, k.selectedQuantityText = k.startQuantity + " in basket", k.check = !0, k.selectedProduct.is_feature_selected = k.selectedQuantity, _(), $.cookie("_bb_ftvid") ? ($(".top-header").addClass("locpops"), $(".bb-brand-section").css("top", "26px"), e.$emit("FirstTimeUser"), k.cityMessage = !0) : ($(".top-header").removeClass("locpops"), $(".bb-brand-section").css("top", "0px"), k.cityMessage = !1, a.success("", "Successfully added " + t.p_desc + " " + t.w + " to the basket", {
                    timeOut: 5e3,
                    positionClass: "toast-top-full-width",
                    closeButton: !0,
                    preventDuplicates: !0,
                    preventOpenDuplicates: !0
                })), k.check = !0, $(document).trigger("basketInteractionsPlowerWithAngular", [{
                    EventName: "Basket_Add",
                    SkuID: k.selectedProduct.sku,
                    Quantity: k.selectedQuantity,
                    UnitMrp: k.selectedProduct.mrp,
                    UnitSalePrice: k.selectedProduct.sp,
                    ScreenInPageContext: k.sectionModel.internalName,
                    ScreenInPagePosition: Number(k.sectionModel.display_pos)
                }]), r.pushToGoogleAnalytics("_trackEvent", "add-to-cart", "custom-page", k.sectionModel.display_pos + " | " + k.sectionModel.pageinternalName + " | " + k.ga_section_name + " | " + k.sectionModel.internalName + " | " + k.selectedProduct.sku + " | " + k.selectedProduct.p_desc + " | " + k.itemposition, 1), r.pushToGTM("add_to_basket_onclick", k.selectedProduct.sku, k.selectedQuantity, k.selectedProduct.sp);
                else {
                    var i = n.getformatedcart();
                    i[t.sku] ? k.startQuantity = i[t.sku] : k.startQuantity = 1
                }
            }) : (a.error("Invalid Quantity", "Add To Basket", {
                timeOut: 5e3,
                positionClass: "toast-top-full-width",
                closeButton: !0,
                preventDuplicates: !0,
                preventOpenDuplicates: !0
            }), k.check = !1)
        }

        function b(o) {
            k.selectedProduct = o, k.selectedProduct.available = !1, k.selectedProduct && !k.selectedProduct.is_promo && (k.selectedProduct.available = !1, k.selectedProduct.stdDiv = T("standard", t.member_stores, k.selectedProduct.store_availability), k.selectedProduct.expDiv = T("express", t.member_stores, k.selectedProduct.store_availability), C(k.selectedProduct.stdDiv, k.selectedProduct.expDiv) && (k.selectedProduct.available = !0), null !== k.selectedProduct.stdDiv[2] && k.selectedProduct.stdDiv[3] === !0 && null !== k.selectedProduct.expDiv[2] && k.selectedProduct.expDiv[3] === !0 && (k.selectedProduct.showOneOOS = !0)), e.cartItem = n.getformatedcart(), e.cartItem && e.cartItem[k.selectedProduct.sku] ? (e.cartItem = n.getformatedcart(), S = e.cartItem[k.selectedProduct.sku]) : S = k.selectedProduct.incart ? k.selectedProduct.incart : null, i(), $(this).dropdown("toggle")
        }

        function w(e, t) {
            n.getMultiSkuComboProducts(e).then(function(e) {
                if (e) {
                    var n = e.data;
                    k.sectionModel.products = n, k.sectionModel.products.length > 1 ? k.sectionModel.comboTitle = "Combos using " + t : k.sectionModel.comboTitle = "Combo using " + t;
                    var a = k.sectionModel.products.length > 3,
                        r = k.sectionModel.products.length < 3 ? k.sectionModel.products.length : 3;
                    $("#comboModal_" + k.sectionModel.section_id).modal("show"), $("#comboModal_" + k.sectionModel.section_id + " .close").on("click", function() {
                        $(".comboCarousel").trigger("destroy.owl.carousel")
                    }), o(function() {
                        $("#comboModal_" + k.sectionModel.section_id + " .comboCarousel").trigger("owl.stop");
                        $("#comboModal_" + k.sectionModel.section_id + " .comboCarousel").owlCarousel({
                            loop: !1,
                            margin: 10,
                            nav: a,
                            navText: [" ", " "],
                            responsive: {
                                0: {
                                    items: r
                                },
                                600: {
                                    items: r
                                },
                                1e3: {
                                    items: r
                                }
                            }
                        })
                    }, 500), $(document).width() > 767 && (1 == k.sectionModel.products.length ? $("#comboModal_" + k.sectionModel.section_id + " .modal-dialog").css("width", "285px") : 2 == k.sectionModel.products.length ? $("#comboModal_" + k.sectionModel.section_id + " .modal-dialog").css("width", "520px") : $("#comboModal_" + k.sectionModel.section_id + " .modal-dialog").css("width", "730px"))
                }
            })
        }
        var k = this,
            S = null,
            C = function(e, t) {
                return e[3] === !1 && t[3] === !1 || (null === e[2] && e[3] === !0 || null === t[2] && t[3] === !0)
            };
        k.OOSCheck = function(e) {
            for (var o = 0; o < e.length; o++) {
                var n = T("standard", t.member_stores, e[o].store_availability),
                    a = T("express", t.member_stores, e[o].store_availability);
                e[o].oos = !C(n, a)
            }
        };
        var T = function(e, t, o) {
            for (var n = function(t) {
                    return t.tab_type === e && "A" === t.pstat
                }, a = function(t) {
                    return t.tab_type === e && "O" === t.pstat
                }, r = function(t) {
                    return t.tab_type === e
                }, i = null, s = null, c = R.filter(n, o), l = R.filter(a, o), d = R.filter(r, o), u = 0; u < c.length; u++)
                if (t[c[u].availability_info_id]) {
                    i = t[c[u].availability_info_id];
                    break
                }
            for (var p = 0; p < l.length; p++) {
                var g = l[p].availability_info_id.replace(".OOSM", "");
                if (t[g]) {
                    s = t[g];
                    break
                }
            }
            var m = c.length > 1;
            return [i, m, s, d.length > 0]
        };
        k.selectedProduct = e.product, e.bigSave && e.bigSave.show_discounted_price && (k.selectedProduct.discounted_prices && (k.selectedProduct.bigSaveEligible = e.bigSave.discounted_price_id_to_show in k.selectedProduct.discounted_prices, k.selectedProduct.bigSavePrice = k.selectedProduct.discounted_prices[e.bigSave.discounted_price_id_to_show]), angular.forEach(e.product.all_prods, function(t) {
            t.discounted_prices && (t.bigSaveEligible = e.bigSave.discounted_price_id_to_show in t.discounted_prices, t.bigSavePrice = t.discounted_prices[e.bigSave.discounted_price_id_to_show])
        }), k.bigSaveActiveInfo = e.bigSave.discounted_price_def[e.bigSave.discounted_price_id_to_show]), k.selectedProduct && !k.selectedProduct.is_promo && (k.selectedProduct.available = !1, k.selectedProduct.stdDiv = T("standard", t.member_stores, k.selectedProduct.store_availability), k.selectedProduct.expDiv = T("express", t.member_stores, k.selectedProduct.store_availability), C(k.selectedProduct.stdDiv, k.selectedProduct.expDiv) && (k.selectedProduct.available = !0), null !== k.selectedProduct.stdDiv[2] && k.selectedProduct.stdDiv[3] === !0 && null !== k.selectedProduct.expDiv[2] && k.selectedProduct.expDiv[3] === !0 && (k.selectedProduct.showOneOOS = !0)), !e.feature && k.selectedProduct && (k.selectedProduct.incart || k.selectedProduct.no_items_in_cart) && (S = k.selectedProduct.incart ? k.selectedProduct.incart : k.selectedProduct.no_items_in_cart ? k.selectedProduct.no_items_in_cart : null), k.itemposition = e.itmpos, k.sectionModel = e.sectionModel, k.ga_section_name = "Default" == k.sectionModel.type ? "BRPD" : "CRPD", k.sid = e.sid, k.selectedQuantity = 0, k.selectedQuantityText = "", k.startQuantity = 1, k.onProductChange = b, k.addToBasket = y, k.decreamentQuantity = h, k.increamentQuantity = v, k.broadcastEventNotify = s, k.imageUrl = u, k.showDeliveryDetails = g, k.typeOfIcon = p, k.showSlots = m, k.isPromoBlank = l, k.isFlashSaleBlank = d, k.flashIsOff = !0, k.flashMessage = "", k.setAvailablity = c, k.check = void 0 !== S, k.available = !1;
        var P = new RegExp("\\bexpress\\b");
        k.pushToGoogleAnalytics = r.pushToGoogleAnalytics, k.refreshcartQuantityforproduct = f, k.showMultiSkuComboProducts = w, i(), k.is_bb_brand = function() {
            var e = ["fresho", "bb royal", "bb popular", "fresho meat"];
            angular.forEach(e, function(e) {
                k.selectedProduct.p_brand && k.selectedProduct.p_brand.toLowerCase() === e && (k.selectedProduct.bb_brand = !0)
            }), k.selectedProduct.mp_mrp = "MRP"
        }, e.feature || k.is_bb_brand(), e.feature && t.$on("getCart", function(e, t) {
            t.is_feature_selected = t.is_feature_selected > 0
        }), e.timeConverter = function(e) {
            var t = k.selectedProduct.sale_info.end_time,
                o = 1e3 * (t - e),
                n = Math.floor(o % 864e5 / 36e5),
                a = Math.floor(o % 36e5 / 6e4),
                r = "";
            n <= 0 ? a <= 0 ? o = 0 : r = a + "Min " : r = n + "Hrs " + a + "Min ", o <= 0 ? k.flashMessage = "" : k.flashMessage = "Ends in " + r
        }, t.$on("CART_ITEM_CHANGED", function(e, t) {
            k.selectedProduct.sku === t.sku && (k.selectedQuantity = t.qty, k.startQuantity = 0 === k.selectedQuantity ? 1 : t.qty, 0 == k.selectedQuantity ? k.check = !1 : k.check = !0, k.selectedQuantityText = k.selectedQuantity + " in basket")
        }), t.$on("PAGE_DATA_LOADED", function() {
            k.selectedProduct = e.product, k.selectedProduct && !k.selectedProduct.is_promo && (k.selectedProduct.available = !1, k.selectedProduct.stdDiv = T("standard", t.member_stores, k.selectedProduct.store_availability), k.selectedProduct.expDiv = T("express", t.member_stores, k.selectedProduct.store_availability), C(k.selectedProduct.stdDiv, k.selectedProduct.expDiv) && (k.selectedProduct.available = !0), null !== k.selectedProduct.stdDiv[2] && k.selectedProduct.stdDiv[3] === !0 && null !== k.selectedProduct.expDiv[2] && k.selectedProduct.expDiv[3] === !0 ? k.selectedProduct.showOneOOS = !0 : k.selectedProduct.showOneOOS = !1)
        })
    }

    function a() {
        return {
            restrict: "E",
            scope: {
                product: "=",
                baseurl: "@",
                sid: "@",
                cartItem: "=",
                sectionModel: "=",
                itmposlinear: "@",
                bigSave: "="
            },
            templateUrl: "app/templates/innertemplates/productTemplate.html",
            controller: ["$scope", "$rootScope", "$timeout", "UserDataservice", "toastr", "CustomPageDataService", n],
            controllerAs: "vm"
        }
    }

    function r() {
        return {
            restrict: "E",
            scope: {
                product: "=",
                baseurl: "@",
                sid: "@",
                cartItem: "=",
                sectionModel: "=",
                itmpos: "@",
                bigSave: "="
            },
            templateUrl: "app/templates/innertemplates/productTemplateInContainer.html",
            controller: ["$scope", "$rootScope", "$timeout", "UserDataservice", "toastr", "CustomPageDataService", n],
            controllerAs: "vm"
        }
    }

    function i() {
        return {
            restrict: "E",
            scope: {
                product: "=",
                baseurl: "@",
                sid: "@",
                cartItem: "=",
                sectionModel: "=",
                itmpos: "@",
                bigSave: "="
            },
            templateUrl: "app/templates/innertemplates/featuredProductTemplate.html",
            controller: ["$scope", "$rootScope", "$timeout", "UserDataservice", "toastr", "CustomPageDataService", n],
            controllerAs: "vm"
        }
    }

    function s(e, t, o) {
        function n(e, t, o, n) {
            function a() {
                M.filterCount = 0, angular.forEach(M.filters, function(e, t) {
                    "tabbed" != e.type && angular.forEach(e.appliedFilters, function(e, t) {
                        M.filterCount += 1
                    })
                })
            }

            function r(e) {
                M.ignore_productdeck_call = !1, M.is_init = !1, M.selectedSort = e, M.execute = !1;
                var t = R.find(R.propEq("value", e))(M.sortOptions).display_name;
                o.pushToGoogleAnalytics("_trackEvent", M.nc_sort, "custom-page", t, 1), c(), M.currentActiveTab.currentpage = 1, location.hash = "!page=" + M.currentActiveTab.currentpage, angular.forEach(M.bootstrapTabs, function(e, t) {
                    e.currentpage = 1
                }), M.justFiltered = !0, N() ? M.endofPage = !0 : M.endofPage = !1;
                var n = {};
                n.o = M.selectedSort, n.sid = "", n.sortCriteria = t, $(document).trigger("filterInteractionsPlower", [n])
            }

            function i(e) {
                return "/pc/" + e + "/?nc=fa&sid=" + M.sid
            }

            function s(e, t, n, a) {
                var r = 1 == e.selected ? "Apply" : "Unapply";
                if (o.pushToGoogleAnalytics("_trackEvent", M.nc, "custom-page", t + "|" + e.display_name + "|" + r, 1), M.is_init = !1, M.ignore_productdeck_call = !1, M.currentActiveTab.currentpage = 1, M.justFiltered = !0, M.execute = !1, N() ? M.endofPage = !0 : M.endofPage = !1, location.hash = "!page=" + M.currentActiveTab.currentpage, angular.forEach(M.bootstrapTabs, function(e, t) {
                        e.currentpage = 1
                    }), e.selected) {
                    R.find(R.propEq("name", t))(M.filters) ? ("categories" == n && (R.find(R.propEq("name", t))(M.filters).appliedFilters = []), R.find(R.propEq("name", t))(M.filters).appliedFilters.push({
                        name: e.display_name,
                        facetFilter: e
                    })) : M.filters.push({
                        name: t,
                        type: "facet",
                        slug: n,
                        appliedFilters: [{
                            name: e.display_name,
                            facetFilter: e
                        }]
                    });
                    var i = {};
                    i.apply = !0, i.filter = "1", i.filter_type = t, i.referrerInPageContext = void 0 === a ? "" : a;
                    var s = e.display_name;
                    i.label = s.replace(/<\/?span[^>]*>/g, ""), $(document).trigger("filterInteractionsPlower", [i])
                } else if ("categories" != n) {
                    var c = R.findIndex(R.propEq("name", t))(M.filters),
                        l = R.findIndex(R.propEq("name", e.display_name))(M.filters[c].appliedFilters);
                    M.filters[c].appliedFilters.splice(l, 1), d(M.filters[c].appliedFilters, c)
                }
                M.reapplyFilters()
            }

            function c() {
                M.currentActiveTab.showmore = !1, E.sid = M.sid;
                var e = [];
                M.filters.length > 0 && angular.forEach(M.filters, function(t, o) {
                    var n = [];
                    angular.forEach(t.appliedFilters, function(e, t) {
                        n.push(e.facetFilter.filter_value_slug)
                    }), e.push({
                        filter_slug: t.slug,
                        values: n
                    })
                }), M.promos_cached = [], E.filters = e, M.is_init || M.ignore_productdeck_call || (M.ignore_productdeck_call = !1, M.sectionModel.productwidgetuserslug ? o.updateProductDeck(M.sectionModel.productsystemtype, E, M.selectedSort, M.sectionModel.productwidgetuserslug, M.currentActiveTab.tab_type, sid, M.base_sid, M.offer_sub_type).then(k) : slug && o.updateProductDeck(M.sectionModel.productsystemtype, E, M.selectedSort, slug, M.currentActiveTab.tab_type, sid, M.base_sid, M.offer_sub_type).then(k))
            }

            function l(e, t, n) {
                M.is_init = !1, M.ignore_productdeck_call = !1, o.pushToGoogleAnalytics("_trackEvent", M.nc, "custom-page", n.name + "|" + n.appliedFilters[t].facetFilter.display_name + "|Unapply", 1);
                var a = {};
                a.apply = !1, a.filter = "1", a.filter_type = n.name, a.label = n.appliedFilters[t].facetFilter.display_name, $(document).trigger("filterInteractionsPlower", [a]), "tabbed" !== n.type ? n.appliedFilters[t].facetFilter.selected = !1 : M.activeTab = 1, n.appliedFilters.splice(t, 1), d(n.appliedFilters, e), M.filters.length > 0 ? M.reapplyFilters() : M.clearAllFilters()
            }

            function d(e, t) {
                0 === e.length && M.filters.splice(t, 1)
            }

            function u() {
                M.activeTab = 1, M.currentActiveTab = M.bootstrapTabs[0], M.is_init = !1, o.pushToGoogleAnalytics("_trackEvent", M.nc, "custom-page", "Clear All", 1), g(), $(document).trigger("clearAll"), M.justFiltered = !0, N() ? M.endofPage = !0 : M.endofPage = !1, M.reapplyFilters()
            }

            function p() {
                var e = null;
                M.justFiltered = !0, M.currentActiveTab.product_info && N() ? M.endofPage = !0 : M.endofPage = !1, M.activeTab = 1, M.filters.length > 0 && angular.forEach(M.filters, function(t, o) {
                    "tabbed" == t.type && (e = o)
                }), null != e && M.filters.splice(e, 1), c()
            }

            function g() {
                var e = R.filter(I, M.filters);
                angular.forEach(e, function(e, t) {
                    angular.forEach(e.appliedFilters, function(e, t) {
                        e.facetFilter.selected = !1
                    })
                }), M.filters = []
            }

            function m(e) {
                if (M.currentActiveTab = e, e.product_info && (M.numberOfProducts = e.product_info.p_count), e.header_section && (M.header_section = e.header_section), M.ignore_productdeck_call = !1, e.customfacets ? (M.facetFilters = e.customfacets.facets, f(M.facetFilters, R.findIndex(R.propEq("filter_name", "Category"))(M.facetFilters), 0), C(e)) : e.filter_opts && (M.facetFilters = e.filter_opts, f(M.facetFilters, R.findIndex(R.propEq("filter_name", "Category"))(M.facetFilters), 0), C(e)), "all" !== e.tab_type) {
                    M.is_init = !1;
                    var t = null;
                    M.filters.length > 0 && angular.forEach(M.filters, function(e, o) {
                        "tabbed" == e.type && (t = o)
                    }), null != t && M.filters.splice(t, 1), void 0 === R.find(R.propEq("name", e.tab_name))(M.filters) && (M.filters.push({
                        name: e.tab_name,
                        type: "tabbed",
                        slug: e.tab_type,
                        appliedFilters: [{
                            name: "Yes",
                            facetFilter: M.facetFilters
                        }]
                    }), $(document).trigger("filterInteractionsPlower", {
                        filter_type: e.tab_name,
                        apply: !0
                    })), M.execute = !1, c()
                } else "all" === e.tab_type && (p(), M.is_init === !1 && $(document).trigger("filterInteractionsPlower", {
                    filter_type: e.tab_name,
                    apply: !0
                }))
            }

            function f(e, t, o) {
                if (t > 0) {
                    var n = e.splice(t, 1);
                    e.unshift(n[0])
                }
            }

            function h(e) {
                return "standard" === R.toLower(e) ? "All Products" : e
            }

            function _() {
                if (M.slug = "", slug ? M.slug = slug : M.sectionModel.productwidgetuserslug && (M.slug = M.sectionModel.productwidgetuserslug), M.sectionModel.ignoresectionupload && "1" == M.sectionModel.ignoresectionupload) {
                    if (void 0 != M.sectionModel.productwidgetuserslug && M.sectionModel.productwidgetuserslug.length > 0) var e = [b(M.sectionModel.productsystemtype, M.sectionModel.productwidgetuserslug)];
                    else if (slug) var e = [b(M.sectionModel.productsystemtype, slug)];
                    else if ("mem.sb" === M.sectionModel.productsystemtype) var e = [b(M.sectionModel.productsystemtype)]
                } else var e = [w(M.sid)];
                return M.offer_sub_type && "all-offers" != M.offer_sub_type && (M.is_offers_on_cat = !0), o.ready(e).then(function() {
                    n(function() {
                        $("#refine").click(function() {
                            $("#offcanvas-refine").animate({
                                bottom: "0"
                            }, 0), $("#left-menu-overlay").fadeIn("slow")
                        }), $("#close-refine, #apply-refine").click(function() {
                            $("#offcanvas-refine").animate({
                                bottom: "-100%"
                            }, 0), $("#left-menu-overlay").fadeOut("slow")
                        })
                    })
                })
            }

            function v() {
                "ps" == M.sectionModel.productsystemtype && (M.selectedSort = "relevance", M.sortOrder = "relevance")
            }

            function y(e) {
                e.tab_info.length > 0 && (t.sid = e.tab_info[0].sid, M.sid = e.tab_info[0].sid, M.filtered_sid = sid, O(e)), P(e), v(), M.execute = !0, $(window).scroll(function() {
                    var e = $("#idToJump" + M.currentActiveTab.tab_type)[0],
                        t = e.offsetTop,
                        o = t + e.offsetHeight - $(window).height(),
                        n = o - $(window).scrollTop();
                    M.execute && t + e.offsetHeight != 0 && n / (t + e.offsetHeight) * 100 < 1 && (M.pagginator.loaded = !0, M.execute = !1, M.pagginator.paginate(2), $("#filterbar").trigger("sticky_kit:recalc"))
                })
            }

            function b(e, t) {
                t || M.sectionModel.productwidgetuserslug.length > 0 && (t = M.sectionModel.productwidgetuserslug), o.getSysGenProductDeck(e, t, M.sectionModel.productsystemtype, M.sectionModel.alloffersubtype).then(y)
            }

            function w(e) {
                o.getProductDeck(e, null, M.offer_sub_type).then(P);
            }

            function k(e) {
                var t = x(e.tab_info);
                M.quick_filterItems = {}, O(e), angular.forEach(M.bootstrapTabs, function(o, n) {
                    var a = R.findIndex(R.propEq("tab_name", o.tab_name))(e.tab_info);
                    "Express" == o.tab_name && "all" == o.tab_type && (a = 1), o.showmore = !1, o.currentpage = 1, a < 0 ? o.product_info && (o.product_info.products = []) : (t[o.tab_type][0].customfacets ? (o.filter_opts = t[o.tab_type][0].customfacets.facets, M.filtered_sid = t[o.tab_type][0].customfacets.sid) : o.filter_opts = t[o.tab_type][0].filter_opts, o.filtered_on = t[o.tab_type][0].filtered_on, o.product_info = t[o.tab_type][0].product_info)
                });
                var o = t[M.currentActiveTab.tab_type][0];
                M.sortOptions = t[M.currentActiveTab.tab_type][0].sort_opts, M.sortOrder = t[M.currentActiveTab.tab_type][0].sorted_on, t[M.currentActiveTab.tab_type][0].customfacets ? M.facetFilters = o.customfacets.facets : M.facetFilters = o.filter_opts, f(M.facetFilters, R.findIndex(R.propEq("filter_name", "Category"))(M.facetFilters), 0), U(o, o.reverse_merge), M.numberOfProducts = o.product_info.p_count, M.screen_name = e.screen_name, M.currentActiveTab.product_info.products = o.product_info.products, "mem.sb" === M.sectionModel.productsystemtype && (M.short_list = o.product_info.short_list, M.long_list = o.product_info.long_list, M.reco_list = o.product_info.reco_list, 1 == M.currentActiveTab.show_reco_only ? (T(M.reco_list.products), M.sb_list = [M.reco_list]) : (T(M.short_list.products), T(M.long_list.products), M.sb_list = [M.short_list, M.long_list])), M.currentActiveTab.active = !0, setTimeout(function() {
                    M.execute = !0
                }, 2e3), M.getfilterCount(), C(o)
            }

            function S(e, t) {
                var o = !1;
                0 == M.filters.length && e.filtered_on.length > 0 && (o = !0, "all" !== e.tab_type && void 0 === R.find(R.propEq("name", e.tab_name))(M.filters) && M.filters.push({
                    name: e.tab_name,
                    type: "tabbed",
                    slug: e.tab_type,
                    appliedFilters: [{
                        name: "Yes",
                        facetFilter: t
                    }]
                }));
                var n = e.filtered_on;
                angular.forEach(n, function(e, n) {
                    angular.forEach(t, function(t, n) {
                        e.filter_slug === t.filter_slug && angular.forEach(e.values, function(e, n) {
                            angular.forEach(t.values, function(n, a) {
                                e === n.filter_value_slug && (n.selected = !0, 1 == o && (R.find(R.propEq("name", t.filter_name))(M.filters) ? ("categories" == t.filter_slug && (R.find(R.propEq("name", t.filter_name))(M.filters).appliedFilters = []), R.find(R.propEq("name", t.filter_name))(M.filters).appliedFilters.push({
                                    name: n.display_name,
                                    facetFilter: n
                                })) : M.filters.push({
                                    name: t.filter_name,
                                    type: "facet",
                                    slug: t.filter_slug,
                                    appliedFilters: [{
                                        name: n.display_name,
                                        facetFilter: n
                                    }]
                                })))
                            })
                        })
                    })
                }), M.getfilterCount()
            }

            function C(e) {
                var t = e.filtered_on;
                angular.forEach(t, function(e, t) {
                    angular.forEach(M.facetFilters, function(t, o) {
                        e.filter_slug === t.filter_slug && angular.forEach(e.values, function(e, o) {
                            angular.forEach(t.values, function(t, o) {
                                e === t.filter_value_slug && (t.selected = !0)
                            })
                        })
                    })
                })
            }

            function T(e) {
                for (var t = 0; t < e.length; t++) {
                    e[t].is_reco = !1, M.reco_list.id_list.indexOf(e[t].sku.toString()) == -1 && 1 != M.currentActiveTab.show_reco_only || (e[t].is_reco = !0);
                    for (var o = 0; o < e[t].all_prods.length; o++)
                        if (e[t].all_prods[o].is_reco = !1, M.reco_list.id_list.indexOf(e[t].all_prods[o].sku.toString()) != -1 || 1 == M.currentActiveTab.show_reco_only) {
                            e[t].all_prods[o].is_reco = !0;
                            break
                        }
                }
            }

            function P(e) {
                M.bootstrapTabs = [], M.cart_info = e.cart_info, M.baseImageUrl = e.base_img_url, M.screen_name = e.screen_name, void 0 != e.base_sid && (M.base_sid = e.base_sid, "all" == e.tab_to_show && (sid = e.base_sid)), M.tab_info = x(e.tab_info);
                var t = 1;
                angular.forEach(M.tab_info, function(o, n) {
                    M.currentActiveTab = o[0], M.facetFilters = o[0].customfacets.facets, U(o[0], o[0].reverse_merge), M.bootstrapTabs.push(o[0]), M.sortOptions = o[0].sort_opts, M.sortOrder = o[0].sorted_on, e.tab_to_show == o[0].tab_type && (S(o[0], M.facetFilters), M.activeTab = t, $("#deck").show());
                    var a = [];
                    if (void 0 != M.currentActiveTab.product_info) {
                        var r = M.currentActiveTab.product_info.products.length;
                        r > 10 && (r = 10);
                        for (var i = 0; i < r; i++) a.push(M.currentActiveTab.product_info.products[i].sku);
                        window.dataLayer && dataLayer.push({
                            productlist1: a
                        })
                    }
                    "mem.sb" === M.sectionModel.productsystemtype && (M.short_list = M.currentActiveTab.product_info.short_list, M.long_list = M.currentActiveTab.product_info.long_list, M.reco_list = M.currentActiveTab.product_info.reco_list, 1 == M.currentActiveTab.show_reco_only ? (T(M.reco_list.products), M.sb_list = [M.reco_list]) : (T(M.short_list.products), T(M.long_list.products), M.sb_list = [M.short_list, M.long_list])), t += 1
                }), M.bootstrapTabs = D(M.bootstrapTabs)
            }

            function A(e, t, n, a, r) {
                function i(n) {
                    "mem.sb" === M.sectionModel.productsystemtype && (M.short_list.products && (T(n.tab_info.product_map[e].short_list), M.short_list.products = R.concat(M.short_list.products, n.tab_info.product_map[e].short_list)), M.long_list.products && (T(n.tab_info.product_map[e].long_list), M.long_list.products = R.concat(M.long_list.products, n.tab_info.product_map[e].long_list)), M.reco_list.products && (T(n.tab_info.product_map[e].reco_list), M.reco_list.products = R.concat(M.reco_list.products, n.tab_info.product_map[e].reco_list))), M.tab_info[e][0].product_info.products ? M.tab_info[e][0].product_info.products = R.concat(M.tab_info[e][0].product_info.products, n.tab_info.product_map[e].prods) : M.tab_info[e][0].product_info.products = n.tab_info.product_map[e].prods, M.tab_info[e][0].promo_info ? M.tab_info[e][0].promo_info.promos = n.tab_info.product_map[e].promos : M.tab_info[e][0].promo_info = {
                        promos: n.tab_info.product_map[e].promos
                    }, o.pushToGoogleAnalytics("_trackEvent", M.nc_paginate, "custom-page", "pageview|scrolldown|page=" + t, 1), U(M.tab_info[e][0], M.tab_info[e][0].reverse_merge), M.numberOfProducts = M.tab_info[e][0].product_info.p_count, M.execute = !0;
                    var a = $("#idToJump" + M.currentActiveTab.tab_type)[0],
                        r = a.offsetTop,
                        i = r + a.offsetHeight - $(window).height(),
                        s = i - $(window).scrollTop();
                    M.execute && r + a.offsetHeight != 0 && s / (r + a.offsetHeight) * 100 < -25 && $("html, body").animate({
                        scrollTop: $("#idToJump" + e).offset().top
                    })
                }
                if (M.justFiltered = !1, M.sectionModel.productwidgetuserslug)
                    if ("mem.sb" == M.sectionModel.productsystemtype) {
                        var s = [],
                            c = [],
                            l = [];
                        M.currentActiveTab.show_reco_only ? l = M.reco_list.id_list.splice(0, 20) : (s = M.short_list.id_list.splice(0, 20), s.length < 20 && (c = M.long_list.id_list.splice(0, 20 - s.length))), o.getProductsForRestofTheTabs(M.sectionModel.productsystemtype, M.sid, e, t, a, M.selectedSort, r, M.sectionModel.productwidgetuserslug, M.offer_sub_type, s, c, l).then(i)
                    } else o.getProductsForRestofTheTabs(M.sectionModel.productsystemtype, M.sid, e, t, a, M.selectedSort, r, M.sectionModel.productwidgetuserslug, M.offer_sub_type).then(i);
                else o.getProductsForRestofTheTabs(M.sectionModel.productsystemtype, M.sid, e, t, a, M.selectedSort, r, slug, M.offer_sub_type).then(i)
            }
            var M = this,
                E = {
                    sid: "",
                    filters: []
                };
            M.outofstockproduct = "", M.sectionModel = e.sectionModel, e.Math = window.Math, M.dynamicBanners = [], M.sectionModel.banners && (M.dynamicBanners = M.sectionModel.banners), M.tab_info = {}, M.bootstrapTabs = [], M.activeTab = 1, M.screen_name = "", M.header_section = {}, M.changeNameToAllProductsIfStandard = h, M.onClickingTabHeader = m, M.removeFilter = l, M.onFacetFilterChange = s, M.clearAllFilters = u, M.buildCategoryURL = i, M.sortOn = r, M.selectedSort = "popularity", M.cart_info = {}, M.filters = [], M.facetFilters = [], M.brandSearch = "", M.baseImageUrl = "", M.numberOfProducts = 0, M.sid = M.sectionModel.viewAllUrl, t.sid = M.sectionModel.viewAllUrl, M.filtered_sid = M.sectionModel.viewAllUrl, M.USED_STATIC_URL = USED_STATIC_URL, M.currentActiveTab = {}, M.sortOrder = "popularity", M.reapplyFilters = c, M.ignore_productdeck_call = !1, M.is_init = !0, M.base_sid = "", M.getfilterCount = a, M.filterCount = 0, M.commonly_searched = e.sectionModel.commonly_searched ? e.sectionModel.commonly_searched : {}, M.suggestion_message = e.sectionModel.suggestion_message ? e.sectionModel.suggestion_message : {}, M.products_cached = [], M.promos_cached = [], M.is_offers_on_cat = !1, M.nc = "custompage" == ctype ? "cp-fa" : "ct-fa", M.offer_sub_type = M.sectionModel.alloffersubtype, M.nc_paginate = "custompage" == ctype ? "cp" : "ct", M.nc_sort = "custompage" == ctype ? "cp-sort" : "ct-sort", M.justFiltered = !0, M.endofPage = !1, M.execute = !0, "undefined" != typeof discount_data && (M.bigSave = JSON.parse(discount_data));
            var x = R.groupBy(function(e) {
                    return e.tab_type
                }),
                D = R.sortBy(R.compose(R.toLower, R.prop("tab_type"))),
                I = (R.sortBy(R.compose(R.toLower, R.prop("filter_name"))), function(e) {
                    return "facet" === e.type
                });
            M.show_products = function(e) {
                return e.product_info ? e.product_info.products : []
            };
            var U = function(e, t) {
                    var o = [],
                        n = [];
                    if (e.promo_info && e.promo_info.promos) {
                        var a = function(e) {
                                return e.sku
                            },
                            r = function(e) {
                                return e.is_promo
                            },
                            i = R.filter(a, e.product_info.products),
                            s = R.filter(r, e.product_info.products);
                        o = R.concat(s, R.concat(e.promo_info.promos, M.promos_cached)), n = R.concat(i, M.products_cached);
                        var c = L(n, o, "display_order", t);
                        M.promos_cached = c.prom, M.products_cached = c.prod, console.log("final:", c), e.product_info.products = R.concat(c["final"], M.products_cached), M.products_cached = [], e.product_info.product_page == e.product_info.tot_pages && (e.product_info.products = R.concat(e.product_info.products, M.promos_cached))
                    }
                },
                L = function(e, t, o, n) {
                    function a(e, t, o) {
                        return e[o] < t[o]
                    }

                    function r(e, t, o) {
                        return e[o] > t[o]
                    }
                    var i = 0,
                        s = 0,
                        c = [],
                        l = -1;
                    n && (l = 1);
                    var d = function(e, t) {
                        return (e[o] - t[o]) * l
                    };
                    e = R.sort(d, R.uniqBy(R.prop("sku"), e)), t = R.sort(d, R.uniqBy(R.prop("promo_id"), t));
                    var u = a;
                    for (n && (u = r); s < e.length && i < t.length;) u(e[s], t[i], o) ? (c.push(t[i]), t[i] = -1, i++) : (c.push(e[s]), e[s] = -1, s++);
                    var p = R.filter(function(e) {
                            return e != -1
                        }, t),
                        g = R.filter(function(e) {
                            return e != -1
                        }, e);
                    return c = R.concat(c, g), g = [], 0 == c.length && p.length > 0 && (c = p), {
                        "final": c,
                        prod: g,
                        prom: p
                    }
                },
                O = function(e) {
                    if (e.tab_info[0].header_section) {
                        var t = F(e.tab_info[0].header_section.items);
                        delete t.undefined, M.quick_filterItems = t
                    }
                };
            setTimeout(function() {
                $("#filterbar").stick_in_parent({
                    parent: ".sticky-parent",
                    offset_top: 60
                })
            }, 100);
            var F = R.groupBy(function(e) {
                    return e.filter_group
                }),
                N = function() {
                    var e = M.currentActiveTab.currentpage >= M.currentActiveTab.product_info.tot_pages;
                    return 1 == e ? M.endofPage = !0 : M.endofPage = !1, e
                };
            M.pagginator = {
                loaded: !1,
                loaderwidget: $("#pgloader"),
                tabcount: 0,
                showmore: function() {
                    return !!(M.currentActiveTab.product_info && M.currentActiveTab.currentpage < M.currentActiveTab.product_info.tot_pages) || M.currentActiveTab.showmore
                },
                showmorepage: function() {
                    location.hash = "!page=" + M.currentActiveTab.currentpage;
                    var e = E.filters.length > 0 ? E : null;
                    A(M.currentActiveTab.tab_type, M.currentActiveTab.currentpage, M.currentActiveTab.tab_name, e, !0), $(".pd-loader").fadeIn(), setTimeout(function() {
                        $(".pd-loader").fadeOut(), $("#filterbar").css("position", "fixed")
                    }, 1500)
                },
                paginate: function(t, o) {
                    if (M.currentActiveTab.showmore) M.currentActiveTab.product_info && N() && (M.currentActiveTab.showmore = !1);
                    else if (M.pagginator.loaded) {
                        if (M.currentActiveTab.currentpage || (M.currentActiveTab.currentpage = 1, location.hash = "!page=" + M.currentActiveTab.currentpage), M.currentActiveTab.product_info.tot_pages && N()) return M.currentActiveTab.showmore = !1, M.endofPage = !0, e.$apply(), !0;
                        if (t >= 0 && M.currentActiveTab.currentpage && M.currentActiveTab.currentpage < M.currentActiveTab.product_info.tot_pages) {
                            var n = E.filters.length > 0 ? E : null;
                            if ($(".pd-loader").fadeIn(), setTimeout(function() {
                                    $(".pd-loader").fadeOut(), $("#filterbar").css("position", "fixed")
                                }, 1500), M.currentActiveTab.currentpage ? M.currentActiveTab.currentpage = M.currentActiveTab.currentpage + 1 : M.currentActiveTab.currentpage = 2, M.currentActiveTab.currentpage < 7) {
                                var a = R.findIndex(R.propEq("tab_name", M.currentActiveTab.tab_name))(M.bootstrapTabs);
                                a && (M.bootstrapTabs[a].currentpage = M.currentActiveTab.currentpage);
                                var r = !0;
                                $(document).trigger("snowscroll", [M.currentActiveTab.currentpage - 1]), $(document).trigger("bannersOnScroll"), A(M.currentActiveTab.tab_type, M.currentActiveTab.currentpage, M.currentActiveTab.tab_name, n, r), location.hash = "!page=" + M.currentActiveTab.currentpage, e.$apply()
                            }
                        }
                    } else M.pagginator.loaded = !0
                }
            }, M.pagginator.loaderwidget.hide(), _()
        }
        return {
            restrict: "E",
            scope: {
                sectionModel: "="
            },
            controller: ["$scope", "$rootScope", "CustomPageDataService", "$timeout", n],
            controllerAs: "vm",
            templateUrl: "app/templates/innertemplates/productDeck.html"
        }
    }

    function c(e, t) {
        function o(o, n, a) {
            o.uid = _(), o.pushToGoogleAnalytics = t.pushToGoogleAnalytics, o.title = o.sectionModel.title, o.CategoryDetails = o.sectionModel.section_data.excel_data.CategoryDetails, o.BannerDetails = o.sectionModel.section_data.excel_data.BannerDetails, o.sectionId = o.sectionModel.section_id, o.pagegroupid = o.sectionModel.pagegroupid, o.viewAllUrl = o.sectionModel.viewAllUrl, o.viewAllUrlText = o.sectionModel.viewAllUrlText, o.pageid = o.sectionModel.pageid, o.MEDIA_URL = MEDIA_URL, o.CUSTOM_STATIC_URL = CUSTOM_STATIC_URL, o.status = {}, o.status.open = !1, o.useStaticImages = "" === MEDIA_URL, e(function() {
                $("#" + o.uid).owlCarousel({
                    autoplay: !0,
                    autoplayTimeout: 5e3,
                    smartSpeed: 600,
                    autoplayHoverPause: !0,
                    nav: !0,
                    navText: [" ", " "],
                    items: 1,
                    lazyLoad: !0,
                    loop: !0,
                    responsiveClass: !0,
                    responsive: {
                        0: {
                            items: 1,
                            loop: !0
                        },
                        600: {
                            items: 1,
                            loop: !0
                        },
                        1e3: {
                            items: 1,
                            loop: !0
                        }
                    }
                })
            }), o.style = {}, o.style.viewall = o.sectionModel.layout.viewAllStyle, o.style.headerStyle = o.sectionModel.pageStyle, o.style.categoryStyle = o.sectionModel.layout.style.CategoryStyle, o.style.categoryTitleStyle = o.sectionModel.layout.style.CategoryTitleStyle
        }
        return {
            restrict: "E",
            scope: {
                sectionModel: "="
            },
            templateUrl: "app/templates/innertemplates/combo.html",
            link: o
        }
    }

    function l(e) {
        function t(t, o, n) {
            t.sectionData = t.sectionModel.section_data.excel_data, t.title = t.sectionModel.title, t.uid = _(), t.pushToGoogleAnalytics = e.pushToGoogleAnalytics, t.sectionId = t.sectionModel.section_id, t.pagegroupid = t.sectionModel.pagegroupid, t.pageid = t.sectionModel.pageid, t.MEDIA_URL = MEDIA_URL, t.CUSTOM_STATIC_URL = CUSTOM_STATIC_URL, t.useStaticImages = "" === MEDIA_URL, t.style = {}, t.style.headerStyle = t.sectionModel.pageStyle, t.style.block1 = {}, t.style.block1.titleStyle = t.sectionModel.layout.style.blocks.block1.Title, t.style.block1.infoStyle = t.sectionModel.layout.style.blocks.block1.Info, t.style.block2 = {}, t.style.block2.titleStyle = t.sectionModel.layout.style.blocks.block2.Title, t.style.block2.infoStyle = t.sectionModel.layout.style.blocks.block2.Info, t.style.block3 = {}, t.style.block3.titleStyle = t.sectionModel.layout.style.blocks.block3.Title, t.style.block3.infoStyle = t.sectionModel.layout.style.blocks.block3.Info, t.style.block4 = {}, t.style.block4.titleStyle = t.sectionModel.layout.style.blocks.block4.Title, t.style.block4.infoStyle = t.sectionModel.layout.style.blocks.block4.Info, t.style.block5 = {}, t.style.block5.titleStyle = t.sectionModel.layout.style.blocks.block5.Title, t.style.block5.infoStyle = t.sectionModel.layout.style.blocks.block5.Info
        }
        return {
            restrict: "E",
            scope: {
                sectionModel: "="
            },
            templateUrl: "app/templates/innertemplates/nonLinear.html",
            link: t
        }
    }

    function d(e, t) {
        function o(o, n, a) {
            if (null == o.sectionModel.section_data) return !1;
            if ("0" == o.sectionModel.ignoresectionupload) o.sectionData = o.sectionModel.section_data.excel_data;
            else if (o.sectionData = o.sectionModel.section_data, o.sectionData && 1 == o.sectionData[0].show_random) {
                var r = Math.floor(Math.random() * o.sectionData.length),
                    i = R.splitAt(r, o.sectionData);
                o.sectionData = R.concat(i[1], i[0])
            }
            var s = function() {
                    return o.sectionData[0].show_random && 1 == o.sectionData[0].show_random ? Math.floor(Math.random() * o.sectionData.length) : 0
                },
                c = o.sectionData.length > 1;
            o.title = o.sectionModel.title, o.sectionId = o.sectionModel.section_id, o.pagegroupid = o.sectionModel.pagegroupid, o.pageid = o.sectionModel.pageid, o.MEDIA_URL = MEDIA_URL, o.CUSTOM_STATIC_URL = CUSTOM_STATIC_URL, o.useStaticImages = "" === MEDIA_URL, o.uid = _(), o.pushToGoogleAnalytics = t.pushToGoogleAnalytics, e(function() {
                $("#" + o.uid).owlCarousel({
                    autoplay: !0,
                    autoplayTimeout: 5e3,
                    smartSpeed: 600,
                    autoplayHoverPause: !0,
                    nav: !0,
                    navText: [" ", " "],
                    items: 1,
                    lazyLoad: !0,
                    mouseDrag: c,
                    touchDrag: c,
                    freeDrag: c,
                    pullDrag: c,
                    loop: c,
                    responsiveClass: !0,
                    responsive: {
                        0: {
                            items: 1,
                            loop: !0
                        },
                        600: {
                            items: 1,
                            loop: !0
                        },
                        1e3: {
                            items: 1,
                            loop: !0
                        }
                    },
                    startPosition: s()
                })
            }), o.style = {}, o.style.BannerText = o.sectionModel.layout.style.BannerText, o.style.headerStyle = o.sectionModel.pageStyle
        }
        return {
            restrict: "E",
            scope: {
                sectionModel: "="
            },
            templateUrl: "app/templates/innertemplates/banners.html",
            link: o
        }
    }

    function u(e, t) {
        function o(o, n, a) {
            if (null == o.sectionModel.section_data) return !1;
            if ("0" == o.sectionModel.ignoresectionupload) o.sectionData = o.sectionModel.section_data.excel_data;
            else if (o.sectionData = o.sectionModel.section_data, o.sectionData && 1 == o.sectionData[0].show_random) {
                var r = Math.floor(Math.random() * o.sectionData.length),
                    i = R.splitAt(r, o.sectionData);
                o.sectionData = R.concat(i[1], i[0])
            }
            o.sectionData.length > 1;
            o.title = o.sectionModel.title, o.sectionId = o.sectionModel.section_id, o.pagegroupid = o.sectionModel.pagegroupid, o.pageid = o.sectionModel.pageid, o.MEDIA_URL = MEDIA_URL, o.CUSTOM_STATIC_URL = CUSTOM_STATIC_URL, o.useStaticImages = "" === MEDIA_URL, o.uid = _(), o.pushToGoogleAnalytics = t.pushToGoogleAnalytics, e(function() {
                var e = $(".fullWidth.outer-div .owl-carousel").owlCarousel({
                    items: 1,
                    loop: !0,
                    center: !0,
                    navigation: !1,
                    autoplayHoverPause: !0,
                    autoplay: !0,
                    autoplayTimeout: 6e3,
                    responsiveClass: !0,
                    responsive: {
                        991: {
                            dotsContainer: "#carousel-custom-dots",
                            dots: !0
                        },
                        0: {
                            dots: !0,
                            pagination: !1,
                            navigation: !0
                        }
                    }
                });
                $("#carousel-custom-dots .owl-dot").click(function() {
                    e.trigger("to.owl.carousel", [$(this).find("a").attr("id")])
                })
            }), o.style = {}, o.style.BannerText = o.sectionModel.layout.style.BannerText, o.style.headerStyle = o.sectionModel.pageStyle
        }
        return {
            restrict: "E",
            scope: {
                sectionModel: "="
            },
            templateUrl: "app/templates/innertemplates/bannerCaption.html",
            link: o
        }
    }

    function p(e, t) {
        function o(o, n, a) {
            o.sectionData = o.sectionModel.section_data.excel_data, o.uid = _(), o.pushToGoogleAnalytics = t.pushToGoogleAnalytics, o.sectionId = o.sectionModel.section_id, o.pagegroupid = o.sectionModel.pagegroupid, o.pageid = o.sectionModel.pageid, o.viewAllUrl = o.sectionModel.viewAllUrl, o.viewAllUrlText = o.sectionModel.viewAllUrlText, o.MEDIA_URL = MEDIA_URL, o.CUSTOM_STATIC_URL = CUSTOM_STATIC_URL, o.useStaticImages = "" === MEDIA_URL, o.title = o.sectionModel.title, "Carousel" == o.sectionModel.type && e(function() {
                $("#" + o.uid).owlCarousel({
                    autoplay: !0,
                    autoplayTimeout: 9e3,
                    autoplayHoverPause: !0,
                    nav: !0,
                    navText: [" ", " "],
                    items: 4,
                    slideBy: 4,
                    loop: !0,
                    responsiveClass: !0,
                    responsive: {
                        0: {
                            items: 1,
                            slideBy: 1,
                            loop: !0
                        },
                        480: {
                            items: 2,
                            slideBy: 2,
                            loop: !0
                        },
                        600: {
                            items: 3,
                            slideBy: 3,
                            loop: !0
                        },
                        1e3: {
                            items: 4,
                            slideBy: 4,
                            loop: !0
                        }
                    }
                })
            }), o.style = {}, o.style.Title = y(o.sectionModel.layout.style.TitleStyle), o.style.CategoryStyle = y(o.sectionModel.layout.style.CategoryStyle), o.style.DiscountinfoStyle = o.sectionModel.layout.style.DiscountinfoStyle, o.style.viewall = o.sectionModel.layout.viewAllStyle, o.style.sectionViewAll = o.sectionModel.layout.style.SectionViewAllRenderingInfo, o.style.headerStyle = o.sectionModel.pageStyle
        }
        return {
            restrict: "E",
            scope: {
                sectionModel: "="
            },
            templateUrl: "app/templates/innertemplates/imageInfoViewAll.html",
            link: o
        }
    }

    function g(e, t) {
        function o(o, n, a) {
            if ("0" == o.sectionModel.ignoresectionupload || void 0 == o.sectionModel.ignoresectionupload) o.sectionData = o.sectionModel.section_data.excel_data;
            else if (o.sectionData = o.sectionModel.section_data, o.sectionData && 1 == o.sectionData[0].show_random) {
                var r = Math.floor(Math.random() * o.sectionData.length),
                    i = R.splitAt(r, o.sectionData);
                o.sectionData = R.concat(i[1], i[0])
            }
            o.viewAllUrl = o.sectionModel.viewAllUrl, o.viewAllUrlText = o.sectionModel.viewAllUrlText, o.sectionId = o.sectionModel.section_id, o.pagegroupid = o.sectionModel.pagegroupid, o.pushToGoogleAnalytics = t.pushToGoogleAnalytics, o.pageid = o.sectionModel.pageid, o.MEDIA_URL = MEDIA_URL, o.CUSTOM_STATIC_URL = CUSTOM_STATIC_URL, o.useStaticImages = "" === MEDIA_URL, o.uid = _(), o.title = o.sectionModel.title, "Carousel" == o.sectionModel.type && e(function() {
                $("#" + o.uid).owlCarousel({
                    autoplay: !0,
                    autoplayTimeout: 5e3,
                    autoplayHoverPause: !0,
                    nav: !0,
                    navText: [" ", " "],
                    items: 4,
                    slideBy: 4,
                    loop: !0,
                    responsiveClass: !0,
                    responsive: {
                        0: {
                            items: 2,
                            slideBy: 2,
                            loop: !0
                        },
                        600: {
                            items: 3,
                            slideBy: 3,
                            loop: !0
                        },
                        1e3: {
                            items: 4,
                            slideBy: 4,
                            loop: !0
                        }
                    }
                })
            }), o.style = {}, o.style.viewall = o.sectionModel.layout.viewAllStyle, o.style.Title = y(o.sectionModel.layout.style.Title), o.style.headerStyle = o.sectionModel.pageStyle
        }
        return {
            restrict: "E",
            scope: {
                sectionModel: "="
            },
            templateUrl: "app/templates/innertemplates/carouselWithTitle.html",
            link: o
        }
    }

    function m(e, t) {
        function o(o, n, a) {
            if ("0" == o.sectionModel.ignoresectionupload || void 0 == o.sectionModel.ignoresectionupload) o.sectionData = o.sectionModel.section_data.excel_data;
            else if (o.sectionData = o.sectionModel.section_data, o.sectionData && 1 == o.sectionData[0].show_random) {
                var r = Math.floor(Math.random() * o.sectionData.length),
                    i = R.splitAt(r, o.sectionData);
                o.sectionData = R.concat(i[1], i[0])
            }
            o.sectionId = o.sectionModel.section_id, o.pagegroupid = o.sectionModel.pagegroupid, o.pageid = o.sectionModel.pageid, o.viewAllUrl = o.sectionModel.viewAllUrl, o.viewAllUrlText = o.sectionModel.viewAllUrlText, o.pushToGoogleAnalytics = t.pushToGoogleAnalytics, o.MEDIA_URL = MEDIA_URL, o.CUSTOM_STATIC_URL = CUSTOM_STATIC_URL, o.useStaticImages = "" === MEDIA_URL, o.uid = _(), o.title = o.sectionModel.title, "Carousel" == o.sectionModel.type && e(function() {
                $("#" + o.uid).owlCarousel({
                    autoplay: !0,
                    autoplayHoverPause: !0,
                    nav: !0,
                    navText: [" ", " "],
                    items: 4,
                    slideBy: 4,
                    lazyLoad: !0,
                    loop: !0,
                    responsiveClass: !0,
                    responsive: {
                        0: {
                            items: 2,
                            slideBy: 2,
                            loop: !0
                        },
                        600: {
                            items: 3,
                            slideBy: 3,
                            loop: !0
                        },
                        1e3: {
                            items: 4,
                            slideBy: 4,
                            loop: !0
                        }
                    }
                })
            }), o.style = {}, o.style.viewall = o.sectionModel.layout.viewAllStyle, o.style.headerStyle = o.sectionModel.pageStyle
        }
        return {
            restrict: "E",
            scope: {
                sectionModel: "="
            },
            templateUrl: "app/templates/innertemplates/carouselOnlyImage.html",
            link: o
        }
    }

    function f(e, t, o, n) {
        function a(t, a, r) {
            t.sectionModel.section_data && t.sectionModel.section_data.excel_data && (t.sectionData = t.sectionModel.section_data.excel_data);
            t.cartitems = n.getformatedcart(), t.sectionId = t.sectionModel.section_id, t.pagegroupid = t.sectionModel.pagegroupid, t.pageid = t.sectionModel.pageid, t.viewAllUrl = t.sectionModel.viewAllUrl, t.viewAllUrlText = t.sectionModel.viewAllUrlText, t.pushToGoogleAnalytics = o.pushToGoogleAnalytics, t.MEDIA_URL = MEDIA_URL, t.base_img_url = "", t.CUSTOM_STATIC_URL = CUSTOM_STATIC_URL, t.useStaticImages = "" === MEDIA_URL, t.uid = _(), t.title = t.sectionModel.title, "undefined" != typeof discount_data && (t.bigSave = JSON.parse(discount_data)), t.sectionModel.productsystemtype ? o.getProductsBySlug(t.sectionModel.productsystemtype, t.sectionModel.productwidgetuserslug, ctype, slug, tlc, t.sectionModel.alloffersubtype).then(function(o) {
                var n = [];
                angular.forEach(o, function(e) {
                    n.push({
                        product: e
                    })
                }), t.sectionData = n, "Carousel" == t.sectionModel.type && (t = b(t, e, {
                    loop: !1,
                    lazy: !1,
                    items: 8,
                    slideBy: 8
                }))
            }) : o.getProductbyId(R.map(function(e) {
                return e.PDID
            }, t.sectionData)).then(function(o) {
                var n = [];
                angular.forEach(o, function(e, a) {
                    var r = R.findIndex(R.propEq("PDID", String(e.sku)))(t.sectionData);
                    r != -1 && (t.sectionData[r].product = o[a], n.push(t.sectionData[r]))
                }), t.sectionData = n, "Carousel" == t.sectionModel.type && (t = b(t, e, {
                    loop: !1,
                    lazy: !1,
                    items: 8,
                    slideBy: 8
                }))
            }), t.style = {}, t.style.viewall = t.sectionModel.layout.viewAllStyle, t.style.headerStyle = t.sectionModel.pageStyle
        }
        return {
            restrict: "E",
            scope: {
                sectionModel: "="
            },
            templateUrl: "app/templates/innertemplates/productwidgetmini.html",
            link: a
        }
    }

    function h(e, t, o) {
        function n(n, a, r) {
            n.sectionModel.section_data && n.sectionModel.section_data.excel_data && (n.sectionData = n.sectionModel.section_data.excel_data), n.cartitems = o.getformatedcart(), n.sectionId = n.sectionModel.section_id, n.pagegroupid = n.sectionModel.pagegroupid, n.pageid = n.sectionModel.pageid, n.viewAllUrl = n.sectionModel.viewAllUrl, n.viewAllUrlText = n.sectionModel.viewAllUrlText, n.pushToGoogleAnalytics = t.pushToGoogleAnalytics, n.MEDIA_URL = MEDIA_URL, n.base_img_url = "", n.CUSTOM_STATIC_URL = CUSTOM_STATIC_URL, n.useStaticImages = "" === MEDIA_URL, n.uid = _(), n.title = n.sectionModel.title, "undefined" != typeof discount_data && (n.bigSave = JSON.parse(discount_data)), n.sectionModel.productsystemtype ? t.getProductsBySlug(n.sectionModel.productsystemtype, n.sectionModel.productwidgetuserslug, ctype, slug, tlc, n.sectionModel.alloffersubtype).then(function(t) {
                var o = [];
                angular.forEach(t, function(e) {
                    o.push({
                        product: e
                    })
                }), n.sectionData = o, "Carousel" == n.sectionModel.type && (n = b(n, e, {
                    loop: !1,
                    lazy: !1
                }))
            }) : t.getProductbyId(R.map(function(e) {
                return e.PDID
            }, n.sectionData)).then(function(t) {
                var o = [];
                angular.forEach(t, function(e, a) {
                    var r = R.findIndex(R.propEq("PDID", String(e.sku)))(n.sectionData);
                    r != -1 && (n.sectionData[r].product = t[a], o.push(n.sectionData[r]))
                }), n.sectionData = o, "Carousel" == n.sectionModel.type && (n = b(n, e, {
                    loop: !1,
                    lazy: !1
                }))
            }), n.style = {}, n.style.viewall = n.sectionModel.layout.viewAllStyle, n.style.headerStyle = n.sectionModel.pageStyle
        }
        return {
            restrict: "E",
            scope: {
                sectionModel: "="
            },
            templateUrl: "app/templates/innertemplates/carouselproductwidgetlayout.html",
            link: n
        }
    }

    function _() {
        var e = (new Date).getTime();
        window.performance && "function" == typeof window.performance.now && (e += performance.now());
        var t = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t) {
            var o = (e + 16 * Math.random()) % 16 | 0;
            return e = Math.floor(e / 16), ("x" == t ? o : 3 & o | 8).toString(16)
        });
        return t
    }

    function v(e) {
        function t(e) {
            return "-" + e.toLowerCase()
        }
        return e.replace(/[A-Z]/g, t)
    }

    function y(e) {
        var t = {};
        return angular.forEach(e, function(e, o) {
            t[v(o)] = e
        }), t
    }

    function b(e, t, o) {
        return t(o.items && o.slideBy ? function() {
            $("#" + e.uid).owlCarousel({
                autoplay: !1,
                autoplayHoverPause: !1,
                nav: !0,
                navText: [" ", " "],
                items: 6,
                slideBy: 6,
                lazyLoad: !1,
                loop: o.loop,
                responsiveClass: !0,
                responsive: {
                    0: {
                        items: 2,
                        slideBy: 2,
                        loop: o.loop
                    },
                    520: {
                        items: 2,
                        margin: 10,
                        slideBy: 2,
                        loop: o.loop
                    },
                    768: {
                        items: 3,
                        margin: 10,
                        slideBy: 3,
                        loop: o.loop
                    },
                    991: {
                        items: 4,
                        slideBy: 4,
                        margin: 10,
                        mouseDrag: !1,
                        loop: o.loop
                    },
                    1025: {
                        items: 6,
                        slideBy: 6,
                        margin: 10,
                        mouseDrag: !1,
                        loop: o.loop
                    }
                }
            })
        } : function() {
            $("#" + e.uid).owlCarousel({
                autoplay: !1,
                autoplayHoverPause: !1,
                nav: !0,
                navText: [" ", " "],
                items: 5,
                slideBy: 5,
                lazyLoad: !1,
                loop: o.loop,
                responsiveClass: !0,
                responsive: {
                    0: {
                        items: 1,
                        loop: o.loop
                    },
                    520: {
                        items: 2,
                        margin: 10,
                        slideBy: 2,
                        loop: o.loop
                    },
                    768: {
                        items: 3,
                        margin: 10,
                        slideBy: 3,
                        loop: o.loop
                    },
                    991: {
                        items: 4,
                        slideBy: 4,
                        margin: 10,
                        mouseDrag: !1,
                        loop: o.loop
                    },
                    1025: {
                        items: 5,
                        slideBy: 5,
                        margin: 10,
                        mouseDrag: !1,
                        loop: o.loop
                    }
                }
            })
        }), e
    }
    t.$inject = ["$compile"], angular.module("app.customPage").directive("carouselWithTitle", g).directive("carouselOnlyImage", m).directive("imageInfoViewAll", p).directive("banners", d).directive("bannerCaption", u).directive("nonLinear", l).directive("combo", c).directive("productDeck", s).directive("productTemplate", a).directive("information", t).directive("saving", o).directive("productWidgetMini", f).directive("productTemplateInContainer", r).directive("carouselProductWidget", h).directive("featuredProductTemplate", i).directive("fallbackSrc", e), o.$inject = ["CustomPageDataService"], a.$inject = ["$timeout"], s.$inject = ["CustomPageDataService", "$compile", "$timeout"], c.$inject = ["$timeout", "CustomPageDataService"], l.$inject = ["CustomPageDataService"], d.$inject = ["$timeout", "CustomPageDataService"], u.$inject = ["$timeout", "CustomPageDataService"], p.$inject = ["$timeout", "CustomPageDataService"], g.$inject = ["$timeout", "CustomPageDataService"], m.$inject = ["$timeout", "CustomPageDataService"], f.$inject = ["$timeout", "$rootScope", "CustomPageDataService", "UserDataservice"], h.$inject = ["$timeout", "CustomPageDataService", "UserDataservice"]
}(),
function() {
    "use strict";

    function e(e, n, a) {
        function r(t) {
            function o(e) {}
            e.post("/log/prodavialbility/", {
                toBeLoggedData: t
            }).then(o)
        }

        function i(t, o, n, a, r, i) {
            function s(e) {
                return e.data.products
            }
            var c = "/custompage/pd/?type=" + t + "&ctype=" + n;
            return o && (c = c + "&slug=" + o), r && (c = c + "&d_slug=" + a + "&tlc=" + r), a && (c = c + "&d_slug=" + a), i && (c = c + "&offer_type=" + i), e.get(c).then(s)
        }

        function s(t, o, a, r) {
            function i(e, t, o, n) {
                return "sis" == a ? e.data : e.data
            }
            var s = "/custompage/sysgenpd/?type=" + t + "&slug=" + o;
            if (sid) var s = s + "&sid=" + sid;
            return r && (s = s + "&offer_sub_type=" + r), "ps" == t ? n.when(!0).then(function() {
                return w
            }) : e.get(s).then(i)
        }

        function c(t) {
            function o(e) {
                return e.data.products
            }
            return e({
                method: "GET",
                url: "/custompage/pd/",
                params: {
                    "id[]": t
                }
            }).then(o)
        }

        function l() {
            function t(e, t, o, n) {
                return e.data
            }
            var o = null;
            if ("true" === ADMIN_REQUEST && "true" === LIVE_PREVIEW) {
                var n = window.location.search.match(/(city=)(.*)/);
                n && 3 === n.length && (o = "/admin/custompage/draftpreview?url=" + customPageURL + "&ar=true&city=" + n[2] + "&isB2B=" + ISB2B)
            } else if ("true" === ADMIN_REQUEST) {
                var n = window.location.search.match(/(city=)(.*)/);
                n && 3 === n.length && (o = "/admin/custompage/display?url=" + customPageURL + "&ar=true&city=" + n[2] + "&isB2B=" + ISB2B)
            } else o = "custompage" == ctype ? "/" + ctype + "/display?url=" + customPageURL + "&cai=" + a.CURRENT_ADDRESS_ID + "&isB2B=" + ISB2B : "True" == ADMIN_REQUEST ? "/" + ctype + "/display?url=" + customPageURL + "&pageid=" + PAGEID + "&slug=" + slug + "&cityid=" + CITYID + "&ar=1&isB2B=" + ISB2B : "/" + ctype + "/display?url=" + customPageURL + "&slug=" + slug + "&cai=" + a.CURRENT_ADDRESS_ID + "&isB2B=" + ISB2B;
            return e.get(o).then(t)
        }

        function d(t, o) {
            function n(e, t, o, n) {
                if (e.data) return w = e.data.json_data, e.data
            }
            var a = null;
            return a = "/custompage/getsearchdata/?slug=" + t + "&type=" + o, e.get(a).then(n)
        }

        function u(t, o, n) {
            function a(e, t, o, n) {
                return e.data
            }
            var r = "/product/get-products/?=" + t;
            return o && (r = r + "&sorted_on=" + o), n && (r = r + "&offer_sub_type=" + n), e.get(r).then(a)
        }

        function p(t, o, n, a, r, i, s, c, l, d, u, p) {
            function g(e, t, o, n) {
                return e.data
            }
            var m = "";
            return m = r && void 0 == s ? t ? "/product/get-products/?slug=" + c + "&filters=" + JSON.stringify(r.filters) + "&sorted_on=" + i + "&listtype=" + t : "/product/get-products/?sid=" + r.sid + "&filters=" + JSON.stringify(r.filters) + "&sorted_on=" + i : t ? null != r && void 0 != r ? "/product/get-products/?slug=" + c + "&page=" + a + '&tab_type=["' + n + '"]&filters=' + JSON.stringify(r.filters) + "&sorted_on=" + i + "&listtype=" + t : "/product/get-products/?slug=" + c + "&page=" + a + '&tab_type=["' + n + '"]&sorted_on=' + i + "&listtype=" + t : null != r && void 0 != r ? "/product/get-products/?sid=" + o + "&page=" + a + '&tab_type=["' + n + '"]&filters=' + JSON.stringify(r.filters) + "&sorted_on=" + i : "/product/get-products/?sid=" + o + "&page=" + a + '&tab_type=["' + n + '"]&sorted_on=' + i, l && (m = m + "&offer_sub_type=" + l), "mem.sb" == t && (d.length && (m = m + "&sList=" + d), u.length && (m = m + "&lList=" + u), p.length && (m = m + "&rList=" + p)), e.get(m).then(g)
        }

        function g(t, o, n, a, r, i, s, c) {
            function l(e, o, n, a) {
                return sid != s && (sid = s), $("html, body").animate({
                    scrollTop: $(".custom-component.product-deck").offset().top - 50
                }, 2e3), "sis" == t ? ($(".pd-overlay").fadeOut(), e.data) : ($(".pd-overlay").fadeOut(), e.data)
            }
            $(".pd-overlay").fadeIn();
            var d = null;
            if (d = t ? "/product/get-products/?sid=" + i + "&listtype=" + t + "&filters=" + JSON.stringify(o.filters) + "&sorted_on=" + n + "&slug=" + a + '&tab_type=["' + r + '"]' : "/product/get-products/?sid=" + o.sid + "&filters=" + JSON.stringify(o.filters) + "&sorted_on=" + n, c && (d = d + "&offer_sub_type=" + c), d) return e.get(d).then(l)
        }

        function m() {
            function e() {
                b = !0
            }
            return y ? y : y = n.when(!0).then(e)
        }

        function f(e) {
            var t = y || m();
            return t.then(function() {
                return n.all(e)
            })["catch"](function(e) {})
        }

        function h(e, t, o, n, a) {
            $(document).trigger("screenViewReferralsEvent", [{}]), "custompage" == ctype ? o = "cp | " + window.location.pathname : "customtemplates" == ctype && (o = "cptp | " + window.location.pathname), void 0 != window.ga && k.push([e, t, o, n, a])
        }

        function _(e, t, o, n) {
            dataLayer.push({
                event: "add_to_basket_onclick",
                product_id: t,
                price: n,
                quantity: o
            })
        }

        function v(e) {
            return n.all(e).then(function(e) {
                return !0
            })
        }
        var y, b = !1,
            w = {},
            k = {
                push: function(e) {
                    var t = e[0];
                    if ("_trackEvent" === t) {
                        var o = e[1],
                            n = e[2],
                            a = e[3],
                            r = e[4];
                        r ? ga("send", "event", o, n, a, r, {
                            nonInteraction: 1
                        }) : ga("send", "event", o, n, a, {
                            nonInteraction: 1
                        })
                    }
                    "_addTrans" === t && (ga("ecommerce:addTransaction", {
                        id: e[1],
                        affiliation: "BigBasket.com",
                        revenue: e[3],
                        shipping: e[5],
                        tax: e[4]
                    }), ga("ecommerce:send")), "_addItem" === t && (ga("ecommerce:addItem", {
                        id: e[1],
                        name: e[3],
                        sku: e[2],
                        category: e[4],
                        price: e[5],
                        quantity: e[6]
                    }), ga("ecommerce:send"))
                }
            },
            S = {
                getCustomPage: l,
                getProductDeck: u,
                ready: f,
                updateProductDeck: g,
                getProductsForRestofTheTabs: p,
                pushToGoogleAnalytics: h,
                pushToGTM: _,
                getProductbyId: c,
                getRequestQueue: v,
                getProductsBySlug: i,
                getSysGenProductDeck: s,
                getSearchPageData: d,
                updateNewAtBBList: t,
                updateSuggestionList: o,
                logProductAvailablity: r
            };
        return S
    }

    function t(e, t) {
        return e.forEach(function(e) {
            if (e.section_data.excel_data = [], "now_at_bigbasket" == e.internalName && 1 == t.show_now_at_bb) {
                if (void 0 != t.now_at_bb.product_list)
                    for (var o = 0; o < t.now_at_bb.product_list.length; o++) e.section_data.excel_data.push({
                        PDID: t.now_at_bb.product_list[o].toString()
                    })
            } else if ("new_at_bigbasket" == e.internalName && 1 == t.show_new_at_bb && void 0 != t.new_at_bb.product_list)
                for (var o = 0; o < t.now_at_bb.product_list.length; o++) e.section_data.excel_data.push({
                    PDID: t.new_at_bb.product_list[o].toString()
                })
        }), e
    }

    function o(e, t) {
        var o = -1,
            n = !1;
        return e.forEach(function(e, a) {
                void 0 != t[a] ? (e.productsystemtype = t[a].slug_type, e.productwidgetuserslug = t[a].slug_value, e.viewAllUrl = t[a].view_all_url, e.title = t[a].title) : 0 == n && (o = a, n = !0)
            }), o > -1 && e.splice(o, 5),
            e
    }
    angular.module("app.customPage").service("CustomPageDataService", e), e.$inject = ["$http", "$q", "$window"]
}(),
function() {
    "use strict";

    function e(e, t, o) {
        o(function() {
            var t = (new Date).getTime() / 1e3;
            e.$emit("TimeCheck", {
                data: t
            })
        }, 5e3, 0, !0)
    }
    angular.module("app.customPage").controller("TimeCalculator", e), e.$inject = ["$scope", "$rootScope", "$interval"]
}(), angular.module("app.layout").component("login", {
        templateUrl: "app/templates/innertemplates/login.html",
        bindings: {},
        controller: ["$scope", "$http", "$window", "loginAndSignupService", "$timeout", function(e, t, o, n, a) {
            var r = this,
                i = e.$parent,
                s = angular.element(document.querySelector(".signup-modal"));
            r.showForgotPasswordForm = !1, r.showLoginForm = !0, r.showLoginWithOTPForm = !1, r.togglePasswordDisplay = function(e) {
                e.showHidePassword = "view" == e.showHidePassword ? "hide" : "view", e.passwordDisplayType = "password" == e.passwordDisplayType ? "text" : "password"
            }, r.back = function() {
                r.showForgotPasswordForm = !1, r.showLoginForm = !0, r.showLoginWithOTPForm = !1, i.showNavTabs = !0
            }, r.login = {}, r.login.emailID = "", r.login.password = "", r.login.passwordDisplayType = "password", r.login.showHidePassword = "view", r.login.loginErrorMessage = "", r.login.showEmailError = !1, r.login.submit = function(e) {
                if (e) {
                    r.login.emailError = "";
                    var t = {
                        username: r.login.emailID,
                        password: r.login.password,
                        Submit: "LOG IN",
                        next: "/"
                    };
                    l(), n.submitForm(t, "/auth/login/", i).then(function(e) {
                        e.data.success ? (i.redirect(), i.close()) : (r.login.emailError = e.data.error, r.loginForm.$setPristine(), r.loginForm.$setUntouched(), u())
                    })
                } else u()
            }, r.loginInteraction = function(e) {
                data = e.currentTarget.getAttribute("data-logininteraction"), $(document).trigger("loginInteractions", [data])
            }, r.forgotPasswordLinkCLicked = function(e, t) {
                if (t) {
                    r.loginInteraction(e), r.login.emailError = "";
                    var o = {
                        email_id: r.login.emailID
                    };
                    l(), n.submitForm(o, "/auth/member_check/", i).then(function(e) {
                        if (e.data.success) {
                            c();
                            var t = o;
                            n.getRequest("/auth/reset-password", t, i).then(function(e) {
                                0 === e.data.success && (r.otpResendMessage = "OTP has been sent successfully", a(function() {
                                    r.otpResendMessage = ""
                                }, 3e3))
                            })
                        } else r.login.membershipError = e.data.error, r.loginForm.$setPristine(), r.loginForm.$setUntouched(), u()
                    })
                } else r.login.showEmailError = !0, u()
            }, r.forgotPassword = {};
            var c = function() {
                r.showForgotPasswordForm = !0, r.showLoginForm = !1, i.showNavTabs = !1, r.forgotPassword.OTP = "", r.forgotPassword.newPassword = "", r.forgotPassword.confirmPassword = "", r.forgotPassword.passwordDisplayType = "password", r.forgotPassword.showHidePassword = "view", r.forgotPassword.isPasswordValid = !1, r.forgotPassword.passwordMatch = !1, r.forgotPassword.otpError = "", a(function() {
                    r.forgotPasswordForm.$setUntouched(), r.forgotPasswordForm.$setPristine(), document.querySelector("#otp").focus()
                }, 0)
            };
            r.forgotPassword.checkPassword = function(e) {
                r.forgotPassword.isPasswordValid = e > 0
            };
            var l = function() {
                r.forgotPassword.successMessage = "", r.login.emailError = "", r.forgotPassword.otpError = "", r.login.membershipError = "", r.loginWithOTP.otpError = ""
            };
            r.forgotPassword.validatePassword = function(e) {
                r.forgotPassword.newPassword == r.forgotPassword.confirmPassword ? r.forgotPassword.passwordMatch = !0 : r.forgotPassword.passwordMatch = !1
            }, r.resendOTP = function() {
                var e = {
                    email: r.login.emailID
                };
                l(), n.submitForm(e, "/auth/resend-otp/", i).then(function(e) {
                    r.otpResendMessage = "OTP has been sent successfully", r.forgotPassword.OTP = "", r.forgotPasswordForm.otp.$setUntouched(), r.forgotPasswordForm.$setPristine(), document.querySelector("#otp").focus(), a(function() {
                        r.otpResendMessage = ""
                    }, 3e3)
                })
            }, r.forgotPassword.submit = function(e, t) {
                if (t && r.forgotPassword.passwordMatch && r.forgotPassword.isPasswordValid) {
                    var o = {
                        otp: r.forgotPassword.OTP,
                        newpwd: r.forgotPassword.newPassword,
                        secpwd: r.forgotPassword.confirmPassword,
                        emailid: r.login.emailID
                    };
                    r.loginInteraction(e), l(), n.submitForm(o, "/auth/reset-password/", i).then(function(e) {
                        0 !== e.data.success ? (r.forgotPassword.otpError = e.data.message, r.forgotPasswordForm.$setUntouched(), r.forgotPasswordForm.$setPristine(), u()) : (i.redirect(), i.close())
                    })
                } else u()
            }, r.socialLogin = function(e) {
                "fb" == e && n.fb_login("login"), "gplus" == e && n.gplus_login("login")
            }, r.loginWithOTPLinkClicked = function(e, t) {
                if (t) {
                    r.loginInteraction(e), r.login.emailError = "";
                    var o = {
                        email_id: r.login.emailID
                    };
                    l(), n.submitForm(o, "/auth/member_check/", i).then(function(e) {
                        e.data.success ? d() : (r.login.membershipError = e.data.error, r.loginForm.$setPristine(), r.loginForm.$setUntouched(), u())
                    })
                } else r.login.showEmailError = !0, u()
            }, r.loginWithOTP = {};
            var d = function() {
                r.loginWithOTP.sendOTP = function() {
                    l();
                    var e = {
                        email: r.login.emailID
                    };
                    n.getRequest("/auth/login/otp/", e, i).then(function(e) {
                        0 === e.data.success && (r.loginWithOTP.OTP = "", r.loginWithOTPForm.$setUntouched(), r.loginWithOTPForm.$setPristine(), document.querySelector("#otp").focus(), r.otpResendMessage = "OTP has been sent successfully", a(function() {
                            r.otpResendMessage = ""
                        }, 3e3))
                    })
                }, r.showLoginWithOTPForm = !0, r.showLoginForm = !1, r.loginWithOTP.OTP = "", r.loginWithOTP.otpError = "", i.showNavTabs = !1, a(function() {
                    r.loginWithOTPForm.$setUntouched(), r.loginWithOTPForm.$setPristine(), r.loginWithOTP.sendOTP()
                }, 0)
            };
            r.loginWithOTP.submit = function(e) {
                if (e) {
                    var t = {
                        otp: r.loginWithOTP.OTP,
                        email: r.login.emailID
                    };
                    l(), r.loginWithOTP.otpError = "", n.submitForm(t, "/auth/login/otp/", i).then(function(e) {
                        e.data.success ? (i.redirect(), i.close()) : (r.loginWithOTP.otpError = e.data.message, r.loginWithOTPForm.$setUntouched(), r.loginWithOTPForm.$setPristine(), u())
                    })
                } else u()
            };
            var u = function() {
                s.addClass("shake"), a(function() {
                    s.removeClass("shake")
                }, 500)
            }
        }]
    }), angular.module("app.layout").controller("loginAndSignupBase", ["$scope", "$uibModalInstance", "modalData", "loginAndSignupService", function(e, t, o, n) {
        var a = this;
        e.bbLoader = !1, e.goBack = !1, e.loadSignupCaptcha = !0, e.captcha_url = "", e.captcha_0 = "", e.showNavTabs = !0;
        var r = "undefined" != typeof MEDIA_URL ? MEDIA_URL : "",
            i = {};
        e.dismiss = function() {
            $(document).trigger("ScreenViewLoginClose"), t.dismiss()
        }, e.close = function() {
            t.dismiss()
        }, a.tabs = {
            login: !0,
            signup: !1
        }, a.switchTab = function(e) {
            Object.keys(a.tabs).forEach(function(e) {
                a.tabs[e] = !1
            }), a.tabs[e] = !0, a.bannerUrl = i[e] ? i[e].url : "", a.bannerId = i[e] ? i[e].id : "", screenSlug = a.tabs.login ? "/auth/login" : "/auth/signup", $(document).trigger("trackLSBanners", [a.bannerId, screenSlug, o.pageContext])
        }, e.redirect = function() {
            $(document).trigger("LoginRedirection"), location.href = o.next
        }, a.loginClicked = function(e) {
            data = e.currentTarget.getAttribute("data-logininteraction"), $(document).trigger("loginInteractions", [data])
        }, a.loginPageShown = function(e, t) {
            var n = "";
            void 0 === t ? (n = a.tabs.login ? "/auth/login" : "/auth/signup", $(document).trigger("LoginScreenView", [n, o.pageContext])) : ("signup" == t && a.tabs.login || "login" == t && a.tabs.signup) && (a.loginClicked(e), n = a.tabs.login ? "/auth/signup" : "/auth/login", $(document).trigger("LoginScreenView", [n, o.pageContext]))
        };
        var s = function() {
            a.banners = {}, o.tab ? a.switchTab(o.tab) : a.switchTab("login"), n.getRequest("/auth/lsbanners/", {}).then(function(e) {
                e.data.login_banner && (a.loginBannerImgUrl = r + e.data.login_banner.img, i.login = e.data.login_banner), e.data.signup_banner && (a.signupBannerImgUrl = r + e.data.signup_banner.img, i.signup = e.data.signup_banner), a.bannerUrl = i[o.tab] ? i[o.tab].url : "", a.bannerId = i[o.tab] ? i[o.tab].id : "", screenSlug = a.tabs.login ? "/auth/login" : "/auth/signup", $(document).trigger("trackLSBanners", [a.bannerId, screenSlug, o.pageContext])
            })
        };
        s()
    }]), angular.module("app.layout").component("passwordStrength", {
        templateUrl: "app/templates/innertemplates/password-strength.html",
        bindings: {
            password: "<",
            username: "<",
            onChange: "&"
        },
        controller: ["$scope", function(e) {
            var t = this;
            t.message = "", t.messageClass = "", t.barClass = "", t.barHeight = "1px";
            var o = "";
            t.$onChanges = function(e) {
                if (void 0 != e.password) {
                    var n = d(e.password.currentValue || "", t.username);
                    t.message = d.messages[n.messageKey], t.messageClass = "password-meter-message-" + n.messageKey, t.barClass = "password-meter-" + n.messageKey, t.barHeight = 0 == n.rate ? "1px" : "2px", n.rate !== o && (t.onChange({
                        valid: n.rate
                    }), o = n.rate)
                }
            };
            var n = /[a-z]/,
                a = /[A-Z]/,
                r = /[0-9]/,
                i = /[0-9].*[0-9]/,
                s = /[^a-zA-Z0-9]/,
                c = /^(.)\1+$/,
                l = function(e, t) {
                    return {
                        rate: e,
                        messageKey: t
                    }
                },
                d = function(e, t) {
                    if (e.length < 8) return l(0, "too-short");
                    if (e.length > 29) return l(0, "too-long");
                    if (e.match(/\s{1,}/)) return l(0, "spaces");
                    if (t && e.toLowerCase().match(t.toLowerCase())) return l(0, "similar-to-username");
                    if (c.test(e)) return l(2, "weak");
                    if (e.match(/^[a-zA-Z]*$/) || e.match(/^(\d)\1*$/)) return l(2, "weak");
                    var o = n.test(e),
                        d = a.test(e),
                        u = r.test(e),
                        p = (i.test(e), s.test(e));
                    return e.length > 12 && o && d && u && p ? l(4, "strong") : l(3, "good")
                };
            d.messages = {
                "similar-to-username": "Too similar to username",
                "too-short": "Min 8 Characters",
                "very-weak": "Very weak",
                weak: "Weak",
                good: "Medium",
                strong: "Strong",
                "too-long": "Password must be less than 30 characters",
                spaces: "Spaces are not allowed. Please try again"
            }
        }],
        controllerAs: "passwordCtrl"
    }), angular.module("app.layout").component("signup", {
        templateUrl: "app/templates/innertemplates/signup.html",
        controller: ["$scope", "$window", "loginAndSignupService", "$timeout", signupController],
        controllerAs: "signup"
    }), angular.module("app.layout").component("myOrder", {
        templateUrl: "app/templates/innertemplates/myOrder.html",
        bindings: {
            order: "<",
            index: "<"
        },
        controllerAs: "vm",
        controller: ["$scope", "$timeout", function(e, t) {
            var o = this;
            o.voucher = !1;
            var n = "",
                a = {
                    pay_now: "/payment/pay_now/",
                    add_on_order: "",
                    change_slot: "/member/self-service/change-delivery-slot/?nc=ma-cs",
                    cancel_order: "/member/self-service/cancel-order/?nc=ma-cs",
                    apply_voucher: "/co/forgot-voucher/"
                };
            o.showDropdown = !1, o.$onInit = function() {
                o.active = 0 == o.order.order_state, o.isExpress = o.order.is_express, n = o.order.p_order_id, 0 == o.index && o.toggleDropDown(), o.cancelledOrder = 2 == o.order.order_state, a.apply_voucher += o.order.p_order_id + "/", o.showSavings = Number(o.order.order_details.total_savings) > 0
            }, o.toggleDropDown = function() {
                o.showDropdown = !o.showDropdown
            }, o.getSlotClass = function() {
                return o.cancelledOrder ? "strike" : ""
            }, o.getWidgetClass = function() {
                return o.active ? "" : "bg-dbdbdb"
            }, o.actionClick = function(e) {
                "add_on_order" == e.type ? (o.showAddOnModal = !0, o.slotDate = new window.Date(o.order.slot_info.date)) : window.location.href = a[e.type]
            }
        }]
    }), dataLayer = null, angular.module("app.layout").component("myOrderList", {
        templateUrl: "app/templates/innertemplates/myOrderList.html",
        bindings: {},
        controllerAs: "vm",
        controller: ["$scope", "$http", "$timeout", "$q", function(e, t, o, n) {
            var a = this;
            a.page = 1, a.totalPages = 1, a.showViewMore = !1, a.$onInit = function() {
                t.get("/mapi/v3.5.0/order/order-assistant/?&page=1&type=active&&_bb_client_type=web").then(function(e) {
                    var t = e.data.response;
                    t.total_active_orders;
                    a.orderList = t.orders;
                    a.orderList.length;
                    console.log(a.orderList), a.activeOrders = a.orderList
                }), t.get("/mapi/v3.5.0/order/order-assistant/?&page=1&type=past&&_bb_client_type=web").then(function(e) {
                    a.page++;
                    var t = e.data.response;
                    a.pastOrders = t.orders, a.totalPages = Number(t.total_pages), a.totalPages > 1 && (a.showViewMore = !0)
                })
            }, a.viewmore = function() {
                t.get("/mapi/v3.5.0/order/order-assistant/?&page=" + a.page + "&type=past&&_bb_client_type=web").then(function(e) {
                    a.page++;
                    var t = e.data.response,
                        o = t.orders;
                    a.pastOrders = a.pastOrders.concat(o), a.totalPages < a.page && (a.showViewMore = !1)
                })
            }
        }]
    }), angular.module("app.layout").component("orderAssistant", {
        templateUrl: "app/templates/header/orderAssistant.html",
        bindings: {
            closeOrderAssistant: "&"
        },
        controllerAs: "vm",
        controller: ["$scope", "$http", "$timeout", "$window", function(e, t, o, n) {
            var a = this;
            a.order = {}, a.hide = !0, a.cancelledOrder = !1, a.$onInit = function() {
                t.get("/mapi/v3.5.0/order/order-assistant/?_bb_client_type=web").then(function(e) {
                    var t = e.data.response;
                    if (t && t.orders) {
                        var r = t.orders.length,
                            i = t.orders;
                        r > 0 && (a.hide = !1, a.order = i[t.display_index], a.noOfactiveOrders = t.total_active_orders), a.isExpress = a.order.is_express, a.cancelledOrder = 2 == a.order.order_state, o(function() {
                            n.scrollBy(0, 1)
                        }, 200)
                    }
                })
            }, a.getSlotClass = function() {
                return a.cancelledOrder ? "strike" : "bold-dark"
            }
        }]
    }), angular.module("app.layout").component("orderStatusWidget", {
        templateUrl: "app/templates/header/orderStatusWidget.html",
        bindings: {
            arrowIndex: "<",
            states: "<",
            showArrow: "<"
        },
        controllerAs: "vm",
        controller: ["$scope", "$timeout", function(e, t) {
            var o = this;
            o.statusMeter = 0, o.$onChanges = function() {
                o.states.forEach(function(e, t) {
                    e.is_active && (o.statusMeter = t)
                }), console.log(o.statusMeter)
            }
        }]
    }),
    function() {
        "use strict";

        function e() {
            this.config = {
                appErrorPrefix: void 0
            }, this.configure = function(e) {
                this.config.appErrorPrefix = e
            }, this.$get = function() {
                return {
                    config: this.config
                }
            }
        }

        function t(e) {
            e.decorator("$exceptionHandler", o)
        }

        function o(e, t, o) {
            return function(n, a) {
                var r = t.config.appErrorPrefix || "",
                    i = {
                        exception: n,
                        cause: a
                    };
                n.message = r + n.message, e(n, a), o.error(n.message, i)
            }
        }
        t.$inject = ["$provide"], o.$inject = ["$delegate", "exceptionHandler", "logger"], angular.module("blocks.exception").provider("exceptionHandler", e).config(t)
    }(),
    function() {
        "use strict";

        function e(e) {
            function t(t) {
                return function(o) {
                    e.error(t, o)
                }
            }
            var o = {
                catcher: t
            };
            return o
        }
        e.$inject = ["logger"], angular.module("blocks.exception").factory("exception", e)
    }(),
    function() {
        "use strict";

        function e(e, t) {
            function o(o, n, a) {
                t.error(o, a), e.error("Error: " + o, n)
            }

            function n(o, n, a) {
                t.info(o, a), e.info("Info: " + o, n)
            }

            function a(o, n, a) {
                t.success(o, a), e.info("Success: " + o, n)
            }

            function r(o, n, a) {
                t.warning(o, a), e.warn("Warning: " + o, n)
            }
            var i = {
                showToasts: !0,
                error: o,
                info: n,
                success: a,
                warning: r,
                log: e.log
            };
            return i
        }
        angular.module("blocks.logger").factory("logger", e), e.$inject = ["$log", "toastr"]
    }(),
    function() {
        "use strict";

        function e() {
            this.config = {}, this.$get = function() {
                return {
                    config: this.config
                }
            }
        }

        function t(e, t, o, n, a) {
            function r(e) {
                e.forEach(function(e) {
                    e.config.resolve = angular.extend(e.config.resolve || {}, a.config.resolveAlways), g.when(e.url, e.config)
                }), g.otherwise({
                    redirectTo: "/"
                })
            }

            function i() {
                t.$on("$routeChangeError", function(t, o, a, r) {
                    if (!d) {
                        u.errors++, d = !0;
                        var i = o && (o.title || o.name || o.loadedTemplateUrl) || "unknown target",
                            s = "Error routing to " + i + ". " + (r.msg || "");
                        n.warning(s, [o]), e.path("/")
                    }
                })
            }

            function s() {
                i(), l()
            }

            function c() {
                for (var e in o.routes)
                    if (o.routes.hasOwnProperty(e)) {
                        var t = o.routes[e],
                            n = !!t.title;
                        n && p.push(t)
                    }
                return p
            }

            function l() {
                t.$on("$routeChangeSuccess", function(e, o, n) {
                    u.changes++, d = !1;
                    var r = a.config.docTitle + " " + (o.title || "");
                    t.title = r
                })
            }
            var d = !1,
                u = {
                    errors: 0,
                    changes: 0
                },
                p = [],
                g = a.config.$routeProvider,
                m = {
                    configureRoutes: r,
                    getRoutes: c,
                    routeCounts: u
                };
            return s(), m
        }
        angular.module("blocks.router").provider("routehelperConfig", e).factory("routehelper", t), t.$inject = ["$location", "$rootScope", "$route", "logger", "routehelperConfig"]
    }(),
    function() {
        "use strict";

        function e(e, t) {
            function o() {
                var t = [r()];
                e.ready(t).then(function() {})
            }

            function n() {
                u.categories = p(u.engagementStore.products), u.filters.category = ""
            }

            function a(e) {
                $("#engagementStoreFlatPage").hide(), $("#engagementStoreFlatPage").append(e), $("#engagementStoreFlatPage").show()
            }

            function r() {
                var t = function(t) {
                    u.engagement_stores = t.data, e.getEngagementStore(m).then(f)
                };
                e.getAllStores().then(t)
            }

            function i(e) {
                u.grandTotal = 0, u.totalSaved = 0, angular.forEach(R.filter(g, e), function(e, t) {
                    u.grandTotal = u.grandTotal + e.product.selectedQuantity * e.product.sell_price, u.totalSaved = u.totalSaved + e.product.selectedQuantity * e.product.mrp
                })
            }

            function s() {
                angular.forEach(R.filter(g, u.engagementStore.products), function(e, t) {
                    e.product.selectedQuantity > 0 && add_to_basket(e.pid, e.product.selectedQuantity, 1, null, ADD_TO_CART_SOURCES.ENGAGEMENT_STORE, null)
                })
            }

            function c() {
                angular.forEach(R.filter(g, u.engagementStore.products), function(e, t) {
                    e.product.selectedQuantity < 0 && (e.product.selectedQuantity = 0), e.product.selectedQuantity > 25 && (e.product.selectedQuantity = 25)
                })
            }

            function l(e, o) {
                angular.forEach(u.engagementStore.products, function(n, a) {
                    n.pid === Number(e) && (n.cart.quantity = o, t.$digest())
                })
            }

            function d() {
                angular.forEach(u.engagementStore.products, function(e, o) {
                    void 0 !== $("#p_" + e.pid) && (0 === $("#p_" + e.pid).length ? e.cart.quantity = 0 : e.cart.quantity = $("#p_" + e.pid).val(), t.$digest())
                })
            }
            var u = this,
                p = R.groupBy(function(e) {
                    return e.category
                }),
                g = function(e) {
                    return e.product.select === !0
                };
            u.engagementStore = {}, u.categories = {}, u.filters = {}, u.numSelectedProducts = 0, u.grandTotal = 0, u.totalSaved = 0, u.isItemAlreadyInCart = !1, u.addProductstoCart = s, u.selectStore = engagementStoreName, u.updateEngagementStore = l, u.updateEngagementStoreFromCart = d;
            var m = engagementStoreName,
                f = function(e) {
                    return u.filters = {}, u.engagementStore = e.data, n(), a(u.engagementStore.flatPage), t.$watch("vm.engagementStore.products", function(e, t) {
                        u.numSelectedProducts = R.filter(g, e).length, i(e), c()
                    }, !0), t.$watch("vm.engagementStore.store.numberOfGuests", function(e, t) {
                        e < 2 && (u.engagementStore.store.numberOfGuests = 2), angular.forEach(u.engagementStore.products, function(t, o) {
                            t.product.selectedQuantity = Math.round(t.fractionatedUnits * e)
                        })
                    }, !0), R.isEmpty(u.engagementStore.promo) && (u.engagementStore.promo = null), $("#engagementStoreMainContainer").fadeIn("slow"), HoldOn.close(), u.engagementStore
                };
            o()
        }
        angular.module("app").controller("EngagementStore", e), e.$inject = ["engagementStore_dataService", "$scope"]
    }(),
    function() {
        "use strict";

        function e(e, t) {
            function o(t) {
                function o(e, t, o, n) {
                    return e.data
                }
                return e({
                    method: "GET",
                    url: "/engagementStore?store=" + t
                }).then(o)
            }

            function n() {
                function e() {
                    c = !0
                }
                return s ? s : s = t.when(!0).then(e)
            }

            function a(t) {
                return e({
                    method: "POST",
                    url: "/basket/add/",
                    data: $.param(t)
                })
            }

            function r(e) {
                var o = s || n();
                return o.then(function() {
                    return t.all(e)
                })
            }

            function i() {
                return e({
                    method: "GET",
                    url: "/engagementStore/engage/getStores/"
                })
            }
            var s, c = !1,
                l = {
                    ready: r,
                    getEngagementStore: o,
                    addtocart: a,
                    getAllStores: i
                };
            return l
        }
        angular.module("app").factory("engagementStore_dataService", e), e.$inject = ["$http", "$q"]
    }(),
    function() {
        "use strict";

        function e(e, t, n) {
            e.get_gift_card_data = function() {
                t.getGiftCardData().then(function(t) {
                    e.response = t, e.cat_msg = t.data.cat_msg, e.amount_msg = t.data.amount_msg, e.themes = t.data.themes, e.amts = t.data.amts, e.pm_list = t.data.pm_list, e.wal_balance = t.data.wal_balance, e.final_wal_balance = 0, e.sub_total = 0, e.final_total = 0, e.wallet_sel = !1, e.selected_theme = "", e.selected_image = "", e.first_name = "", e.email_id = "", e.mobile_no = "", e.gift_sender = t.data.user_name, e.gift_msg = "", e.recipient_list = [{
                        first_name: "",
                        email_id: "",
                        mobile_no: ""
                    }], e.selected_recipient = "", e.selected_theme = e.themes[0].slug, e.selected_amt = e.amts[0], e.edit_card = !1, e.images = e.themes[0].images, e.show_drop = !1, n(function() {
                        $("#gift-carousel").owlCarousel({
                            items: 1,
                            loop: !1,
                            nav: !0,
                            dots: !0,
                            callbacks: !0,
                            navText: ["<i class='fa fa-chevron-left' aria-hidden='true'></i>", "<i class='fa fa-chevron-right' aria-hidden='true'></i>"]
                        })
                    }, 0);
                    for (var o = 0; o < e.pm_list.length; o++) e.payment_methods = e.pm_list[o].options, e.sel_pm = e.pm_list[o].options[o].value;
                    e.gift_card_google_analytics("create-gift-card-page", "gift-card", "/member/gift_cards/"), window.scope = e
                })
            }, e.get_images = function() {
                console.log("images:" + e.images), console.log("slec theme:" + e.selected_theme);
                for (var t = 0; t < e.themes.length; t++) e.themes[t].slug == e.selected_theme && (e.images = e.themes[t].images)
            }, e.save_recipient = function() {
                var t = $(".recipients .recipient-details").length,
                    o = $(".recipients .recipient-details").size() + 1,
                    a = 5;
                o <= a ? e.recipient_list.push({
                    first_name: e.first_name,
                    email_id: e.email_id,
                    mobile_no: e.mobile_no
                }) : ($(".add_recipient_alert").fadeIn(), n(function() {
                    $(".add_recipient_alert").fadeOut()
                }, 2e3)), e.first_name = "", e.email_id = "", e.mobile_no = "", $("#gift-carousel").owlCarousel().trigger("destroy.owl.carousel"), n(function() {
                    $("#gift-carousel").owlCarousel({
                        items: 1,
                        dots: !0,
                        nav: !0,
                        navText: ["<i class='fa fa-chevron-left' aria-hidden='true'></i>", "<i class='fa fa-chevron-right' aria-hidden='true'></i>"]
                    }), $("#gift-carousel").trigger("to.owl.carousel", t), $(".recipient-details").removeClass("active"), $(".recipient-details:last-child").addClass("active")
                }, 0)
            }, e.go_to_slide = function(e) {
                $("#gift-carousel").trigger("to.owl.carousel", e), $(".recipient-details").removeClass("active"), $(".recipient-details.count_" + e).addClass("active")
            }, e.update_recipient_name = function(t, o) {
                console.log("Preview name" + t), e.selected_recipient = t, $("#gift-carousel").trigger("to.owl.carousel", o)
            }, e.remove_recipient = function(t) {
                var o = $(".recipients .recipient-details").size() + 1;
                $("#gift-carousel").owlCarousel().trigger("destroy.owl.carousel"), n(function() {
                    $("#gift-carousel").owlCarousel({
                        items: 1,
                        dots: !0,
                        nav: !0,
                        navText: ["<i class='fa fa-chevron-left' aria-hidden='true'></i>", "<i class='fa fa-chevron-right' aria-hidden='true'></i>"]
                    }), $("#gift-carousel").trigger("to.owl.carousel", t - 1), $(".recipient-details").removeClass("active"), $(".recipient-details:nth-last-child(2)").addClass("active")
                }, 100), o > 2 && e.recipient_list.splice(t, 1)
            }, e.gift_card_google_analytics = function(e, t, n) {
                void 0 != window.ga && o.push(["_trackEvent", e, t, n])
            }, e.editCard = function() {
                e.edit_card = !1, e.wallet_sel = !1, e.final_wal_balance = 0, $("#collapseOne").collapse("show"), $("#collapseTwo").collapse("hide")
            }, e.calc_total = function() {
                if (e.gift_card_google_analytics("clicked-proceed-to-payment", "gift-card", "/member/gift_cards/"), e.giftForm.$valid) {
                    var t = e.selected_amt * e.recipient_list.length;
                    e.sub_total = t, e.final_total = e.sub_total, e.edit_card = !0, $("#collapseTwo").collapse("show"), $(this).fadeOut()
                } else console.log("Unable to save. Validation error!")
            }
        }
        var t = angular.module("app.GiftCard");
        t.directive("allowOnlyNumbers", function() {
            return {
                restrict: "A",
                link: function(e, t, o, n) {
                    t.on("keydown", function(e) {
                        var t = $(this),
                            o = t.val();
                        return o = o.replace(/[^0-9]/g, ""), t.val(o), 64 != e.which && 16 != e.which && (e.which >= 48 && e.which <= 57 || (e.which >= 96 && e.which <= 105 || ([8, 9, 13, 27, 37, 38, 39, 40].indexOf(e.which) > -1 || (e.preventDefault(), !1))))
                    })
                }
            }
        });
        var o = {
            push: function(e) {
                var t = e[0];
                if ("_trackEvent" === t) {
                    var o = e[1],
                        n = e[2],
                        a = e[3],
                        r = e[4];
                    r ? ga("send", "event", o, n, a, r, {
                        nonInteraction: 1
                    }) : ga("send", "event", o, n, a, {
                        nonInteraction: 1
                    })
                }
                "_addTrans" === t && (ga("ecommerce:addTransaction", {
                    id: e[1],
                    affiliation: "BigBasket.com",
                    revenue: e[3],
                    shipping: e[5],
                    tax: e[4]
                }), ga("ecommerce:send")), "_addItem" === t && (ga("ecommerce:addItem", {
                    id: e[1],
                    name: e[3],
                    sku: e[2],
                    category: e[4],
                    price: e[5],
                    quantity: e[6]
                }), ga("ecommerce:send"))
            }
        };
        t.controller("GiftCardController", e), e.$inject = ["$scope", "GiftCardService", "$timeout"]
    }(), angular.module("app.GiftCard").service("GiftCardService", ["$http", "$q", function(e, t) {
        function o() {
            return e.get("/co/gift-card-data/")
        }
        return {
            getGiftCardData: o
        }
    }]),
    function() {
        "use strict";

        function e(e) {
            function t(e, t, n, a, r) {
                $(document).trigger("screenViewReferralsEvent", [{}]), "custompage" == ctype ? n = "cp | " + n : "customtemplates" == ctype && (n = "cptp | " + n), void 0 != window.ga && o.push([e, t, n, a, r])
            }
            var o = {
                    push: function(e) {
                        var t = e[0];
                        if ("_trackEvent" === t) {
                            var o = e[1],
                                n = e[2],
                                a = e[3],
                                r = e[4];
                            r ? ga("send", "event", o, n, a, r, {
                                nonInteraction: 1
                            }) : ga("send", "event", o, n, a, {
                                nonInteraction: 1
                            })
                        }
                    }
                },
                n = {
                    pushToGoogleAnalytics: t
                };
            return n
        }
        angular.module("app.layout").service("GAService", e), e.$inject = ["$window"]
    }(),
    function() {
        function e(e) {
            return ("https:" == window.location.protocol ? "/auth" : "") + e
        }

        function t(t, n, a, r) {
            function i() {
                return k.items ? k.items.length : null
            }

            function s() {
                var e = {};
                return angular.forEach(k.items, function(t) {
                    e[t.pid] = t.quantity
                }), e
            }

            function c() {
                function o(e) {
                    return k = e.data
                }
                return t.get(e("/basket/get/")).then(o)
            }

            function l(e, o, n) {
                function i(e) {
                    var t = e.data.success;
                    return t || a.error("", e.data.mesg, {
                        timeOut: 500,
                        positionClass: "toast-top-full-width",
                        closeButton: !0,
                        preventDuplicates: !0,
                        preventOpenDuplicates: !0
                    }), e.data
                }
                var s = {
                        prod_id: e,
                        qty: o,
                        cart_type: 1,
                        is_list: [],
                        term: $.query.get("q"),
                        term_source: "/ps/" === location.pathname ? "ps" : "",
                        sid: n,
                        is_express_tab: !1,
                        cartitem_mode: "normal"
                    },
                    c = new BasketUrlBuilder;
                return c = r.useNodeCart ? c.withNodeCartUrl().build() : c.build(), r.useNodeCart || (s = $.param(s)), t.post(c.updateQtyUrl, s).then(i)
            }

            function d(e, o, n, a) {
                function i(e) {
                    var t = e.data.success;
                    return t
                }
                var s = {
                        prod_id: e,
                        qty: o,
                        ru: "/ & spn = 0",
                        cart_type: 1,
                        nc: "auto - search",
                        term: a,
                        term_source: "AUTO",
                        sid: n,
                        csrfmiddlewaretoken: $.cookie("csrftoken"),
                        cartitem_mode: "normal"
                    },
                    c = new BasketUrlBuilder;
                return c = r.useNodeCart ? c.withNodeCartUrl().build() : c.build(), r.useNodeCart || (s = $.param(s)), t.post(c.addToCartUrl, s).then(i)
            }

            function u(e, o) {
                "use strict";

                function n(e) {
                    return e.data
                }
                var a = {
                        sid: o,
                        prod_id: e,
                        cart_type: 1,
                        is_list: []
                    },
                    i = new BasketUrlBuilder;
                return i = r.useNodeCart ? i.withNodeCartUrl().build() : i.build(), r.useNodeCart || (a = $.param(a)), t.post(i.delItemUrl, a).then(n)
            }

            function p() {
                function o(e) {
                    return S.memberinfo = e.data, S
                }
                return t.get(e("/get_member_details/")).then(o)
            }

            function g(o, n) {
                function a(e) {
                    if (e.data.success) return e.data && e.data.items && !R.isEmpty(e.data.items) ? e.data : null
                }
                var r = {
                    city_id: o,
                    address_id: n
                };
                return t.post(e("/basket/get-cart-item-difference/"), $.param(r)).then(a)
            }

            function m(o, n) {
                function a(e) {
                    return !!e.data.success
                }
                var r = {
                    city_id: o,
                    address_id: n,
                    csrfmiddlewaretoken: $.cookie("csrftoken")
                };
                return t.post(e("/set-city/"), $.param(r)).then(a)
            }

            function f(o) {
                function n(e) {
                    if (e.data.success) {
                        var t = {};
                        return angular.forEach(e.data.adresses, function(e) {
                            var o = [{
                                type: "Express Delivery",
                                slot: e.express_closed_5k ? "(Slots Full)" : e.darkstore_next_slot,
                                img: "custPage/build/content/img/bike_red.png",
                                bb_star_avail: e.bb_star_avail
                            }, {
                                type: "Standard Delivery",
                                slot: e.express_closed_5k ? e.darkstore_next_slot : e.normal_next_slot,
                                img: "custPage/build/content/img/van_icon_green.png",
                                bb_star_avail: e.bb_star_avail
                            }, {
                                type: "Express Delivery",
                                slot: e.express_next_slot,
                                img: "custPage/build/content/img/bike_red.png",
                                bb_star_avail: e.bb_star_avail
                            }];
                            o = R.filter(function(e) {
                                return !!e.slot && "" != e.slot
                            }, o), o = o.length > 0 ? o : null, o = R.forEach(function(e) {
                                "Standard Delivery" === e.type ? e.type = "Standard" : e.slot = e.type + ":" + e.slot
                            }, o), t[e.id] = o
                        }), t
                    }
                    return null
                }
                var a = {
                    address_id: o,
                    all: !0
                };
                return t.post(e("/member/get-address-slots/"), $.param(a)).then(n)
            }

            function h() {
                if (S && S.memberinfo) return S.memberinfo
            }

            function _(o, n) {
                function a(e) {
                    var t = e.data;
                    return t
                }
                var r = {
                    product_id: n,
                    notify_type: o,
                    is_ct: !0,
                    csrfmiddlewaretoken: $.cookie("csrftoken")
                };
                return t.post(e("/product/call-notify-popup/"), $.param(r)).then(a)
            }

            function v(o) {
                function n(e) {
                    return e.data
                }
                return t.get(e("/product/get-multi-combo-products?is_cp=1&sku_id=" + o)).then(n)
            }

            function y() {
                function e() {
                    C = !0
                }
                return w ? w : w = n.when(!0).then(e)
            }

            function b(e) {
                var t = w || y();
                return t.then(function() {
                    return n.all(e)
                })["catch"](function(e) {})
            }
            var w, k = {},
                S = new o(null),
                C = !1,
                T = {
                    getCart: c,
                    getMember: p,
                    updateBasket: d,
                    deleteFromBasket: u,
                    ready: b,
                    getCartDifference: g,
                    setdelivertoArea: m,
                    sendStockNotification: _,
                    getSlotsForAddress: f,
                    updateCartQuantity: l,
                    getmembername: h,
                    getformatedcart: s,
                    getCartLength: i,
                    getMultiSkuComboProducts: v
                };
            return T
        }
        var o = function() {
            this.memberinfo = null, this.currentAddress = null
        };
        angular.module("app.layout").factory("UserDataservice", t), t.$inject = ["$http", "$q", "toastr", "$rootScope"]
    }(),
    function() {
        function e(e, t) {
            var o = this;
            o.footerData = [], $.cookie("_bb_vid") && t.getfooter().then(function(e) {
                o.footerData = e
            })
        }
        angular.module("app.layout").controller("Footer", e), e.$inject = ["$scope", "FooterDataservice"]
    }(),
    function() {
        function e(e, t) {
            function o() {
                function o(e) {
                    "use strict";
                    return e.data
                }
                var n = document.getElementById("city_id"),
                    a = "/auth/get_footer/?";
                return a += n && n.value ? "city_id=" + Number(n.value) : "cai=" + t.CURRENT_ADDRESS_ID, e.get(a).then(o)
            }

            function n() {
                function e() {
                    i = !0
                }
                return r ? r : r = $q.when(!0).then(e)
            }

            function a(e) {
                var t = r || n();
                return t.then(function() {
                    return $q.all(e)
                })["catch"]()
            }
            var r, i = !1,
                s = {
                    getfooter: o,
                    ready: a
                };
            return s
        }
        angular.module("app.layout").factory("FooterDataservice", e), e.$inject = ["$http", "$window"]
    }(),
    function() {
        function e(e, t, o, n, a, r, i, s, c, l) {
            function d() {
                var t = P.hideOnscroll;
                r.scrollY > 2 * r.innerHeight ? P.hideOnscroll = !1 : P.hideOnscroll = !0, t != P.hideOnscroll && e.$apply()
            }

            function u(e, t) {
                $(".dropbtn").removeClass("dropdown-active"), $(document).trigger("addressInteractionPlower", [{
                    EventName: "ChangeAddress_MessageDisplay"
                }]), window.show_cart_change_popup(e, t)
            }

            function p(e) {
                P.deliveryaddress = {
                    address: e
                }, n.getCartDifference(e.city_id, e.id).then(function(e) {
                    P.deliveryaddress.addresschangeqc = e, $(document).trigger("addressInteractionPlower", [{
                        EventName: "ChangeAddress_MessageDisplay"
                    }]), P.deliveryaddress.addresschangeqc || !P.newPopup ? ($(".dropdown-menu1, .overlay-dropdown").hide(), $(".dropbtn").removeClass("dropdown-active"), $("#uiv2-multicity-change").show(), $("#shoplist-mask").fadeIn()) : ($("body").removeClass("pos-fixed"), $(".dropdown-menu1").hide(), $(".dropbtn").removeClass("dropdown-active"), $(".top-header").removeClass("locpops"), $(".middle-header").css("top", "0px"), $("#pageLoader").show(), $(".basket-loader").css("display", "block"), P.setdeliveryArea())
                })
            }

            function g(e) {
                return decodeURIComponent((new RegExp("[?|&]" + e + "=([^&;]+?)(&|#|;|$)").exec(location.search) || [null, ""])[1].replace(/\+/g, "%20")) || null
            }

            function m() {
                "use strict";
                o.getPageInfo().then(function(o) {
                    P.member_done = !0, v(), t.member_stores = o.member_stores, t.$broadcast("PAGE_DATA_LOADED", {}), t.useNodeCart = o.USE_NODE_CART_SERVICE, P.current_city = o.current_city, P.selectedAddressDefault.city_id = P.current_city.id, P.selectedAddressDefault.city_name = P.current_city.name, o.site_message && (P.siteMessageAvaiable(o.site_message), $("#site_msg_label").text(o.site_message), $("#site_msg").show()), P.address_city_name = void 0 === o.selected_address ? P.selectedAddressDefault.city_name : o.selected_address.city_name, P.address_city_id = void 0 === o.selected_address ? P.selectedAddressDefault.city_id : o.selected_address.city_id, P.user.currentAddress = void 0 === o.selected_address ? P.selectedAddressDefault : o.selected_address, P.user.currentAddress.residential_complex && P.user.currentAddress.residential_complex.length > 0 && (P.user.currentAddress.address_display_name = P.user.currentAddress.residential_complex + "," + P.user.currentAddress.area), window.dataLayer && dataLayer.push({
                        city: P.address_city_name
                    }), P.user.currentAddress.city_support_number = o.city_support_number, P.user.cart_no_items = r.CART, t.cart_no_items = P.user.cart_no_items, P.offerFlowEnabled = o.OFFERS_FLOW_ENABLED, $("#totalNumberOfCartItems").html(P.user.cart_no_items + " items"), $("#mobiletotalNumberOfCartItems").html(P.user.cart_no_items), P.user.is_member = o.is_member, o.selected_address ? P.selectedlocation.cityquery = P.address_city_name : P.selectedlocation.cityquery = "", t.is_express_availaible = o.is_express, t.is_express_availaible && (t.express_closed = o.express_closed ? "BB EXPRESS (SLOTS FULL)" : "BB EXPRESS"), t.has_speciality = o.has_speciality, P.all_cities = M(o.all_cities_choices), P.selectedlocation.city = {
                        name: P.address_city_name,
                        value: P.address_city_id,
                        id: P.address_city_id
                    }, P.kapture_chat = o.kapture_chat, P.cityselected = !0, P.selectedlocation.area = "", P.headerBanner = o.header_banner, P.searchPlaceholder = o.search_label, P.show_my_membership_link = o.show_my_membership_link, P.show_priority_slot_msg = o.show_priority_slot_msg, P.is_active_bb_star_member = o.is_active_bb_star_member, P.giftingMsg = o.gifting_msg, 1 == loggedInUser && (1 == o.selected_address.is_partial && t.cart_no_items > 0 ? i(function() {
                        P.cityMessage = !1, $(document).trigger("addressInteractionPlower", [{
                            EventName: "Login_PartialAddressPopUp_Shown",
                            Location: P.user.currentAddress.city_name + "|" + P.user.currentAddress.area,
                            AdditionalInfo2: $.cookie("_bb_locSrc")
                        }]), P.locdropdown()
                    }, 0) : i(function() {
                        P.cityMessage = !1, $.removeCookie("_bb_ftvid", {
                            path: "/",
                            domain: window.location.host.replace("www", "")
                        }), $.removeCookie("_bb_locSrc", {
                            path: "/",
                            domain: window.location.host.replace("www", "")
                        })
                    }, 0)), $.cookie("_bb_mid") && (P.cityMessage = !1, $.removeCookie("_bb_locSrc", {
                        path: "/",
                        domain: window.location.host.replace("www", "")
                    })), I(), P.hp_sections = {}, P.hp_sections.section1 = o.hp_sec1_banner;
                    var n = g("pg");
                    null != P.headerBanner && (P.headerBanner["Image name"] = MEDIA_URL + P.headerBanner["Image name"]), null != P.searchPlaceholder || void 0 != P.searchPlaceholder ? P.searchPlaceholder = P.searchPlaceholder["Banner Text"].caption1 : P.searchPlaceholder = "Search for Products..", o.has_speciality && (P.has_speciality = o.has_speciality), P.user.is_member && (P.user.memberinfo = o.member_info, P.user.other_address = !1, t.ismember = !0, o.top_nav_addresses && !R.isEmpty(o.top_nav_addresses) && (P.user.other_address = o.top_nav_addresses), window.location.href.indexOf("choose-city/?pg=1&next=/") > -1 && 1 == n && e.$$postDigest(function() {
                        P.locationMWDropdown()
                    }), window.dataLayer && dataLayer.push({
                        noo: P.user.memberinfo.noo,
                        dolo: P.user.memberinfo.dolo,
                        dofo: P.user.memberinfo.dofo
                    }));
                    var a = [{
                        type: "Express",
                        slot: o.express_closed_5k ? "Express Delivery: (Slots Full)" : o.darkstore_next_slot,
                        img: USED_STATIC_URL + "img/express-del.svg"
                    }, {
                        type: "Standard",
                        slot: o.express_closed_5k ? o.darkstore_next_slot : o.normal_next_slot,
                        img: USED_STATIC_URL + "img/standard-del.svg"
                    }, {
                        type: "Express",
                        slot: o.express_next_slot,
                        img: USED_STATIC_URL + "img/express-del.svg"
                    }];
                    if (a = R.filter(function(e) {
                            return !!e.slot && e.slot.length > 0
                        }, a), P.availaible_slots = a.length > 0 ? a : null, angular.forEach(P.availaible_slots, function(e, t) {
                            P.availaible_slots[t].slot = P.format_slot(P.availaible_slots[t].slot)
                        }), void 0 === o.selected_address) {
                        $("#main_menu_icon").removeAttr("onclick"), $(".cart-image").removeAttr("href"), $(".mw-bb-logo").removeAttr("href"), $("#main_menu_icon, .user-mw-drop, .mw-bb-logo, .cart-image, .mask").click(function() {
                            $(".dropdown-menu").effect("shake", {
                                times: 1
                            }, {
                                distance: 5
                            }, 300)
                        });
                        var s = f();
                        1 == s && P.locationMWDropdown()
                    }
                    P.user.is_member || window.location.href.indexOf("choose-city/?pg=1&next=/") > -1 && 1 == n && e.$$postDigest(function() {
                        P.locationMWDropdown()
                    });
                    for (var c = 0; c < P.all_cities.length; c++) o = P.all_cities[c], o.label = P.all_cities[c].name, o.value = P.all_cities[c].name, o.id = P.all_cities[c].id, A.push(o)
                })
            }

            function f() {
                return function(e) {
                    if (/(android|ipad|playbook|silk|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0, 4))) return !0
                }(navigator.userAgent || navigator.vendor || window.opera), !1
            }

            function h() {
                if (P.notifymethod && P.user.is_member) {
                    var e = "";
                    n.sendStockNotification(P.notifymethod, P.outofstockproduct).then(function(t) {
                        t && (e = "E" == P.notifymethod ? "Email" : "S" == P.notifymethod ? "Mobile" : "Email & Mobile", a.success("", "You will be notified via " + e + ", when the product is available", {
                            timeOut: 5e3,
                            positionClass: "toast-top-full-width",
                            closeButton: !0,
                            preventDuplicates: !0
                        }), $("#notify-modal").modal("toggle"))
                    })
                } else window.location.href = "/auth/login/?nc=nb"
            }

            function _() {
                "use strict";
                return {
                    residential_complex: " ",
                    isdummy: !0,
                    nick: " ",
                    first_name: " ",
                    last_name: " ",
                    is_partial: !1,
                    pin: 560001,
                    area: " ",
                    city_id: 0,
                    contact_area: "",
                    contact_no: "",
                    landmark: "",
                    address_display_name: "M.G Road   ",
                    city_name: "",
                    address_1: "",
                    address_2: "",
                    lat: 12.919697509246365,
                    lng: 77.57679894536898,
                    nickname: "",
                    id: "",
                    is_express: !0
                }
            }

            function v() {
                "use strict";
                return o.getShops().then(function(e) {
                    P.shops = e.shops, P.express_shops = R.filter(function(e) {
                        return 1 == e.is_express
                    }, P.shops), P.shops = R.filter(function(e) {
                        return 0 == e.is_express
                    }, P.shops), P.offers = e.offers, P.mainMenuEntryShop1 = e.main_menu_banner1, null != P.mainMenuEntryShop1 && (P.mainMenuEntryShop1["Image name"] = MEDIA_URL + P.mainMenuEntryShop1["Image name"])
                })
            }

            function y() {
                var e = [];
                e = void 0 != PAGE_TYPE && "hpcp" === PAGE_TYPE ? [m(), b()] : [m()], o.ready(e).then(function() {
                    "use strict";
                    $("#pageLoader").hide()
                }), P.VERSIONED_STATIC = "True" == VERSIONED_STATIC, P.STATIC_URL = STATIC_URL, P.VERSION = VERSION, P.MEDIA_URL = MEDIA_URL, P.USE_NODE = USE_NODE, P.BBPLUS_ENABLED = !1, "undefined" != typeof CUSTOMER_SELF_SERVICE_WEB_DISABLED && (P.CUSTOMER_SELF_SERVICE_WEB_DISABLED = CUSTOMER_SELF_SERVICE_WEB_DISABLED), P.MEMBER_REFERAL_ACTIVE = !1, P.currenturl = window.location.pathname + window.location.search;
                var t = window.location.search.match(/next=(.*)/);
                t && t.length > 1 ? P.currenturl = encodeURIComponent(t[1]) : P.currenturl = "/", I()
            }

            function b() {
                "use strict";
                o.getLeftMenu().then(function(e) {
                    var t = e;
                    P.leftmenu = t.topcats, P.viewAllBanner = t.viewallbanner, P.viewAllBanner && (P.viewAllBanner = P.viewAllBanner[0]), P.showSubmenu(P.leftmenu[0]);
                    var o = [];
                    angular.forEach(P.leftmenu, function(e, t) {
                        o.push(C(e, t)), e.top_category.nav_banner && (e.top_category.nav_banner.banners = e.top_category.nav_banner.banners[0], e.top_category.nav_banner.banners.image = {
                            background: "url('" + P.MEDIA_URL + e.top_category.nav_banner.banners.image + "')",
                            height: "400px",
                            "background-repeat": "no-repeat",
                            "background-position": "right"
                        })
                    }), P.showSubmenu(P.leftmenu[0]), setTimeout(function() {
                        $("#navBarMegaNav").menuAim({
                            activate: w,
                            deactivate: S,
                            submenuDirection: "right"
                        }), $("#navBarSticky").menuAim({
                            activate: w,
                            deactivate: S,
                            submenuDirection: "right"
                        })
                    }, 3e3)
                })
            }

            function w(e) {
                var t = $(e);
                E = e, U.scope().vm.menuHoverFixCallingshowSubmenu(t.data("l2"));
                var o = t.data("submenuId"),
                    n = $("#" + o),
                    a = $(t).parent().outerHeight();
                width = $(t).parent().outerWidth(), n.css({
                    display: "block",
                    top: -1,
                    left: width - 3,
                    height: a - 4
                }), t.find("a").addClass("active")
            }

            function k(e) {
                var t = $(e),
                    o = t.data("submenuId"),
                    n = $("#" + o),
                    a = $(t).parent().outerHeight();
                width = $(t).parent().outerWidth(), n.css({
                    display: "block",
                    top: -1,
                    left: width - 3,
                    height: a - 4
                }), t.find("a").addClass("active")
            }

            function S(e) {
                var t = $(e),
                    o = t.data("submenuId"),
                    n = $("#" + o);
                n.css("display", "none"), t.find("a").removeClass("active")
            }

            function C(e, t) {
                "use strict";
                var o = T(e.sub_cats);
                e.subcategories = o, e.subcategories.chunks = {
                    chunk1: o[0]
                }, o.length > 1 && (e.subcategories.chunks.chunk2 = o[1], o[1].length > 9 && (e.subcategories.chunks.chunk2 = o[1].splice(0, 9), e.subcategories.chunks.showmore = !0))
            }

            function T(e) {
                var t = [];
                if (e) {
                    angular.forEach(e, function(e) {
                        var o = [];
                        angular.forEach(e, function(e) {
                            var t = {
                                name: e.sub_category[0],
                                slug: e.sub_category[1],
                                url: e.sub_category[2]
                            };
                            if (t.search_term = e.search_term, e.l2_banner) {
                                var n = {};
                                n.type = e.l2_banner.type, angular.forEach(e.l2_banner.banners, function(e) {
                                    n[e.display_name] = e
                                }), t.banner = n
                            }
                            t.options = null, e.cats && e.cats.length > 0 && (t.options = [], angular.forEach(e.cats, function(e) {
                                var o = {
                                    name: e.cat[0],
                                    slug: e.cat[1],
                                    url: e.cat[2]
                                };
                                t.options.push(o)
                            })), o.push(t)
                        }), o && t.push(o)
                    })
                }
                return t
            }
            var P = this,
                A = [];
            "true" === $.cookie("_fls") && (r.remove_cache = !0), "undefined" == typeof new_checkout && (new_checkout = !1), "/basket/" == window.location.pathname && new_checkout && (P.newPopup = !0), $.cookie("_bb_ftvid") ? P.cityMessage = !0 : P.cityMessage = !1, P.firstTimeUser = !1, P.showError = !1, P.user = {}, P.cart = {}, P.showSearchContent = !1, P.searchfound = !1, P.showdrop = !1, P.cartupdate = !0, P.availaible_slots = {}, P.leftmenu = {}, P.shops = {}, P.offers = {}, P.AreaList = [], P.notifymethod = "E", P.notifyMe = h, P.isB2BSite = "True" === $("#IS_B2B_SITE").val(), P.selectedAddressDefault = _(), P.set_city_cart_check = p, P.newLoginFlow = window.NEW_LOGIN_FLOW, t.member_stores = {}, t.cart_no_items = 0, t.ismember = !1, t.csrf = $.cookie("csrftoken");
            var M = R.sortBy(R.compose(R.toLower, R.prop("name")));
            P.selectedlocation = {
                city: M[0],
                area: ""
            };
            var E = [];
            P.readyToShow = !1, P.show_cart_change_popup = u, P.showOrderAssistant = !1, window.OA_WIDGET && r.addEventListener("load", function() {
                P.showOrderAssistant = "/" == window.location.pathname && !("hide" == sessionStorage.getItem("orderAssistant")), d(), P.showOrderAssistant && angular.element(r).bind("scroll", function(e) {
                    d()
                }), e.$apply()
            }), P.gotosubcategory = function(e) {
                window.location.href = e.url
            }, P.getNumberOfCartItems = function() {
                P.user.cart_no_items = n.getCartLength() ? n.getCartLength() : P.user.cart_no_items
            }, P.siteMessageAvaiable = function(e) {
                return P.siteMessage = e, $("#site_msg_label").text(e), $("#site_msg").show(), 1
            }, t.$on("Notify", function(e, t) {
                "use strict";
                P.outofstockproduct = t, null != $("div[id*='comboModal']") && $("div[id*='comboModal']").modal("hide"), $("#notify-modal").modal("toggle")
            }), P.showDropdown = function() {
                P.showdrop = !0
            };
            var x = function(e) {
                    return R.is(Object, e)
                },
                D = function(e) {
                    e.qty = 1
                },
                I = function() {
                    "/gifting/" == window.location.pathname && (P.currenturl = "/gifting/", P.cityMessage = !0)
                };
            P.validate_cookie = function() {
                return void 0 != $.cookie("_bb_vid") || (window.location.href = "/", !1)
            }, P.searchProducts = function() {
                "use strict";

                function e(e) {
                    P.searchResults = e.results, P.searchResults.data = R.filter(x, P.searchResults.data), 0 === P.searchResults.data.length ? P.searchfound = !1 : (P.searchfound = !0, angular.forEach(P.searchResults.data, D), R.isEmpty(P.searchResults.suggestions.ads) && (P.searchResults.suggestions.ads = !1), R.isNil(P.searchResults.suggestions.discounts) ? P.searchResults.suggestions.discounts = !1 : (P.searchResults.suggestions.discounts.pid = P.searchResults.suggestions.discounts.id, P.searchResults.suggestions.discounts.text = P.searchResults.suggestions.discounts.description, D(P.searchResults.suggestions.discounts))), P.showSearchContent = !0
                }
                var t = P.validate_cookie();
                t && (P.searchPhrase.length >= 3 ? (P.showSearchContent = !0, o.searchProducts(P.searchPhrase, P.current_city.id, "").then(e)) : 0 === P.searchPhrase.length && (P.showSearchContent = !1))
            }, P.addProductsFromSearch = function(e) {
                isNaN(e.qty) || e.qty < 0 ? a.error("Invalid Quantity", "Add To Basket", {
                    timeOut: 5e3,
                    positionClass: "toast-top-full-width",
                    closeButton: !0,
                    preventDuplicates: !0,
                    preventOpenDuplicates: !0
                }) : n.updateBasket(e.pid, e.qty, "", P.searchPhrase).then(function(o) {
                    o && (a.success("", "Successfully added " + e.text + " to the basket", {
                        timeOut: 500,
                        positionClass: "toast-top-full-width",
                        closeButton: !0,
                        preventDuplicates: !0
                    }), t.$broadcast("getCart", P.selectedProduct), $(document).trigger("basketInteractionsPlowerWithAngular", [{
                        EventName: "Basket_Add",
                        SkuID: e.pid,
                        Quantity: e.qty,
                        UnitMrp: e.price,
                        UnitSalePrice: e.price,
                        ScreenInPageContext: "auto-search"
                    }]))
                })
            }, P.callBroadcastGetCart = function() {
                "use strict";
                t.$broadcast("getCart", {})
            }, P.clearSearch = function() {
                P.searchResults = null, P.showSearchContent = !1
            }, P.clearSearches = function() {
                P.searchResults = null, P.showSearchContent = !1, P.searchPhrase = ""
            }, P.canShowSearchSuggestions = function() {
                return !!(P.searchResults && P.searchResults.suggestions && (P.searchResults.suggestions.ads || P.searchResults.suggestions.terms.length > 0 || P.searchResults.suggestions.brands.length > 0 || P.searchResults.suggestions.categories.length > 0))
            }, P.userManualSearch = function() {
                P.searchPhrase && P.searchPhrase.length > 0 && ($(document).trigger("screenViewReferralsEvent", [{}]), window.location.href = "/ps/?q=" + encodeURI(P.searchPhrase))
            };
            var U = angular.element(document.getElementById("headerControllerId"));
            P.showL2Category = function(e) {
                P.selectedl2 = e
            }, P.showSubmenu = function(e) {
                P.selectedtop = e, P.selectedtop.subcategories && P.showL2Category(P.selectedtop.subcategories.chunks.chunk1[0])
            }, P.selectmenubanner = function() {
                window.location.href = P.selectedtop.top_category.nav_banner.banners.url
            }, P.clearMenu = function() {
                P.viewall = !1, P.showSubmenu(P.leftmenu[0]), k([$("#navBarMegaNav li")[0]]), k([$("#navBarSticky li")[0]]), S(E)
            }, P.menuHoverFixCallingshowSubmenu = function(t) {
                "use strict";
                void 0 !== t && (P.showSubmenu(P.leftmenu[t]), e.$apply())
            }, P.offcanvasToggle = function(e) {
                var t = $("#offsubmenu" + e);
                t.find("ul").slideToggle(), t.find("i").toggleClass("fa-plus fa-minus")
            }, P.changeLocation = function() {
                P.showdrop = !1
            }, P.chooseCity = function(e) {
                P.selectedlocation.city = e.id
            }, P.skipandexplore = function(e) {
                e ? window.location.href = "/skip_explore/?c=" + e + "&l=0&s=0&n=" + P.currenturl : (P.cityselected && P.selectedlocation.cityquery && 0 !== P.selectedlocation.cityquery.length || (P.selectedlocation.city = {
                    name: P.current_city.name,
                    value: P.current_city.id,
                    id: P.current_city.id
                }), P.selectedlocation.cityquery !== P.selectedlocation.city.name && (P.selectedlocation.city = R.find(R.propEq("name", P.selectedlocation.cityquery))(P.all_cities)), $(document).trigger("addressInteractionPlower", [{
                    EventName: "SkipExplore_Clicked",
                    Location: P.selectedlocation.city.name,
                    AdditionalInfo2: $.cookie("_bb_locSrc")
                }]), $.removeCookie("_bb_locSrc", {
                    path: "/",
                    domain: window.location.host.replace("www", "")
                }), window.location.href = "/skip_explore/?c=" + P.selectedlocation.city.id + "&l=0&s=0&n=" + P.currenturl)
            }, P.continueClicked = function() {
                $(document).trigger("addressInteractionPlower", [{
                    EventName: "ChangeMyLocation_ContinueClicked",
                    Location: P.selectedlocation.cityquery + "|" + P.selectedlocation.area.label,
                    AdditionalInfo2: $.cookie("_bb_locSrc")
                }]), $.removeCookie("_bb_locSrc", {
                    path: "/",
                    domain: window.location.host.replace("www", "")
                }), s.pushToGoogleAnalytics("_trackEvent", "city-select", "change-city | Success", P.user.currentAddress.city_name + "|" + P.user.currentAddress.area, 1)
            }, P.emptyCheck = function() {
                P.selectedlocation.query || (P.showError = !1)
            }, P.getAreasForCity = function(e, t) {
                return P.selectedlocation.query = e, P.selectedlocation.cityquery && P.selectedlocation.cityquery.length > 0 && P.selectedlocation.query && R.find(R.propEq("name", P.selectedlocation.cityquery))(P.all_cities) ? o.getAreasForCity(P.selectedlocation.city.id, P.selectedlocation.query, P.USE_NODE).then(function(e) {
                    return P.AreaList = e, 0 === e.length && (P.areaselected = !1, P.showError = !0), t ? void t(e) : e.map(function(e) {
                        return e.display_name === e.pincode ? e.label = e.display_name + " , " + P.selectedlocation.city.name : e.label = e.display_name + "-" + e.pincode + "," + P.selectedlocation.city.name, e
                    })
                }) : (P.areaselected = !1, P.showError = !0, [])
            }, P.isSkipnExplore = function() {
                return !(P.cityselected && P.selectedlocation.cityquery && P.areaselected && P.selectedlocation.query)
            }, P.onSelect = function(e) {
                P.selectedlocation.city;
                P.selectedlocation.area = e, P.selectedlocation.submit = !0, P.areaselected = !0, P.showError = !1
            }, P.onSelectCity = function(e) {
                P.selectedlocation.city = {
                    id: e.id,
                    name: e.name
                }, P.selectedlocation.cityquery = P.selectedlocation.city.name, P.citychanged(), setTimeout(function() {
                    $("#areaselect").focus()
                }, 100)
            }, P.changeDeliveryAddress = function(e) {
                $(document).trigger("addressInteractionPlower", [{
                    EventName: "ChangeAddress_MessageDisplay"
                }]), $("#left-menu-overlay").hide(), P.showdrop = !1, P.deliveryaddress = {
                    address: e
                }, n.getCartDifference(e.city_id, e.id).then(function(e) {
                    P.deliveryaddress.addresschangeqc = e
                })
            }, P.setdeliveryArea = function() {
                P.newPopup && ($("#uiv2-multicity-change").hide(), $(".basket-loader").css("display", "block"), $(".overlay-dropdown").css("display", "block")), n.setdelivertoArea(P.deliveryaddress.address.city_id, P.deliveryaddress.address.id).then(function(e) {
                    if (e) {
                        var t = [];
                        if (P.deliveryaddress.addresschangeqc)
                            for (var o = 0; o < P.deliveryaddress.addresschangeqc.items.length; o++) t.push("" + P.deliveryaddress.addresschangeqc.items[o].skuid);
                        $(document).trigger("addressInteractionPlower", [{
                            EventName: "ChangeAddress_Continue",
                            ItemsRemoved: t
                        }]), window.location.reload()
                    }
                })
            }, P.getslotsforaddress = function(e) {
                var t = [];
                n.getSlotsForAddress(R.map(function(e) {
                    return e.id
                }, e)).then(function(o) {
                    angular.forEach(e, function(e, n) {
                        if (o && o[e.id]) {
                            e.availaibleslots = o[e.id], angular.forEach(e.availaibleslots, function(t, o) {
                                e.availaibleslots[o].slot = P.format_slot(e.availaibleslots[o].slot), 1 === t.bb_star_avail && (e.bb_star_avail = 1)
                            });
                            var a = e.availaibleslots;
                            2 == a.length && 1 != a[0].bb_star_avail && 1 != a[1].bb_star_avail ? e.bb_star_avail = 0 : 1 == a.length && 1 != a[0].bb_star_avail && (e.bb_star_avail = 0), t.push(e)
                        }
                    }), P.user.other_address = t
                })
            }, P.citychanged = function() {
                P.selectedlocation.query = "", P.selectedlocation.submit = !1, P.cityselected = !0
            }, P.format_slot = function(e) {
                var t = e.match(/:(.*)/)[1];
                return t = t.replace("By", ""), t = t.replace("Next", ""), t = t.replace(/AM.*to/, " -"), t = t.replace(/PM.*to/, " -")
            }, P.showuserdrop = function() {
                P.user.currentAddress.isdummy || ($(".mask").show(), $(".dropbtn").removeClass("dropdown-active"), $(".user-btn").addClass("dropdown-active"), $(".mask").click(function() {
                    $(this).fadeOut(), $("body").removeClass("pos-fixed"), $(".user-btn").removeClass("dropdown-active")
                }))
            }, P.locationMWDropdown = function() {
                $("#city-select").val(P.user.currentAddress.city_name), P.selectedlocation.query = "";
                var t = $(".dropbtn");
                $(".user-btn").removeClass("dropdown-active"), $(".dropbtn").addClass("dropdown-active"), $("body").addClass("pos-fixed"), $(".mask").fadeIn(), 1 == $("dropbtn.xhrcalls-only").hasClass("dropdown-active") && P.user.is_member && P.user.other_address && P.getslotsforaddress(P.user.other_address), P.user.currentAddress.isdummy || $(".mask").click(function() {
                    $(this).fadeOut(), $("body").removeClass("pos-fixed"), t.removeClass("dropdown-active")
                }), "function" == typeof jQuery("#area-select").autocomplete && (jQuery("#area-select").autocomplete({
                    source: function(e, t) {
                        P.getAreasForCity(P.selectedlocation.query, function(e) {
                            formatted = [];
                            for (var o = 0; o < e.length; o++) e[o].display_name === e[o].pincode ? e[o].label = e[o].display_name + " , " + P.selectedlocation.city.name : e[o].label = e[o].display_name + "-" + e[o].pincode + "," + P.selectedlocation.city.name, formatted.push(e[o]);
                            t(formatted)
                        })
                    },
                    select: function(t, o) {
                        var n = angular.element(document.getElementById("headercontroller"));
                        n.scope().vm.onSelect(o.item), e.$digest()
                    },
                    minLength: 3
                }), jQuery("#city-select").autocomplete({
                    source: A,
                    select: function(t, o) {
                        var n = angular.element(document.getElementById("headercontroller"));
                        n.scope().vm.onSelectCity(o.item), e.$digest(), $("#area-select").focus(), P.user.currentAddress.isdummy && P.skipandexplore(o.item.id)
                    },
                    minLength: 0
                }).focus(function() {
                    "use strict";
                    $("#city-select").val(""), $("#city-select").autocomplete("search", $("#city-select").val()), P.selectedlocation.query = ""
                }))
            }, P.openAutoSearch = function() {
                $("#city-select").autocomplete("search", "")
            }, $(".mask").click(function() {
                $("#city-select").autocomplete("close")
            }), $(document).on("firstBasketAdd", function() {
                i(function() {
                    P.firstTimeUser = !0, P.dont_send_changemylocation_event = !0, P.locationChangeDropdown(), $(document).trigger("addressInteractionPlower", [{
                        EventName: "AddToCart_AddressPopUp_Shown",
                        Location: P.user.currentAddress.city_name + "|" + P.user.currentAddress.area,
                        AdditionalInfo2: $.cookie("_bb_locSrc")
                    }])
                }, 0)
            }), P.cancelFirstStaticPopup = function() {
                P.firstTimeUser = !1, $(".overlay-dropdown").fadeOut(), $("body").removeClass("pos-fixed"), $(".dropdown-menu1").hide(), $(".dropbtn").removeClass("dropdown-active"), $(".top-header").removeClass("locpops"), $(".middle-header").css("top", "0px"), s.pushToGoogleAnalytics("_trackEvent", "city-select", "continue", P.user.currentAddress.city_name, 1), $(document).trigger("addressInteractionPlower", [{
                    EventName: "AddToCart_AddressPopUp_Continue_Clicked",
                    Location: P.user.currentAddress.city_name + "|" + P.user.currentAddress.area,
                    AdditionalInfo2: $.cookie("_bb_locSrc")
                }])
            }, P.locationChangeDropdown = function(t) {
                P.cityMessage = !1, $.cookie("_bb_ftvid") && $.removeCookie("_bb_ftvid", {
                    path: "/",
                    domain: window.location.host.replace("www", "")
                }), t && $.cookie("_bb_locSrc") && $.removeCookie("_bb_locSrc", {
                    path: "/",
                    domain: window.location.host.replace("www", "")
                }), $("#city-select").val(P.user.currentAddress.city_name), P.selectedlocation.query = "";
                var o = $(".dropbtn");
                $(".user-btn").removeClass("dropdown-active"), $(".dropdown-menu1").show(), o.addClass("dropdown-active"), $(".overlay-dropdown").fadeIn(), $("body").addClass("pos-fixed"), 1 == $("button.dropbtn.xhrcalls-only").hasClass("dropdown-active") && P.user.is_member && P.user.other_address && P.getslotsforaddress(P.user.other_address), P.user.currentAddress.isdummy || $(".overlay-dropdown").click(function() {
                    $(this).fadeOut(), $("body").removeClass("pos-fixed"), $(".dropdown-menu1").hide(), o.removeClass("dropdown-active"), $(".top-header").removeClass("locpops"), $(".middle-header").css("top", "0px"), P.showError = !1, s.pushToGoogleAnalytics("_trackEvent", "city-select", "continue", P.user.currentAddress.city_name, 1)
                }), "function" == typeof jQuery("#area-select").autocomplete && (jQuery("#area-select").autocomplete({
                    source: function(e, t) {
                        P.getAreasForCity(P.selectedlocation.query, function(e) {
                            formatted = [];
                            for (var o = 0; o < e.length; o++) e[o].display_name === e[o].pincode ? e[o].label = e[o].display_name + " , " + P.selectedlocation.city.name : e[o].label = e[o].display_name + "-" + e[o].pincode + "," + P.selectedlocation.city.name, formatted.push(e[o]);
                            t(formatted)
                        })
                    },
                    select: function(t, o) {
                        var n = angular.element(document.getElementById("headercontroller"));
                        n.scope().vm.onSelect(o.item), e.$digest()
                    },
                    minLength: 3
                }), jQuery("#city-select").autocomplete({
                    source: A,
                    select: function(t, o) {
                        var n = angular.element(document.getElementById("headercontroller"));
                        n.scope().vm.onSelectCity(o.item), e.$digest(), $("#area-select").focus()
                    },
                    minLength: 0
                }).focus(function() {
                    "use strict";
                    $("#city-select").val(""), $("#city-select").autocomplete("search", $("#city-select").val()), P.selectedlocation.query = ""
                })), $(".overlay-dropdown").click(function() {
                    $("#city-select").autocomplete("close")
                }), P.dont_send_changemylocation_event || $(document).trigger("addressInteractionPlower", [{
                    EventName: "ChangeMyLocation_Shown",
                    Location: P.user.currentAddress.city_name + "|" + P.user.currentAddress.address_display_name
                }]), P.dont_send_changemylocation_event = !1
            }, P.cityMessageClose = function() {
                P.cityMessage = !1, $.removeCookie("_bb_ftvid", {
                    path: "/",
                    domain: window.location.host.replace("www", "")
                })
            }, t.$on("FirstTimeUser", function() {
                P.firstTimeUser = !0, P.dont_send_changemylocation_event = !0, P.locdropdown(), $(document).trigger("addressInteractionPlower", [{
                    EventName: "AddToCart_AddressPopUp_Shown",
                    Location: P.user.currentAddress.city_name + "|" + P.user.currentAddress.area,
                    AdditionalInfo2: $.cookie("_bb_locSrc")
                }])
            }), P.cancelFirstPopup = function() {
                P.firstTimeUser = !1, $("#city-drop-overlay").fadeToggle(), $("body").removeClass("toggle-scroll"), $(".new-to-bb").removeClass("drop-z-index"), $(".dropdown.new-to-bb").removeClass("open"), $(".top-header").removeClass("locpops"), $(".bb-brand-section").css("top", "0px"), s.pushToGoogleAnalytics("_trackEvent", "city-select", "continue", P.user.currentAddress.city_name, 1), P.user.is_member ? P.user.currentAddress.is_partial && $(document).trigger("addressInteractionPlower", [{
                    EventName: "Login_PartialAddressPopUp_Continue_Clicked",
                    Location: P.user.currentAddress.city_name + "|" + P.user.currentAddress.area,
                    AdditionalInfo2: $.cookie("_bb_locSrc")
                }]) : $(document).trigger("addressInteractionPlower", [{
                    EventName: "AddToCart_AddressPopUp_Continue_Clicked",
                    Location: P.user.currentAddress.city_name + "|" + P.user.currentAddress.area,
                    AdditionalInfo2: $.cookie("_bb_locSrc")
                }])
            }, P.changeFirstPopup = function() {
                P.firstTimeUser = !P.firstTimeUser, $(document).trigger("addressInteractionPlower", [{
                    EventName: "AddToCart_AddressPopUp_ChangeCity_Clicked",
                    Location: P.user.currentAddress.city_name + "|" + P.user.currentAddress.area,
                    AdditionalInfo2: $.cookie("_bb_locSrc")
                }])
            }, P.locdropdown = function(e) {
                P.cityMessage = !1, $.cookie("_bb_ftvid") && $.removeCookie("_bb_ftvid", {
                    path: "/",
                    domain: window.location.host.replace("www", "")
                }), e && $.cookie("_bb_locSrc") && $.removeCookie("_bb_locSrc", {
                    path: "/",
                    domain: window.location.host.replace("www", "")
                }), $("#city-drop-overlay").fadeToggle(), $("body").toggleClass("toggle-scroll"), $(".new-to-bb").toggleClass("drop-z-index"), $(".dropdown.new-to-bb").toggleClass("open"), 1 == $(".dropdown.new-to-bb.xhrcalls-only").hasClass("open") && P.user.is_member && P.user.other_address && P.getslotsforaddress(P.user.other_address), P.user.currentAddress.isdummy || $("#city-drop-overlay").click(function() {
                    $("#city-drop-overlay").fadeOut("slow"), $("body").removeClass("toggle-scroll"), $(".new-to-bb").removeClass("drop-z-index"), $(".dropdown.new-to-bb").removeClass("open"), $(".top-header").removeClass("locpops"), $(".bb-brand-section").css("top", "0px"), P.showError = !1, P.firstTimeUser = !1, s.pushToGoogleAnalytics("_trackEvent", "city-select", "continue", P.user.currentAddress.city_name, 1)
                }), P.selectedlocation.cityquery = P.address_city_name, P.selectedlocation.city.name = P.address_city_name, P.selectedlocation.city.id = P.address_city_id, P.selectedlocation.query = "", P.dont_send_changemylocation_event || (P.user.is_member && P.user.currentAddress.is_partial ? $(document).trigger("addressInteractionPlower", [{
                    EventName: "Login_PartialAddressPopUp_Shown",
                    Location: P.user.currentAddress.city_name + "|" + P.user.currentAddress.area,
                    AdditionalInfo2: $.cookie("_bb_locSrc")
                }]) : $(document).trigger("addressInteractionPlower", [{
                    EventName: "ChangeMyLocation_Shown",
                    Location: P.address_city_name + "|" + P.user.currentAddress.address_display_name
                }])), P.dont_send_changemylocation_event = !1
            }, P.locdropclose = function() {
                $("#city-drop-overlay").fadeOut(), $("body").removeClass("toggle-scroll"), $(".new-to-bb").removeClass("drop-z-index"), $(".dropdown.new-to-bb").removeClass("open")
            }, P.loginClicked = function(e) {
                data = e.currentTarget.getAttribute("data-logininteraction"), $(document).trigger("loginInteractions", [data])
            }, P.openLoginAndSignupModal = function(t, o) {
                o = location.href;
                var n = c.open({
                    templateUrl: "app/templates/innertemplates/loginAndSignupBaseTemplate.html",
                    scope: e,
                    controller: "loginAndSignupBase",
                    controllerAs: "loginAndSignupBase",
                    windowClass: "signup-modal",
                    resolve: {
                        modalData: function() {
                            return {
                                tab: t,
                                next: o || "/",
                                pageContext: "nb"
                            }
                        }
                    },
                    backdrop: "static",
                    keyboard: !1
                });
                n.result.then(function(e) {}, function() {})
            }, P.logout = function() {
                r.location.href = "/auth/logout/?nc=md&page=custom", sessionStorage.clear()
            }, P.closeOrderAssistant = function() {
                P.showOrderAssistant = !1, sessionStorage.setItem("orderAssistant", "hide")
            }, y()
        }
        angular.module("app.layout").controller("Header", e), e.$inject = ["$scope", "$rootScope", "HeaderDataservice", "UserDataservice", "toastr", "$window", "$timeout", "GAService", "$uibModal", "$cookies"]
    }(),
    function() {
        function e(e, t, o) {
            function n(e) {
                return ("https:" == window.location.protocol ? "/auth" : "") + e
            }

            function a(t, o, n) {
                "use strict";

                function a(e) {
                    return e.data
                }
                return e.get("/productservice/autocomplete/?term=" + t + "&city_id=" + o + "&_=" + n).then(a)
            }

            function r() {
                function t(e) {
                    "use strict";
                    return f = e.data.shops, e.data
                }
                return o.remove_cache ? e.get(n("/get_page_data/?cai=" + o.CURRENT_ADDRESS_ID), {
                    headers: {
                        "Cache-Control": "no-cache"
                    }
                }).then(t) : e.get(n("/get_page_data/?cai=" + o.CURRENT_ADDRESS_ID)).then(t)
            }

            function i() {
                function t(e) {
                    "use strict";
                    return e.data
                }
                var a = "/get_menu/?",
                    r = document.getElementById("city_id");
                return a += r && r.value ? "city_id=" + Number(r.value) : "cai=" + o.CURRENT_ADDRESS_ID, e.get(n(a)).then(t)
            }

            function s() {
                return t(function(e, t) {
                    e(f)
                })
            }

            function c() {
                function e() {
                    m = !0
                }
                return g ? g : g = t.when(!0).then(e)
            }

            function l(e) {
                var o = g || c();
                return o.then(function() {
                    return t.all(e)
                })["catch"](function(e) {})
            }

            function d(t) {
                "use strict";

                function o(e) {
                    var t = [];
                    if (e.data.sub_cats) {
                        angular.forEach(e.data.sub_cats, function(e) {
                            var o = [];
                            angular.forEach(e, function(e) {
                                var t = {
                                    name: e.sub_category[0],
                                    slug: e.sub_category[1],
                                    url: e.sub_category[2]
                                };
                                if (t.search_term = e.search_term, e.l2_banner) {
                                    var n = {};
                                    n.type = e.l2_banner.type, angular.forEach(e.l2_banner.banners, function(e) {
                                        n[e.display_name] = e
                                    }), t.banner = n
                                }
                                t.options = null, e.cats && e.cats.length > 0 && (t.options = [], angular.forEach(e.cats, function(e) {
                                    var o = {
                                        name: e.cat[0],
                                        slug: e.cat[1],
                                        url: e.cat[2]
                                    };
                                    t.options.push(o)
                                })), o.push(t)
                            }), o && t.push(o)
                        })
                    }
                    return t
                }
                return e.get(n("/get_sub_cat_menu/?category_id=" + t)).then(o)
            }

            function u(t, o, a) {
                function r(e) {
                    return e.data.response.results
                }
                return a ? e.get("/bbplacessearch/getplaces/?term=" + o + "&city_id=" + t).then(r) : e.get(n("/bb/get_area/?term=" + o + "&city_id=" + t)).then(r)
            }

            function p(e) {
                return t.all(e).then(function(e) {
                    return !0
                })
            }
            var g, m = !1,
                f = null,
                h = {
                    getPageInfo: r,
                    getLeftMenu: i,
                    getShops: s,
                    searchProducts: a,
                    ready: l,
                    getSubcategory: d,
                    getAreasForCity: u,
                    getRequestQueue: p
                };
            return h
        }
        angular.module("app.layout").factory("HeaderDataservice", e), e.$inject = ["$http", "$q", "$window"], angular.module("app.layout").service("loginAndSignupService", ["$http", "$q", function(e, t) {
            var o = function(e) {
                var t = "";
                return Object.keys(e).forEach(function(o) {
                    t += o + "=" + window.encodeURIComponent(e[o]) + "&"
                }), t
            };
            this.submitForm = function(n, a, r) {
                var i = {
                        method: "POST",
                        url: a,
                        headers: {
                            "Content-Type": "application/x-www-form-urlencoded"
                        },
                        data: o(n)
                    },
                    s = t.defer();
                return r && (r.bbLoader = !0), e(i).then(function(e) {
                    r && (r.bbLoader = !1), s.resolve(e)
                }, function(e) {
                    r && (r.bbLoader = !1), s.reject(e)
                }), s.promise
            }, this.getRequest = function(o, n, a) {
                var r = {
                        method: "GET",
                        url: o,
                        params: n
                    },
                    i = t.defer();
                return a && (a.bbLoader = !0), e(r).then(function(e) {
                    a && (a.bbLoader = !1), i.resolve(e)
                }, function(e) {
                    a && (a.bbLoader = !1), i.reject(e)
                }), i.promise
            }, this.fb_login = function(e, t) {
                "undefined" != typeof _gaq && _gaq.push(["_trackEvent", "Login", "Login Action", "Facebook Login"]);
                var o = "/auth/fb/login/?sl=" + e;
                t && "string" == typeof t && (o += "&ref_code=" + encodeURIComponent(t)), location.href = o
            }, this.gplus_login = function(e, t) {
                "undefined" != typeof _gaq && _gaq.push(["_trackEvent", "Login", "Login Action", "Google Login"]);
                var o = "/auth/gplus/login/?sl=" + e;
                t && "string" == typeof t && (o += "&ref_code=" + encodeURIComponent(t)), location.href = o
            }, this.get_captcha_url = function() {
                return e.get("/captcha/get_new_captcha/").then(function(e) {
                    return e
                })
            }
        }])
    }(),
    function() {
        "use strict";

        function e(e, t, o, n, a, r, i) {
            function s(e) {
                location.href = "/auth/fb/login/?sl=" + e
            }

            function c(e) {
                location.href = "/auth/gplus/login/?sl=" + e
            }

            function l() {
                return t.ismember
            }

            function d() {
                C.memberinfo = o.getmembername()
            }

            function u(e, t) {
                return Number(e) >= 1e3 ? e : Number(t) + Number(e)
            }

            function p(e) {
                o.deleteFromBasket(e.pid, e.quantity, t.sid).then(function(o) {
                    if (o.success) {
                        var n = R.findIndex(R.propEq("product_id", e.product_id))(C.cart.items);
                        C.cart.items.splice(n, 1), $("#totalNumberOfCartItems").html(o.num_items + " items"), $("#mobiletotalNumberOfCartItems").html(o.num_items), t.$broadcast("CART_ITEM_CHANGED", {
                            sku: e.pid,
                            qty: 0
                        }), _(e.pid, 0), v(e.pid, o.basket_widget), typeof updateEngagementStore == typeof Function ? updateEngagementStore(e.pid, 0) : "";
                        var a = Number(e.mrp) + Number(e.saving);
                        $(document).trigger("basketInteractionsPlowerWithAngular", [{
                            EventName: "Basket_Remove",
                            SkuID: e.pid,
                            Quantity: e.quantity,
                            UnitMrp: a,
                            UnitSalePrice: Number(e.mrp),
                            ScreenInPageContext: "basket"
                        }]), C.getCartDetails()
                    }
                })
            }

            function g() {
                C.showbb || (C.showbb = !0, C.timer = n(function() {
                    C.basketDrop = !0, C.getCartDetails(), 0 != C.cart.cart_no_items && C.sendDataToGTM(C.cart)
                }, 500))
            }

            function m() {
                C.showbb && (C.showbb = !1, n.cancel(C.timer), C.basketDrop = !1)
            }

            function f(e) {
                $.isNumeric(e.quantity) && (e.quantity > 0 && e.quantity < 25 ? o.updateCartQuantity(e.pid, Number(e.quantity), t.sid).then(function(o) {
                    o.success && (e.quantity = o.ana_md.qty, t.$broadcast("CART_ITEM_CHANGED", {
                        sku: e.pid,
                        qty: e.quantity
                    }), _(e.pid, e.quantity), typeof updateEngagementStore == typeof Function ? updateEngagementStore(e.pid, 0) : "")
                }) : 0 === Number(e.quantity) && p(e))
            }

            function h(e) {
                if (Number(e.quantity) > 1) {
                    var n = Number(e.quantity) - 1;
                    o.updateCartQuantity(e.pid, n, t.sid).then(function(o) {
                        if (o.success) {
                            e.quantity = o.ana_md.qty, t.$broadcast("CART_ITEM_CHANGED", {
                                sku: e.pid,
                                qty: n
                            }), _(e.pid, n), typeof updateEngagementStore == typeof Function ? updateEngagementStore(e.pid, 0) : "";
                            var a = Number(e.mrp) + Number(o.p_saving) / o.ana_md.qty;
                            $(document).trigger("basketInteractionsPlowerWithAngular", [{
                                EventName: "Basket_Decrement",
                                SkuID: e.pid,
                                Quantity: 1,
                                UnitMrp: a,
                                UnitSalePrice: Number(e.mrp),
                                ScreenInPageContext: "basket"
                            }]), C.getCartDetails()
                        }
                    })
                } else p(e)
            }

            function _(e, t) {
                "/basket/&nc=basket" === window.location.pathname ? ($("#p_" + e).val(t), refresh()) : $("#p_" + e).val(t + " in basket"), $("#p" + e + "_cart").val(t)
            }

            function v(e, t) {
                init_page_data(), init_basket(), $("li[name='widget_" + e + "'] .uiv2-add-to-basket").html(t), init_a2c_for_selector('li[name="widget_' + e + '"] .a2c'), $('li[name="widget_' + e + '"].uiv2-selected-product').length >= 1 && $('li[name="widget_' + e + '"]').removeClass("uiv2-selected-product");
                var o = $("#a2c-pd-" + e).val();
                1 == o && $('li[name="widget_' + e + '"]').removeClass("uiv2-selected-product")
            }

            function y(e) {
                if (Number(e.quantity) < 25) {
                    var n = Number(e.quantity) + 1;
                    o.updateCartQuantity(e.pid, n, t.sid).then(function(o) {
                        if (o.success) {
                            e.quantity = o.ana_md.qty, t.$broadcast("CART_ITEM_CHANGED", {
                                sku: e.pid,
                                qty: n
                            }), _(e.pid, n), typeof updateEngagementStore == typeof Function ? updateEngagementStore(e.pid, 0) : "", C.getCartDetails();
                            var a = Number(e.mrp) + Number(o.p_saving) / o.ana_md.qty;
                            $(document).trigger("basketInteractionsPlowerWithAngular", [{
                                EventName: "Basket_Increment",
                                SkuID: e.pid,
                                Quantity: 1,
                                UnitMrp: a,
                                UnitSalePrice: Number(e.mrp),
                                ScreenInPageContext: "basket"
                            }])
                        }
                    })
                }
            }

            function b(t) {
                if ($(document).trigger("screenViewReferralsEvent", [{}]), t > 0)
                    if ("hpcp" === PAGE_TYPE && !i.get("_bb_mid") && "function" == typeof r.open && window.NEW_LOGIN_FLOW) {
                        if (void 0 !== is_returning_user && is_returning_user) var o = "login";
                        else var o = "signup";
                        var n = r.open({
                            templateUrl: "app/templates/innertemplates/loginAndSignupBaseTemplate.html",
                            scope: e,
                            controller: "loginAndSignupBase",
                            controllerAs: "loginAndSignupBase",
                            resolve: {
                                modalData: function() {
                                    return {
                                        tab: o,
                                        pageContext: "basket",
                                        next: "/basket/?ver=1"
                                    }
                                }
                            },
                            backdrop: "static",
                            windowClass: "signup-modal",
                            keyboard: !1
                        });
                        n.result.then(function(e) {}, function() {})
                    } else location.href = "/basket/?ver=1"
            }

            function w(e) {
                if (e.items) {
                    for (var t = e.items, o = [], n = 0; n < t.length; n++) o.push({
                        id: t[n].pid,
                        price: t[n].mrp,
                        quantity: t[n].quantity
                    });
                    dataLayer.push({
                        view_basket_details: o
                    }), dataLayer.push({
                        event: "view_basket_mouse_hover"
                    })
                }
            }

            function k() {
                return o.getCart().then(function(e) {
                    C.cart = e, null != C.cart.basket_banner && (C.cart.basket_banner["Image name"] = MEDIA_URL + C.cart.basket_banner["Image name"]), Number(e.cart_total) >= Number(e.delivery_limit) ? C.cart.free_delivery = !0 : C.cart.free_delivery = !1, $("#totalNumberOfCartItems").html(C.cart.cart_no_items + " items"), $("#mobiletotalNumberOfCartItems").html(C.cart.cart_no_items)
                })
            }

            function S() {
                void 0 != PAGE_TYPE && "hpcp" === PAGE_TYPE
            }
            var C = this;
            C.cart = {}, C.cart.cart_no_items = a.CART, C.updateCartQuantity = f, C.goToBasketPage = b, C.deleteFromBasket = p, C.decreamentQuantity = h, C.increamentQuantity = y, C.updateOldPage = _, C.updateTheOldWidget = v, C.isMember = l, C.getMemberinfo = d, C.grandTotal = u, C.USED_STATIC_URL = USED_STATIC_URL, C.fb_login = s, C.gplus_login = c, t.cart = C.cart, C.getCartDetails = k, C.sendDataToGTM = w, C.showBasket = g, C.hideBasket = m, C.basketDrop = !1, C.timer = {}, S(), t.$on("getCart", function(e, t) {
                C.getCartDetails()
            })
        }

        function t() {
            return {
                restrict: "E",
                templateUrl: "app/templates/innertemplates/bigbasketCartTemplate.html",
                scope: {},
                controller: ["$scope", "$rootScope", "UserDataservice", "$timeout", "$window", "$uibModal", "$cookies", e],
                controllerAs: "vm"
            }
        }

        function o() {
            function e(e, t, o) {}
            return {
                restrict: "E",
                templateUrl: "app/templates/innertemplates/searchProductsTemplate.html",
                link: e
            }
        }

        function n(e) {
            function t(e, t, o) {}
            return {
                restrict: "E",
                templateUrl: "app/templates/innertemplates/megaNav.html",
                link: t
            }
        }

        function a(e) {
            function t(e, t, o) {}
            return {
                restrict: "E",
                templateUrl: "app/templates/innertemplates/megaNavSticky.html",
                link: t
            }
        }

        function r(e) {
            function t(e, t, o) {}
            return {
                restrict: "E",
                templateUrl: "app/templates/innertemplates/DesktopLeftMenuL2template.html",
                link: t
            }
        }
        n.$inject = ["$timeout"], a.$inject = ["$timeout"], e.$inject = ["$scope", "$rootScope", "UserDataservice", "$timeout", "$window", "$uibModal", "$cookies"], angular.module("app.layout").directive("megaNavTemplate", n).directive("megaNavStickyTemplate", a).directive("leftSubcategoryTemplate", r).directive("searchProductsTemplate", o).directive("bigbasketCartTemplate", t);
        var i = e;
        i.$inject = ["$scope", "$rootScope", "UserDataservice", "$timeout", "$window", "$uibModal", "$cookies"], angular.module("app.layout").controller("oldPageCompatibilityCartController", i), r.$inject = ["$timeout"], angular.module("app.layout").filter("ToInt", ["$filter", function(e) {
            return function(e) {
                return e ? (e = parseFloat(e), e = e.toFixed(e % 1 === 0 ? 0 : 2), "" + e.toString().replace(/\B(?=(\d{3})+(?!\d))/g, "")) : "0"
            }
        }])
    }(),
    function(e) {
        "use strict";
        e(".nav-pills > li ").hover(function() {
            e(this).hasClass("hoverblock") || e(this).find("a").tab("show")
        }), e(".nav-tabs > li").find("a").click(function() {
            e(this).parent().siblings().addClass("hoverblock")
        }), jQuery(document).ready(function(e) {
            var t = e("#navbar-main"),
                o = e(window);
            e("#left-menu-overlay").click(function() {
                e("#left-menu-overlay").fadeOut("slow"), e("body").removeClass("toggle-scroll"), e(".new-to-bb").removeClass("drop-z-index")
            }), e(window).on("resize", function() {
                if (window.innerWidth <= 991) {
                    e("#navbar-main").addClass("navbar-fixed-top"), e(".body-wrap").css("padding-top", "70px");
                    var n = document.getElementById("order-assistant");
                    if (n) {
                        var a = n.clientHeight;
                        e(n).addClass("fixed"), t[0].style.top = a + "px"
                    }
                } else e(".body-wrap").css("padding-top", "0px"), t.removeClass("navbar-fixed-top"), e(".search-bar input").attr("placeholder", "Search for Products.."), o.scroll(function() {
                    var n = document.getElementById("order-assistant");
                    if (o.scrollTop() >= 30) {
                        // if (t.addClass("navbar-fixed-top"), e("body").css("padding-top", "45px"), e(".bb-logo").removeClass("change-logo"), e(".bb-logo").addClass("icon"), n) {
                            if (t.addClass("navbar-fixed-top"), e(".bb-logo").removeClass("change-logo"), e(".bb-logo").addClass("icon"), n) {
                            var a = n.clientHeight;
                            e(n).addClass("fixed"), t[0].style.top = a + "px"
                        }
                    } else t.removeClass("navbar-fixed-top"), e("body").css("padding-top", "0px"), e(".bb-logo").addClass("change-logo"), e(".bb-logo").removeClass("icon"), n && (t[0].style.top = "0", e(n).removeClass("fixed"))
                })
            }).trigger("resize")
        }), e("#mega-desktop-navigation .dropdown").hover(function() {
            e(this).addClass("open")
        }, function() {
            e(this).removeClass("open")
        }), e("div.panel-collapse").on("show.bs.collapse", function() {
            e(this).parent("div").find(".fa-chevron-right").removeClass("fa fa-chevron-right").addClass("fa fa-chevron-down")
        }), e("div.panel-collapse").on("hide.bs.collapse", function() {
            e(this).parent("div").find(".fa-chevron-down").removeClass("fa fa-chevron-down").addClass("fa fa-chevron-right")
        }), e(".submenu").on("click", function() {
            e(this).find("ul").slideToggle(), e(this).find("i").toggleClass("fa-plus fa-minus")
        })
    }($), $(document).ready(function() {
        $(".skip").on("click", function() {
            $(".error_loc_msg").hide()
        }), $(".register-options").on("click", function() {
            $(".visible-div").hide(), $(".hidden-div").show()
        }), $(".citychange").on("click", function() {
            $(".visible-div").show(), $(".hidden-div").hide(), $(".error_loc_msg").hide()
        }), $("div.panel-collapse").on("show.bs.collapse", function() {
            $(this).parent("div").find(".fa-chevron-right").removeClass("fa fa-chevron-right").addClass("fa fa-chevron-down")
        }), $("div.panel-collapse").on("hide.bs.collapse", function() {
            $(this).parent("div").find(".fa-chevron-down").removeClass("fa fa-chevron-down").addClass("fa fa-chevron-right")
        })
    }), $(function() {
        $('[data-toggle="tooltip"]').tooltip()
    }), $(document.body).on("click", ".dropdown-menu.drop-select li a", function(e) {
        var t = $(e.currentTarget);
        return t.closest(".btn-group").find('[data-bind="label"]').text(t.text()).end().children(".dropdown-toggle").dropdown("toggle"), !1
    }), $(document).ready(function() {
        $(".po-markup > .po-link-addr").popover({
            trigger: "hover",
            html: !0,
            title: function() {
                return $(this).parent().find(".po-title").html()
            },
            content: function() {
                return $(this).parent().find(".po-body").html()
            },
            container: "body",
            placement: "bottom"
        }), $("div.create-list").on("click.bs.dropdown", function(e) {
            var t = $(e.target),
                o = t.is(".is_a");
            t.hasClass("dropdown-toggle") && ($("ul.dropdown-menu", this).toggle(!o), t.toggleClass("is_a", !o))
        }).on("mouseleave", function() {
            $("ul.dropdown-menu", this).hide(), $(".is_a", this).removeClass("is_a"), $(".show-list").hide()
        })
    }), $(function() {
        $(".button-checkbox").each(function() {
            function e() {
                var e = a.is(":checked");
                n.data("state", e ? "on" : "off"), n.find(".state-icon").removeClass().addClass("state-icon " + i[n.data("state")].icon), e ? n.removeClass("btn-default").addClass("btn-" + r + " active") : n.removeClass("btn-" + r + " active").addClass("btn-default")
            }

            function t() {
                e(), 0 == n.find(".state-icon").length && n.prepend('<i class="state-icon ' + i[n.data("state")].icon + '"></i>')
            }
            var o = $(this),
                n = o.find("button"),
                a = o.find("input:checkbox"),
                r = n.data("color"),
                i = {
                    on: {
                        icon: "fa fa-check"
                    },
                    off: {
                        icon: "fa fa-unchecked"
                    }
                };
            n.on("click", function() {
                a.prop("checked", !a.is(":checked")), a.triggerHandler("change"), e()
            }), a.on("change", function() {
                e()
            }), t()
        })
    }), $("#fileUpload").on("change", function() {
        var e = $(this)[0].files.length,
            t = $(this)[0].value,
            o = t.substring(t.lastIndexOf(".") + 1).toLowerCase(),
            n = $(".col-wrap");
        if (n.empty(), "gif" == o || "png" == o || "jpg" == o || "jpeg" == o)
            if ("undefined" != typeof FileReader)
                for (var a = 0; a < e; a++) {
                    var r = new FileReader;
                    r.onload = function(t) {
                        4 == e || 5 == e ? $(n).append('<li style="flex-basis:calc(100% / 4)"><img class="img-responsive" src="' + t.target.result + '"></li> ') : e >= 6 ? $(n).append('<li style="flex-basis:calc(100% / 6)"><img class="img-responsive" src="' + t.target.result + '"></li> ') : alert("Please select minimum 4 images")
                    }, n.show(), r.readAsDataURL($(this)[0].files[a])
                } else alert("This browser does not support FileReader.");
            else alert("Pls select only images")
    }), $(document).ready(function() {
        $("#toTop").css("display", "none"), $(window).scroll(function() {
            $(window).scrollTop() > 200 ? $("#toTop").fadeIn("slow") : $("#toTop").fadeOut("slow")
        }), $("#toTop").click(function() {
            event.preventDefault(), $("html, body").animate({
                scrollTop: 0
            }, "slow")
        })
    }), $(".onscroll-dropdown").hover(function() {
        $(this).find(".dropdown-menu").stop(!0, !0).show()
    }, function() {
        $(this).find(".dropdown-menu").stop(!0, !0).hide()
    });
var BasketUrlBuilder = function() {
    var e = make_req_url("/basket/add/"),
        t = make_req_url("/basket/del-item/"),
        o = make_req_url("/basket/qty-update/"),
        n = make_req_url(""),
        a = make_req_url("/basket/empty-basket/"),
        r = make_req_url("/msl/add-list-item-to-basket/");
    return {
        withNodeCartUrl: function() {
            return e = "/basketService/add/", t = "/basketService/del-item/", o = "/basketService/update-qty/", n = "", a = "/basketService/empty-cart/", r = "/basketService/msl/add-list-item-to-basket/", this
        },
        build: function() {
            return {
                addToCartUrl: e,
                delItemUrl: t,
                updateQtyUrl: o,
                getCartUrl: n,
                emptyCartUrl: a,
                addListCartUrl: r
            }
        }
    }
};
if ("undefined" == typeof jQuery) {
    var headTag = document.getElementsByTagName("head")[0],
        jqTag = document.createElement("script");
    jqTag.type = "text/javascript", jqTag.src = "https://www.adjetter.com/static/assets/global/plugins/jquery.min.js", jqTag.onload = initializeKapture, headTag.appendChild(jqTag)
} else 
! function(e) {
    function t(t) {
        var o = e(this),
            n = null,
            a = [],
            r = null,
            i = null,
            s = e.extend({
                rowSelector: "> li",
                submenuSelector: "*",
                submenuDirection: "right",
                tolerance: 75,
                enter: e.noop,
                exit: e.noop,
                activate: e.noop,
                deactivate: e.noop,
                exitMenu: e.noop
            }, t),
            c = 3,
            l = 300,
            d = function(e) {
                a.push({
                    x: e.pageX,
                    y: e.pageY
                }), a.length > c && a.shift()
            },
            u = function() {
                i && clearTimeout(i), s.exitMenu(this) && (n && s.deactivate(n), n = null)
            },
            p = function() {
                i && clearTimeout(i), s.enter(this), h(this)
            },
            g = function() {
                s.exit(this)
            },
            m = function() {
                f(this)
            },
            f = function(e) {
                e != n && (n && s.deactivate(n), s.activate(e), n = e)
            },
            h = function(e) {
                var t = _();
                t ? i = setTimeout(function() {
                    h(e)
                }, t) : f(e)
            },
            _ = function() {
                function t(e, t) {
                    return (t.y - e.y) / (t.x - e.x)
                }
                if (!n || !e(n).is(s.submenuSelector)) return 0;
                var i = o.offset(),
                    c = {
                        x: i.left,
                        y: i.top - s.tolerance
                    },
                    d = {
                        x: i.left + o.outerWidth(),
                        y: c.y
                    },
                    u = {
                        x: i.left,
                        y: i.top + o.outerHeight() + s.tolerance
                    },
                    p = {
                        x: i.left + o.outerWidth(),
                        y: u.y
                    },
                    g = a[a.length - 1],
                    m = a[0];
                if (!g) return 0;
                if (m || (m = g), m.x < i.left || m.x > p.x || m.y < i.top || m.y > p.y) return 0;
                if (r && g.x == r.x && g.y == r.y) return 0;
                var f = d,
                    h = p;
                "left" == s.submenuDirection ? (f = u, h = c) : "below" == s.submenuDirection ? (f = p, h = u) : "above" == s.submenuDirection && (f = c, h = d);
                var _ = t(g, f),
                    v = t(g, h),
                    y = t(m, f),
                    b = t(m, h);
                return _ < y && v > b ? (r = g, l) : (r = null, 0)
            };
        o.mouseleave(u).find(s.rowSelector).mouseenter(p).mouseleave(g).click(m), e(document).mousemove(d)
    }
    e.fn.menuAim = function(e) {
        return this.each(function() {
            t.call(this, e)
        }), this
    }
}(jQuery), ! function(e) {
    "function" == typeof define && define.amd ? define(["jquery"], e) : "object" == typeof module && module.exports ? module.exports = e(require("jquery")) : e(jQuery)
}(function(e) {
    e.extend(e.fn, {
        validate: function(t) {
            if (!this.length) return void(t && t.debug && window.console && console.warn("Nothing selected, can't validate, returning nothing."));
            var o = e.data(this[0], "validator");
            return o ? o : (this.attr("novalidate", "novalidate"), o = new e.validator(t, this[0]), e.data(this[0], "validator", o), o.settings.onsubmit && (this.on("click.validate", ":submit", function(t) {
                o.settings.submitHandler && (o.submitButton = t.target), e(this).hasClass("cancel") && (o.cancelSubmit = !0), void 0 !== e(this).attr("formnovalidate") && (o.cancelSubmit = !0)
            }), this.on("submit.validate", function(t) {
                function n() {
                    var n, a;
                    return !o.settings.submitHandler || (o.submitButton && (n = e("<input type='hidden'/>").attr("name", o.submitButton.name).val(e(o.submitButton).val()).appendTo(o.currentForm)), a = o.settings.submitHandler.call(o, o.currentForm, t), o.submitButton && n.remove(), void 0 !== a && a)
                }
                return o.settings.debug && t.preventDefault(), o.cancelSubmit ? (o.cancelSubmit = !1, n()) : o.form() ? o.pendingRequest ? (o.formSubmitted = !0, !1) : n() : (o.focusInvalid(), !1)
            })), o)
        },
        valid: function() {
            var t, o, n;
            return e(this[0]).is("form") ? t = this.validate().form() : (n = [], t = !0, o = e(this[0].form).validate(), this.each(function() {
                t = o.element(this) && t, t || (n = n.concat(o.errorList))
            }), o.errorList = n), t
        },
        rules: function(t, o) {
            var n, a, r, i, s, c, l = this[0];
            if (null != l && null != l.form) {
                if (t) switch (n = e.data(l.form, "validator").settings, a = n.rules, r = e.validator.staticRules(l), t) {
                    case "add":
                        e.extend(r, e.validator.normalizeRule(o)), delete r.messages, a[l.name] = r, o.messages && (n.messages[l.name] = e.extend(n.messages[l.name], o.messages));
                        break;
                    case "remove":
                        return o ? (c = {}, e.each(o.split(/\s/), function(t, o) {
                            c[o] = r[o], delete r[o], "required" === o && e(l).removeAttr("aria-required")
                        }), c) : (delete a[l.name], r)
                }
                return i = e.validator.normalizeRules(e.extend({}, e.validator.classRules(l), e.validator.attributeRules(l), e.validator.dataRules(l), e.validator.staticRules(l)), l), i.required && (s = i.required, delete i.required, i = e.extend({
                    required: s
                }, i), e(l).attr("aria-required", "true")), i.remote && (s = i.remote, delete i.remote, i = e.extend(i, {
                    remote: s
                })), i
            }
        }
    }), e.extend(e.expr.pseudos || e.expr[":"], {
        blank: function(t) {
            return !e.trim("" + e(t).val())
        },
        filled: function(t) {
            var o = e(t).val();
            return null !== o && !!e.trim("" + o)
        },
        unchecked: function(t) {
            return !e(t).prop("checked")
        }
    }), e.validator = function(t, o) {
        this.settings = e.extend(!0, {}, e.validator.defaults, t), this.currentForm = o, this.init()
    }, e.validator.format = function(t, o) {
        return 1 === arguments.length ? function() {
            var o = e.makeArray(arguments);
            return o.unshift(t), e.validator.format.apply(this, o)
        } : void 0 === o ? t : (arguments.length > 2 && o.constructor !== Array && (o = e.makeArray(arguments).slice(1)), o.constructor !== Array && (o = [o]), e.each(o, function(e, o) {
            t = t.replace(new RegExp("\\{" + e + "\\}", "g"), function() {
                return o
            })
        }), t)
    }, e.extend(e.validator, {
        defaults: {
            messages: {},
            groups: {},
            rules: {},
            errorClass: "error",
            pendingClass: "pending",
            validClass: "valid",
            errorElement: "label",
            focusCleanup: !1,
            focusInvalid: !0,
            errorContainer: e([]),
            errorLabelContainer: e([]),
            onsubmit: !0,
            ignore: ":hidden",
            ignoreTitle: !1,
            onfocusin: function(e) {
                this.lastActive = e, this.settings.focusCleanup && (this.settings.unhighlight && this.settings.unhighlight.call(this, e, this.settings.errorClass, this.settings.validClass), this.hideThese(this.errorsFor(e)))
            },
            onfocusout: function(e) {
                this.checkable(e) || !(e.name in this.submitted) && this.optional(e) || this.element(e)
            },
            onkeyup: function(t, o) {
                var n = [16, 17, 18, 20, 35, 36, 37, 38, 39, 40, 45, 144, 225];
                9 === o.which && "" === this.elementValue(t) || e.inArray(o.keyCode, n) !== -1 || (t.name in this.submitted || t.name in this.invalid) && this.element(t)
            },
            onclick: function(e) {
                e.name in this.submitted ? this.element(e) : e.parentNode.name in this.submitted && this.element(e.parentNode)
            },
            highlight: function(t, o, n) {
                "radio" === t.type ? this.findByName(t.name).addClass(o).removeClass(n) : e(t).addClass(o).removeClass(n)
            },
            unhighlight: function(t, o, n) {
                "radio" === t.type ? this.findByName(t.name).removeClass(o).addClass(n) : e(t).removeClass(o).addClass(n)
            }
        },
        setDefaults: function(t) {
            e.extend(e.validator.defaults, t)
        },
        messages: {
            required: "This field is required.",
            remote: "Please fix this field.",
            email: "Please enter a valid email address.",
            url: "Please enter a valid URL.",
            date: "Please enter a valid date.",
            dateISO: "Please enter a valid date (ISO).",
            number: "Please enter a valid number.",
            digits: "Please enter only digits.",
            equalTo: "Please enter the same value again.",
            maxlength: e.validator.format("Please enter no more than {0} characters."),
            minlength: e.validator.format("Please enter at least {0} characters."),
            rangelength: e.validator.format("Please enter a value between {0} and {1} characters long."),
            range: e.validator.format("Please enter a value between {0} and {1}."),
            max: e.validator.format("Please enter a value less than or equal to {0}."),
            min: e.validator.format("Please enter a value greater than or equal to {0}."),
            step: e.validator.format("Please enter a multiple of {0}.")
        },
        autoCreateRanges: !1,
        prototype: {
            init: function() {
                function t(t) {
                    !this.form && this.hasAttribute("contenteditable") && (this.form = e(this).closest("form")[0]);
                    var o = e.data(this.form, "validator"),
                        n = "on" + t.type.replace(/^validate/, ""),
                        a = o.settings;
                    a[n] && !e(this).is(a.ignore) && a[n].call(o, this, t)
                }
                this.labelContainer = e(this.settings.errorLabelContainer), this.errorContext = this.labelContainer.length && this.labelContainer || e(this.currentForm), this.containers = e(this.settings.errorContainer).add(this.settings.errorLabelContainer), this.submitted = {}, this.valueCache = {}, this.pendingRequest = 0, this.pending = {}, this.invalid = {}, this.reset();
                var o, n = this.groups = {};
                e.each(this.settings.groups, function(t, o) {
                    "string" == typeof o && (o = o.split(/\s/)), e.each(o, function(e, o) {
                        n[o] = t
                    })
                }), o = this.settings.rules, e.each(o, function(t, n) {
                    o[t] = e.validator.normalizeRule(n)
                }), e(this.currentForm).on("focusin.validate focusout.validate keyup.validate", ":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']", t).on("click.validate", "select, option, [type='radio'], [type='checkbox']", t), this.settings.invalidHandler && e(this.currentForm).on("invalid-form.validate", this.settings.invalidHandler), e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required", "true")
            },
            form: function() {
                return this.checkForm(), e.extend(this.submitted, this.errorMap), this.invalid = e.extend({}, this.errorMap), this.valid() || e(this.currentForm).triggerHandler("invalid-form", [this]), this.showErrors(), this.valid()
            },
            checkForm: function() {
                this.prepareForm();
                for (var e = 0, t = this.currentElements = this.elements(); t[e]; e++) this.check(t[e]);
                return this.valid()
            },
            element: function(t) {
                var o, n, a = this.clean(t),
                    r = this.validationTargetFor(a),
                    i = this,
                    s = !0;
                return void 0 === r ? delete this.invalid[a.name] : (this.prepareElement(r), this.currentElements = e(r), n = this.groups[r.name], n && e.each(this.groups, function(e, t) {
                    t === n && e !== r.name && (a = i.validationTargetFor(i.clean(i.findByName(e))), a && a.name in i.invalid && (i.currentElements.push(a), s = i.check(a) && s))
                }), o = this.check(r) !== !1, s = s && o, o ? this.invalid[r.name] = !1 : this.invalid[r.name] = !0, this.numberOfInvalids() || (this.toHide = this.toHide.add(this.containers)), this.showErrors(), e(t).attr("aria-invalid", !o)), s
            },
            showErrors: function(t) {
                if (t) {
                    var o = this;
                    e.extend(this.errorMap, t), this.errorList = e.map(this.errorMap, function(e, t) {
                        return {
                            message: e,
                            element: o.findByName(t)[0]
                        }
                    }), this.successList = e.grep(this.successList, function(e) {
                        return !(e.name in t)
                    })
                }
                this.settings.showErrors ? this.settings.showErrors.call(this, this.errorMap, this.errorList) : this.defaultShowErrors()
            },
            resetForm: function() {
                e.fn.resetForm && e(this.currentForm).resetForm(), this.invalid = {}, this.submitted = {}, this.prepareForm(), this.hideErrors();
                var t = this.elements().removeData("previousValue").removeAttr("aria-invalid");
                this.resetElements(t)
            },
            resetElements: function(e) {
                var t;
                if (this.settings.unhighlight)
                    for (t = 0; e[t]; t++) this.settings.unhighlight.call(this, e[t], this.settings.errorClass, ""), this.findByName(e[t].name).removeClass(this.settings.validClass);
                else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)
            },
            numberOfInvalids: function() {
                return this.objectLength(this.invalid)
            },
            objectLength: function(e) {
                var t, o = 0;
                for (t in e) e[t] && o++;
                return o
            },
            hideErrors: function() {
                this.hideThese(this.toHide)
            },
            hideThese: function(e) {
                e.not(this.containers).text(""), this.addWrapper(e).hide()
            },
            valid: function() {
                return 0 === this.size()
            },
            size: function() {
                return this.errorList.length
            },
            focusInvalid: function() {
                if (this.settings.focusInvalid) try {
                    e(this.findLastActive() || this.errorList.length && this.errorList[0].element || []).filter(":visible").focus().trigger("focusin")
                } catch (t) {}
            },
            findLastActive: function() {
                var t = this.lastActive;
                return t && 1 === e.grep(this.errorList, function(e) {
                    return e.element.name === t.name
                }).length && t
            },
            elements: function() {
                var t = this,
                    o = {};
                return e(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function() {
                    var n = this.name || e(this).attr("name");
                    return !n && t.settings.debug && window.console && console.error("%o has no name assigned", this), this.hasAttribute("contenteditable") && (this.form = e(this).closest("form")[0]), !(n in o || !t.objectLength(e(this).rules()) || (o[n] = !0, 0))
                })
            },
            clean: function(t) {
                return e(t)[0]
            },
            errors: function() {
                var t = this.settings.errorClass.split(" ").join(".");
                return e(this.settings.errorElement + "." + t, this.errorContext)
            },
            resetInternals: function() {
                this.successList = [], this.errorList = [], this.errorMap = {}, this.toShow = e([]), this.toHide = e([])
            },
            reset: function() {
                this.resetInternals(), this.currentElements = e([])
            },
            prepareForm: function() {
                this.reset(), this.toHide = this.errors().add(this.containers)
            },
            prepareElement: function(e) {
                this.reset(), this.toHide = this.errorsFor(e)
            },
            elementValue: function(t) {
                var o, n, a = e(t),
                    r = t.type;
                return "radio" === r || "checkbox" === r ? this.findByName(t.name).filter(":checked").val() : "number" === r && "undefined" != typeof t.validity ? t.validity.badInput ? "NaN" : a.val() : (o = t.hasAttribute("contenteditable") ? a.text() : a.val(), "file" === r ? "C:\\fakepath\\" === o.substr(0, 12) ? o.substr(12) : (n = o.lastIndexOf("/"), n >= 0 ? o.substr(n + 1) : (n = o.lastIndexOf("\\"), n >= 0 ? o.substr(n + 1) : o)) : "string" == typeof o ? o.replace(/\r/g, "") : o)
            },
            check: function(t) {
                t = this.validationTargetFor(this.clean(t));
                var o, n, a, r = e(t).rules(),
                    i = e.map(r, function(e, t) {
                        return t
                    }).length,
                    s = !1,
                    c = this.elementValue(t);
                if ("function" == typeof r.normalizer) {
                    if (c = r.normalizer.call(t, c), "string" != typeof c) throw new TypeError("The normalizer should return a string value.");
                    delete r.normalizer
                }
                for (n in r) {
                    a = {
                        method: n,
                        parameters: r[n]
                    };
                    try {
                        if (o = e.validator.methods[n].call(this, c, t, a.parameters), "dependency-mismatch" === o && 1 === i) {
                            s = !0;
                            continue
                        }
                        if (s = !1, "pending" === o) return void(this.toHide = this.toHide.not(this.errorsFor(t)));
                        if (!o) return this.formatAndAdd(t, a), !1
                    } catch (l) {
                        throw this.settings.debug && window.console && console.log("Exception occurred when checking element " + t.id + ", check the '" + a.method + "' method.", l), l instanceof TypeError && (l.message += ".  Exception occurred when checking element " + t.id + ", check the '" + a.method + "' method."), l
                    }
                }
                if (!s) return this.objectLength(r) && this.successList.push(t), !0
            },
            customDataMessage: function(t, o) {
                return e(t).data("msg" + o.charAt(0).toUpperCase() + o.substring(1).toLowerCase()) || e(t).data("msg")
            },
            customMessage: function(e, t) {
                var o = this.settings.messages[e];
                return o && (o.constructor === String ? o : o[t])
            },
            findDefined: function() {
                for (var e = 0; e < arguments.length; e++)
                    if (void 0 !== arguments[e]) return arguments[e]
            },
            defaultMessage: function(t, o) {
                "string" == typeof o && (o = {
                    method: o
                });
                var n = this.findDefined(this.customMessage(t.name, o.method), this.customDataMessage(t, o.method), !this.settings.ignoreTitle && t.title || void 0, e.validator.messages[o.method], "<strong>Warning: No message defined for " + t.name + "</strong>"),
                    a = /\$?\{(\d+)\}/g;
                return "function" == typeof n ? n = n.call(this, o.parameters, t) : a.test(n) && (n = e.validator.format(n.replace(a, "{$1}"), o.parameters)), n
            },
            formatAndAdd: function(e, t) {
                var o = this.defaultMessage(e, t);
                this.errorList.push({
                    message: o,
                    element: e,
                    method: t.method
                }), this.errorMap[e.name] = o, this.submitted[e.name] = o
            },
            addWrapper: function(e) {
                return this.settings.wrapper && (e = e.add(e.parent(this.settings.wrapper))), e
            },
            defaultShowErrors: function() {
                var e, t, o;
                for (e = 0; this.errorList[e]; e++) o = this.errorList[e], this.settings.highlight && this.settings.highlight.call(this, o.element, this.settings.errorClass, this.settings.validClass), this.showLabel(o.element, o.message);
                if (this.errorList.length && (this.toShow = this.toShow.add(this.containers)), this.settings.success)
                    for (e = 0; this.successList[e]; e++) this.showLabel(this.successList[e]);
                if (this.settings.unhighlight)
                    for (e = 0, t = this.validElements(); t[e]; e++) this.settings.unhighlight.call(this, t[e], this.settings.errorClass, this.settings.validClass);
                this.toHide = this.toHide.not(this.toShow), this.hideErrors(), this.addWrapper(this.toShow).show()
            },
            validElements: function() {
                return this.currentElements.not(this.invalidElements())
            },
            invalidElements: function() {
                return e(this.errorList).map(function() {
                    return this.element
                })
            },
            showLabel: function(t, o) {
                var n, a, r, i, s = this.errorsFor(t),
                    c = this.idOrName(t),
                    l = e(t).attr("aria-describedby");
                s.length ? (s.removeClass(this.settings.validClass).addClass(this.settings.errorClass), s.html(o)) : (s = e("<" + this.settings.errorElement + ">").attr("id", c + "-error").addClass(this.settings.errorClass).html(o || ""), n = s, this.settings.wrapper && (n = s.hide().show().wrap("<" + this.settings.wrapper + "/>").parent()), this.labelContainer.length ? this.labelContainer.append(n) : this.settings.errorPlacement ? this.settings.errorPlacement.call(this, n, e(t)) : n.insertAfter(t), s.is("label") ? s.attr("for", c) : 0 === s.parents("label[for='" + this.escapeCssMeta(c) + "']").length && (r = s.attr("id"), l ? l.match(new RegExp("\\b" + this.escapeCssMeta(r) + "\\b")) || (l += " " + r) : l = r, e(t).attr("aria-describedby", l), a = this.groups[t.name], a && (i = this, e.each(i.groups, function(t, o) {
                    o === a && e("[name='" + i.escapeCssMeta(t) + "']", i.currentForm).attr("aria-describedby", s.attr("id"))
                })))), !o && this.settings.success && (s.text(""), "string" == typeof this.settings.success ? s.addClass(this.settings.success) : this.settings.success(s, t)), this.toShow = this.toShow.add(s)
            },
            errorsFor: function(t) {
                var o = this.escapeCssMeta(this.idOrName(t)),
                    n = e(t).attr("aria-describedby"),
                    a = "label[for='" + o + "'], label[for='" + o + "'] *";
                return n && (a = a + ", #" + this.escapeCssMeta(n).replace(/\s+/g, ", #")), this.errors().filter(a)
            },
            escapeCssMeta: function(e) {
                return e.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g, "\\$1")
            },
            idOrName: function(e) {
                return this.groups[e.name] || (this.checkable(e) ? e.name : e.id || e.name)
            },
            validationTargetFor: function(t) {
                return this.checkable(t) && (t = this.findByName(t.name)), e(t).not(this.settings.ignore)[0]
            },
            checkable: function(e) {
                return /radio|checkbox/i.test(e.type)
            },
            findByName: function(t) {
                return e(this.currentForm).find("[name='" + this.escapeCssMeta(t) + "']")
            },
            getLength: function(t, o) {
                switch (o.nodeName.toLowerCase()) {
                    case "select":
                        return e("option:selected", o).length;
                    case "input":
                        if (this.checkable(o)) return this.findByName(o.name).filter(":checked").length
                }
                return t.length
            },
            depend: function(e, t) {
                return !this.dependTypes[typeof e] || this.dependTypes[typeof e](e, t)
            },
            dependTypes: {
                "boolean": function(e) {
                    return e
                },
                string: function(t, o) {
                    return !!e(t, o.form).length
                },
                "function": function(e, t) {
                    return e(t)
                }
            },
            optional: function(t) {
                var o = this.elementValue(t);
                return !e.validator.methods.required.call(this, o, t) && "dependency-mismatch"
            },
            startRequest: function(t) {
                this.pending[t.name] || (this.pendingRequest++, e(t).addClass(this.settings.pendingClass), this.pending[t.name] = !0)
            },
            stopRequest: function(t, o) {
                this.pendingRequest--, this.pendingRequest < 0 && (this.pendingRequest = 0), delete this.pending[t.name], e(t).removeClass(this.settings.pendingClass), o && 0 === this.pendingRequest && this.formSubmitted && this.form() ? (e(this.currentForm).submit(), this.formSubmitted = !1) : !o && 0 === this.pendingRequest && this.formSubmitted && (e(this.currentForm).triggerHandler("invalid-form", [this]), this.formSubmitted = !1)
            },
            previousValue: function(t, o) {
                return o = "string" == typeof o && o || "remote", e.data(t, "previousValue") || e.data(t, "previousValue", {
                    old: null,
                    valid: !0,
                    message: this.defaultMessage(t, {
                        method: o
                    })
                })
            },
            destroy: function() {
                this.resetForm(), e(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")
            }
        },
        classRuleSettings: {
            required: {
                required: !0
            },
            email: {
                email: !0
            },
            url: {
                url: !0
            },
            date: {
                date: !0
            },
            dateISO: {
                dateISO: !0
            },
            number: {
                number: !0
            },
            digits: {
                digits: !0
            },
            creditcard: {
                creditcard: !0
            }
        },
        addClassRules: function(t, o) {
            t.constructor === String ? this.classRuleSettings[t] = o : e.extend(this.classRuleSettings, t)
        },
        classRules: function(t) {
            var o = {},
                n = e(t).attr("class");
            return n && e.each(n.split(" "), function() {
                this in e.validator.classRuleSettings && e.extend(o, e.validator.classRuleSettings[this])
            }), o
        },
        normalizeAttributeRule: function(e, t, o, n) {
            /min|max|step/.test(o) && (null === t || /number|range|text/.test(t)) && (n = Number(n), isNaN(n) && (n = void 0)), n || 0 === n ? e[o] = n : t === o && "range" !== t && (e[o] = !0)
        },
        attributeRules: function(t) {
            var o, n, a = {},
                r = e(t),
                i = t.getAttribute("type");
            for (o in e.validator.methods) "required" === o ? (n = t.getAttribute(o), "" === n && (n = !0), n = !!n) : n = r.attr(o), this.normalizeAttributeRule(a, i, o, n);
            return a.maxlength && /-1|2147483647|524288/.test(a.maxlength) && delete a.maxlength, a
        },
        dataRules: function(t) {
            var o, n, a = {},
                r = e(t),
                i = t.getAttribute("type");
            for (o in e.validator.methods) n = r.data("rule" + o.charAt(0).toUpperCase() + o.substring(1).toLowerCase()), this.normalizeAttributeRule(a, i, o, n);
            return a
        },
        staticRules: function(t) {
            var o = {},
                n = e.data(t.form, "validator");
            return n.settings.rules && (o = e.validator.normalizeRule(n.settings.rules[t.name]) || {}), o
        },
        normalizeRules: function(t, o) {
            return e.each(t, function(n, a) {
                if (a === !1) return void delete t[n];
                if (a.param || a.depends) {
                    var r = !0;
                    switch (typeof a.depends) {
                        case "string":
                            r = !!e(a.depends, o.form).length;
                            break;
                        case "function":
                            r = a.depends.call(o, o)
                    }
                    r ? t[n] = void 0 === a.param || a.param : (e.data(o.form, "validator").resetElements(e(o)), delete t[n])
                }
            }), e.each(t, function(n, a) {
                t[n] = e.isFunction(a) && "normalizer" !== n ? a(o) : a
            }), e.each(["minlength", "maxlength"], function() {
                t[this] && (t[this] = Number(t[this]))
            }), e.each(["rangelength", "range"], function() {
                var o;
                t[this] && (e.isArray(t[this]) ? t[this] = [Number(t[this][0]), Number(t[this][1])] : "string" == typeof t[this] && (o = t[this].replace(/[\[\]]/g, "").split(/[\s,]+/), t[this] = [Number(o[0]), Number(o[1])]))
            }), e.validator.autoCreateRanges && (null != t.min && null != t.max && (t.range = [t.min, t.max], delete t.min, delete t.max), null != t.minlength && null != t.maxlength && (t.rangelength = [t.minlength, t.maxlength], delete t.minlength, delete t.maxlength)), t
        },
        normalizeRule: function(t) {
            if ("string" == typeof t) {
                var o = {};
                e.each(t.split(/\s/), function() {
                    o[this] = !0
                }), t = o
            }
            return t
        },
        addMethod: function(t, o, n) {
            e.validator.methods[t] = o, e.validator.messages[t] = void 0 !== n ? n : e.validator.messages[t], o.length < 3 && e.validator.addClassRules(t, e.validator.normalizeRule(t))
        },
        methods: {
            required: function(t, o, n) {
                if (!this.depend(n, o)) return "dependency-mismatch";
                if ("select" === o.nodeName.toLowerCase()) {
                    var a = e(o).val();
                    return a && a.length > 0
                }
                return this.checkable(o) ? this.getLength(t, o) > 0 : t.length > 0
            },
            email: function(e, t) {
                return this.optional(t) || /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)
            },
            url: function(e, t) {
                return this.optional(t) || /^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(e)
            },
            date: function(e, t) {
                return this.optional(t) || !/Invalid|NaN/.test(new Date(e).toString())
            },
            dateISO: function(e, t) {
                return this.optional(t) || /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)
            },
            number: function(e, t) {
                return this.optional(t) || /^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)
            },
            digits: function(e, t) {
                return this.optional(t) || /^\d+$/.test(e)
            },
            minlength: function(t, o, n) {
                var a = e.isArray(t) ? t.length : this.getLength(t, o);
                return this.optional(o) || a >= n
            },
            maxlength: function(t, o, n) {
                var a = e.isArray(t) ? t.length : this.getLength(t, o);
                return this.optional(o) || a <= n;
            },
            rangelength: function(t, o, n) {
                var a = e.isArray(t) ? t.length : this.getLength(t, o);
                return this.optional(o) || a >= n[0] && a <= n[1]
            },
            min: function(e, t, o) {
                return this.optional(t) || e >= o
            },
            max: function(e, t, o) {
                return this.optional(t) || e <= o
            },
            range: function(e, t, o) {
                return this.optional(t) || e >= o[0] && e <= o[1]
            },
            step: function(t, o, n) {
                var a, r = e(o).attr("type"),
                    i = "Step attribute on input type " + r + " is not supported.",
                    s = ["text", "number", "range"],
                    c = new RegExp("\\b" + r + "\\b"),
                    l = r && !c.test(s.join()),
                    d = function(e) {
                        var t = ("" + e).match(/(?:\.(\d+))?$/);
                        return t && t[1] ? t[1].length : 0
                    },
                    u = function(e) {
                        return Math.round(e * Math.pow(10, a))
                    },
                    p = !0;
                if (l) throw new Error(i);
                return a = d(n), (d(t) > a || u(t) % u(n) !== 0) && (p = !1), this.optional(o) || p
            },
            equalTo: function(t, o, n) {
                var a = e(n);
                return this.settings.onfocusout && a.not(".validate-equalTo-blur").length && a.addClass("validate-equalTo-blur").on("blur.validate-equalTo", function() {
                    e(o).valid()
                }), t === a.val()
            },
            remote: function(t, o, n, a) {
                if (this.optional(o)) return "dependency-mismatch";
                a = "string" == typeof a && a || "remote";
                var r, i, s, c = this.previousValue(o, a);
                return this.settings.messages[o.name] || (this.settings.messages[o.name] = {}), c.originalMessage = c.originalMessage || this.settings.messages[o.name][a], this.settings.messages[o.name][a] = c.message, n = "string" == typeof n && {
                    url: n
                } || n, s = e.param(e.extend({
                    data: t
                }, n.data)), c.old === s ? c.valid : (c.old = s, r = this, this.startRequest(o), i = {}, i[o.name] = t, e.ajax(e.extend(!0, {
                    mode: "abort",
                    port: "validate" + o.name,
                    dataType: "json",
                    data: i,
                    context: r.currentForm,
                    success: function(e) {
                        var n, i, s, l = e === !0 || "true" === e;
                        r.settings.messages[o.name][a] = c.originalMessage, l ? (s = r.formSubmitted, r.resetInternals(), r.toHide = r.errorsFor(o), r.formSubmitted = s, r.successList.push(o), r.invalid[o.name] = !1, r.showErrors()) : (n = {}, i = e || r.defaultMessage(o, {
                            method: a,
                            parameters: t
                        }), n[o.name] = c.message = i, r.invalid[o.name] = !0, r.showErrors(n)), c.valid = l, r.stopRequest(o, l)
                    }
                }, n)), "pending")
            }
        }
    });
    var t, o = {};
    return e.ajaxPrefilter ? e.ajaxPrefilter(function(e, t, n) {
        var a = e.port;
        "abort" === e.mode && (o[a] && o[a].abort(), o[a] = n)
    }) : (t = e.ajax, e.ajax = function(n) {
        var a = ("mode" in n ? n : e.ajaxSettings).mode,
            r = ("port" in n ? n : e.ajaxSettings).port;
        return "abort" === a ? (o[r] && o[r].abort(), o[r] = t.apply(this, arguments), o[r]) : t.apply(this, arguments)
    }), e
}), $(document).ready(function(e) {
    function t(e) {
        var t = $(e),
            o = t.data("submenuId"),
            a = $("#" + o),
            r = (n.outerHeight(), n.outerWidth());
        a.css({
            display: "block",
            top: -1,
            left: r - 3
        }), t.find("a").addClass("maintainHover")
    }

    function o(e) {
        var t = $(e),
            o = t.data("submenuId"),
            n = $("#" + o);
        n.css("display", "none"), t.find("a").removeClass("maintainHover")
    }
    var n = $("#navBar");
    $("#navBar").menuAim({
        activate: t,
        deactivate: o
    });
    var n = $("#navBar-sticky");
    $("#navBar-sticky").menuAim({
        activate: t,
        deactivate: o
    }), $(".dropdown.full-wid .dropdown-menu li").click(function(e) {
        e.stopPropagation()
    }), $(document).click(function() {
        $(".popover").css("display", "none"), $("a.maintainHover").removeClass("maintainHover")
    })
});